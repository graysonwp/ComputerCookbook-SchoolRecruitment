<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="锁 #  首先，对 MySQL 锁进行划分：
 按照锁的粒度划分：表锁（Table Level Lock）、行锁（Row Level Lock）。 按照锁的使用方式划分：共享锁（Share Lock）、排他锁（悲观锁的一种实现）（eXclusive Lock）。 按照锁的思想划分：悲观锁（Pessimistic Concurrency Control, PCC）、乐观锁（Optimistic Concurrency Control, PCC）。 InnoDB的几种意向锁：意向共享锁（Intensive Shared Lock, IS）、意向排他锁（Intensive Exclusive Lock）。 InnoDB的几种行级锁：记录锁（Recoord Lock）、间隙锁（Gap Lock）、临键锁（Next-key Lock）。  1 表锁和行锁 #  1.1 表锁 #  1.1.1 含义 #   表级锁是 MySQL 中粒度最大的一种锁，表示当前的操作对整张表加锁。 表锁响应的是非索引字段，即全表扫描，全表扫描时锁定整张表。 表级锁有两种模式：表共享锁（Table Read Lock）、表独占写锁（Table Write Lock）：  表共享锁： 不会阻塞其他用户对同一张表的读请求，但会阻塞对同一张表的写请求。 表独占写锁：会阻塞其他用户对同一张表的读写请求，当一个线程获得对一个表的写锁之后，只有持有锁的线程可以对表进行更新操作，其他线程的读、写操作都会等待，直到锁被释放为止。    1.1.2 如何加表锁 #    给表显示加锁，一般是为了一定程度模拟事务操作，实现对某一时间点多个表的一致性读取。
  例如，有一个订单表 orders，其中记录有订单的总金额 total，同时还有一个订单明细表 order_detail，其中记录有订单每一产品的金额小计 subtotal，假设我们需要检查这两个表的金额合计是否相等，可能就需要执行如下两条 SQL：">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="锁 #  首先，对 MySQL 锁进行划分：
 按照锁的粒度划分：表锁（Table Level Lock）、行锁（Row Level Lock）。 按照锁的使用方式划分：共享锁（Share Lock）、排他锁（悲观锁的一种实现）（eXclusive Lock）。 按照锁的思想划分：悲观锁（Pessimistic Concurrency Control, PCC）、乐观锁（Optimistic Concurrency Control, PCC）。 InnoDB的几种意向锁：意向共享锁（Intensive Shared Lock, IS）、意向排他锁（Intensive Exclusive Lock）。 InnoDB的几种行级锁：记录锁（Recoord Lock）、间隙锁（Gap Lock）、临键锁（Next-key Lock）。  1 表锁和行锁 #  1.1 表锁 #  1.1.1 含义 #   表级锁是 MySQL 中粒度最大的一种锁，表示当前的操作对整张表加锁。 表锁响应的是非索引字段，即全表扫描，全表扫描时锁定整张表。 表级锁有两种模式：表共享锁（Table Read Lock）、表独占写锁（Table Write Lock）：  表共享锁： 不会阻塞其他用户对同一张表的读请求，但会阻塞对同一张表的写请求。 表独占写锁：会阻塞其他用户对同一张表的读写请求，当一个线程获得对一个表的写锁之后，只有持有锁的线程可以对表进行更新操作，其他线程的读、写操作都会等待，直到锁被释放为止。    1.1.2 如何加表锁 #    给表显示加锁，一般是为了一定程度模拟事务操作，实现对某一时间点多个表的一致性读取。
  例如，有一个订单表 orders，其中记录有订单的总金额 total，同时还有一个订单明细表 order_detail，其中记录有订单每一产品的金额小计 subtotal，假设我们需要检查这两个表的金额合计是否相等，可能就需要执行如下两条 SQL：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.2-%E9%94%81/" /><meta property="article:section" content="docs" />



<title>1.2 锁 | Computer Cookbook School Recruitment</title>
<link rel="manifest" href="/school-recruitment/manifest.json">
<link rel="icon" href="/school-recruitment/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/school-recruitment/book.min.57f7f660871517a5bfcfb5e2de853d806f7e34d94ebd5f3f3bad62e9ddbae209.css" integrity="sha256-V/f2YIcVF6W/z7Xi3oU9gG9&#43;NNlOvV8/O61i6d264gk=" crossorigin="anonymous">
  <script defer src="/school-recruitment/flexsearch.min.js"></script>
  <script defer src="/school-recruitment/en.search.min.1bc398404d6e9eec8ffa32b7de2bb82b89efd0a8a92c5a540e9f38e9bb5b4a5b.js" integrity="sha256-G8OYQE1unuyP&#43;jK33iu4K4nv0KipLFpUDp846btbSls=" crossorigin="anonymous"></script>

  <script defer src="/school-recruitment/sw.min.07899fc95e217f83f76b676678ae96a3d8d0d0b042f9f17c3f23eec2551b7b12.js" integrity="sha256-B4mfyV4hf4P3a2dmeK6Wo9jQ0LBC&#43;fF8PyPuwlUbexI=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/school-recruitment/"><span>Computer Cookbook School Recruitment</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="https://www.grayson.top" target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/wpwbb510582246" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>







  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-353f7a5578fa41dbc42c73ea30fe2255" class="toggle"  />
    <label for="section-353f7a5578fa41dbc42c73ea30fe2255" class="flex justify-between">
      <a role="button" class="">第一章 算法</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e0c159ebe8e8b165cd558008fb5f5074" class="toggle"  />
    <label for="section-e0c159ebe8e8b165cd558008fb5f5074" class="flex justify-between">
      <a role="button" class="">1、算法框架</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a9fe725cb6a0f216530b1ac2b85e3b7a" class="toggle"  />
    <label for="section-a9fe725cb6a0f216530b1ac2b85e3b7a" class="flex justify-between">
      <a role="button" class="">1.1 动态规划</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.1-%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/" class="">1.1.1 斐波那契数列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.2-%E5%87%91%E9%9B%B6%E9%92%B1%E9%97%AE%E9%A2%98/" class="">1.1.2 凑零钱问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.3-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" class="">1.1.3 贪心算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.4-%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97/" class="">1.1.4 最长递增子序列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.5-%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/" class="">1.1.5 编辑距离</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.6-%E9%AB%98%E6%A5%BC%E6%89%94%E9%B8%A1%E8%9B%8B/" class="">1.1.6 高楼扔鸡蛋</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.7-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97/" class="">1.1.7 最长回文子序列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.8-%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%92%8C/" class="">1.1.8 最大子序和</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.9-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8/" class="">1.1.9 买卖股票</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.10-%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E6%95%B0%E7%BB%84/" class="">1.1.10 最长重复子数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.11-%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/" class="">1.1.11 最长有效括号</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e36081c41f3a4d8d8355cae83c46c9b8" class="toggle"  />
    <label for="section-e36081c41f3a4d8d8355cae83c46c9b8" class="flex justify-between">
      <a role="button" class="">1.2 二分查找</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/1.2.1-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%A1%86%E6%9E%B6/" class="">1.2.1 二分查找框架</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/1.2.2-%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84/" class="">1.2.2 搜索旋转排序数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/1.2.3-%E5%A6%82%E4%BD%95%E8%BF%90%E7%94%A8%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/" class="">1.2.3 如何运用二分查找算法</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2ac9691c4865fdec0880b3cb638bc594" class="toggle"  />
    <label for="section-2ac9691c4865fdec0880b3cb638bc594" class="flex justify-between">
      <a role="button" class="">1.3 数据结构</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.3.1-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/" class="">1.3.1 反转链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.3.2-%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E7%AC%ACk%E4%B8%AA%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/" class="">1.3.2 数组中的第k个最大元素</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.3.3-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/" class="">1.3.3 二叉树的最近公共祖先</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6c6359aa6ff642b64a85093d9888f8ad" class="toggle"  />
    <label for="section-6c6359aa6ff642b64a85093d9888f8ad" class="flex justify-between">
      <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.4-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" class="">1.4 排序算法</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9b9f975ded87a304ee48569c44f19492" class="toggle"  />
    <label for="section-9b9f975ded87a304ee48569c44f19492" class="flex justify-between">
      <a role="button" class="">1.5 二叉树</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.1-%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86/" class="">1.5.1 二叉树遍历</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.2-%E5%B2%9B%E5%B1%BF%E9%97%AE%E9%A2%98/" class="">1.5.2 岛屿问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.3-%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91/" class="">1.5.3 平衡二叉树</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.4-%E4%BA%8C%E5%8F%89%E6%A0%91%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98/" class="">1.5.4 二叉树路径问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.5-%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91/" class="">1.5.5 构造二叉树</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4571e95d0021653ce2d27ee4b0838ca0" class="toggle"  />
    <label for="section-4571e95d0021653ce2d27ee4b0838ca0" class="flex justify-between">
      <a role="button" class="">1.6 回溯算法</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.6-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/1.6.1-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95%E8%A7%A3%E9%A2%98%E6%A1%86%E6%9E%B6/" class="">1.6.1 回溯算法解题框架</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.6-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/1.6.2-%E5%85%A8%E6%8E%92%E5%88%97/" class="">1.6.2 全排列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.6-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/1.6.3-N%E7%9A%87%E5%90%8E/" class="">1.6.3 N皇后</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8b579ed4452b6a8d2017a24343689b5c" class="toggle"  />
    <label for="section-8b579ed4452b6a8d2017a24343689b5c" class="flex justify-between">
      <a role="button" class="">2、高频面试题</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5a653711e83b11abc9ab6143b1a9fd64" class="toggle"  />
    <label for="section-5a653711e83b11abc9ab6143b1a9fd64" class="flex justify-between">
      <a role="button" class="">2.1 数学</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.1-%E5%BF%AB%E9%80%9F%E6%A8%A1%E5%B9%82%E7%AE%97%E6%B3%95/" class="">2.1.1 快速模幂算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.2-%E6%90%9C%E7%B4%A2%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5/" class="">2.1.2 搜索二维矩阵</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.3-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/" class="">2.1.3 螺旋矩阵</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.4-x-%E7%9A%84%E5%B9%B3%E6%96%B9%E6%A0%B9/" class="">2.1.4 X 的平方根</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5c279474332677699cd0b53888bd51ba" class="toggle"  />
    <label for="section-5c279474332677699cd0b53888bd51ba" class="flex justify-between">
      <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" class="">2.2 二分查找</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e057e8659d2f838952397ed15d20f46c" class="toggle"  />
    <label for="section-e057e8659d2f838952397ed15d20f46c" class="flex justify-between">
      <a role="button" class="">2.3 数组</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.1-%E5%88%A0%E9%99%A4%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9/" class="">2.3.1 删除有序数组中的重复项</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.2-%E6%89%BE%E5%87%BA%E6%95%B0%E7%BB%84%E6%B8%B8%E6%88%8F%E7%9A%84%E8%B5%A2%E5%AE%B6/" class="">2.3.2 找出数组游戏的赢家</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.4-%E5%A6%82%E4%BD%95%E5%AF%BB%E6%89%BE%E6%B6%88%E5%A4%B1%E7%9A%84%E5%85%83%E7%B4%A0/" class="">2.3.4 如何寻找消失的元素</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.5-%E5%A6%82%E4%BD%95%E5%AF%BB%E6%89%BE%E7%BC%BA%E5%A4%B1%E5%92%8C%E9%87%8D%E5%A4%8D%E7%9A%84%E5%85%83%E7%B4%A0/" class="">2.3.5 如何寻找缺失和重复的元素</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.6-%E6%9C%80%E5%A4%A7%E6%95%B0/" class="">2.3.6 最大数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.7-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE/" class="">2.3.7 二维数组中的查找</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.8-%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/" class="">2.3.8 两数之和</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.9-%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/" class="">2.3.9 三数之和</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.10-%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84/" class="">2.3.10 合并两个有序数组</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b0bb9f9be9775f7e7856b63f7c5be80e" class="toggle"  />
    <label for="section-b0bb9f9be9775f7e7856b63f7c5be80e" class="flex justify-between">
      <a role="button" class="">2.4 字符串</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.1-%E6%9E%84%E9%80%A0-K-%E4%B8%AA%E5%9B%9E%E6%96%87%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="">2.4.1 构造 K 个回文字符串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.2-%E5%A6%82%E4%BD%95%E5%AF%BB%E6%89%BE%E6%9C%80%E5%9B%9E%E4%B8%B2/" class="">2.4.2 如何寻找最 回 串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.3-%E5%A6%82%E4%BD%95%E5%88%A4%E5%AE%9A%E6%8B%AC%E5%8F%B7%E7%9A%84%E5%90%88%E6%B3%95%E6%80%A7/" class="">2.4.3 如何判定括号的合法性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E6%95%B4%E6%95%B0-atoi/" class="">2.4.4 字符串转换整数 (Atoi)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.5-%E9%95%BF%E5%BA%A6%E4%B8%BA3%E7%9A%84%E4%B8%8D%E5%90%8C%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97/" class="">2.4.5 长度为3的不同回文子序列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.6-%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/" class="">2.4.6 无重复字符的最长子串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.7-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%8A%A0/" class="">2.4.7 字符串相加</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.8-%E7%BF%BB%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%87%8C%E7%9A%84%E5%8D%95%E8%AF%8D/" class="">2.4.8 翻转字符串里的单词</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c2cc4653d849ecb4e8d0df9162693740" class="toggle"  />
    <label for="section-c2cc4653d849ecb4e8d0df9162693740" class="flex justify-between">
      <a role="button" class="">2.5 链表</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.1-%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8-II/" class="">2.5.1 环形链表 Ii</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.2-%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%88%A4%E6%96%AD%E5%9B%9E%E6%96%87%E9%93%BE%E8%A1%A8/" class="">2.5.2 如何高效判断回文链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.3-K-%E4%B8%AA%E4%B8%80%E7%BB%84%E7%BF%BB%E8%BD%AC%E9%93%BE%E8%A1%A8/" class="">2.5.3 K 个一组翻转链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.4-%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/" class="">2.5.4 相交链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.5-%E9%93%BE%E8%A1%A8%E4%B8%AD%E5%80%92%E6%95%B0%E7%AC%ACk%E4%B8%AA%E8%8A%82%E7%82%B9/" class="">2.5.5 链表中倒数第k个节点</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.6-%E5%90%88%E5%B9%B6K%E4%B8%AA%E5%8D%87%E5%BA%8F%E9%93%BE%E8%A1%A8/" class="">2.5.6 合并 K个升序链表</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-95a636b3d00f4ce42d96beeef34d9742" class="toggle"  />
    <label for="section-95a636b3d00f4ce42d96beeef34d9742" class="flex justify-between">
      <a role="button" class="">2.6 二叉树</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.6-%E4%BA%8C%E5%8F%89%E6%A0%91/2.6.1-%E5%9C%A8%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E5%88%86%E9%85%8D%E7%A1%AC%E5%B8%81/" class="">2.6.1 在二叉树中分配硬币</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.6-%E4%BA%8C%E5%8F%89%E6%A0%91/2.6.2-%E5%B0%86%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/" class="">2.6.2 将有序数组转换为二叉搜索树</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.6-%E4%BA%8C%E5%8F%89%E6%A0%91/2.6.4-%E9%87%8D%E5%BB%BA%E4%BA%8C%E5%8F%89%E6%A0%91/" class="">2.6.4 重建二叉树</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.6-%E4%BA%8C%E5%8F%89%E6%A0%91/2.6.5-%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E7%9A%84%E6%9C%80%E5%A4%A7%E8%B7%AF%E5%BE%84%E5%92%8C/" class="">2.6.5 二叉树中的最大路径和</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2dca4a28932da6fd2ab80d6adf86f380" class="toggle"  />
    <label for="section-2dca4a28932da6fd2ab80d6adf86f380" class="flex justify-between">
      <a role="button" class="">2.7 队列</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.7-%E9%98%9F%E5%88%97/2.7.1-%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/" class="">2.7.1 用栈实现队列</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9868fca37e026543bb4220219b385440" class="toggle"  />
    <label for="section-9868fca37e026543bb4220219b385440" class="flex justify-between">
      <a role="button" class="">2.8 动态规划</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.8-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/2.8.1-%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E8%A7%A3%E5%86%B3%E6%8E%A5%E9%9B%A8%E6%B0%B4%E9%97%AE%E9%A2%98/" class="">2.8.1 如何高效解决接雨水问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.8-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/2.8.2-%E6%9C%80%E5%B0%91%E4%BE%A7%E8%B7%B3%E6%AC%A1%E6%95%B0/" class="">2.8.2 最少侧跳次数</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2b868ec58580c16b57b76d0e583b5ec9" class="toggle"  />
    <label for="section-2b868ec58580c16b57b76d0e583b5ec9" class="flex justify-between">
      <a role="button" class="">2.9 设计</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.9-%E8%AE%BE%E8%AE%A1/2.9.1-%E5%AE%9E%E7%8E%B0-Trie-%E5%89%8D%E7%BC%80%E6%A0%91/" class="">2.9.1 实现 Trie (前缀树)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.9-%E8%AE%BE%E8%AE%A1/2.9.2-LRU-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" class="">2.9.2 Lru 缓存机制</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0922907dd56f7a4a192db7338c0e7143" class="toggle"  />
    <label for="section-0922907dd56f7a4a192db7338c0e7143" class="flex justify-between">
      <a role="button" class="">第二章 计算机基础</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e090ea075956ea0a88f3be27eb8b8174" class="toggle"  />
    <label for="section-e090ea075956ea0a88f3be27eb8b8174" class="flex justify-between">
      <a role="button" class="">1、计算机网络</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-043e7911fd2d67fbc52b823c1516a0d8" class="toggle"  />
    <label for="section-043e7911fd2d67fbc52b823c1516a0d8" class="flex justify-between">
      <a role="button" class="">1.1 传输层： Tcp和 UDP</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.1-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/" class="">1.1.1 三次握手</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.2-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/" class="">1.1.2 四次挥手</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.3-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/" class="">1.1.3 流量控制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.5-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/" class="">1.1.5 拥塞控制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.6-TCP%E5%92%8CUDP%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.1.6 Tcp和 Udp的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.7-TCP%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E4%BC%A0%E8%BE%93%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7/" class="">1.1.7 Tcp如何保证传输的可靠性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.8-TCP%E9%95%BF%E8%BF%9E%E6%8E%A5%E5%92%8C%E7%9F%AD%E8%BF%9E%E6%8E%A5/" class="">1.1.8 Tcp长连接和短连接</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c1e479729a89ea5ddbe8dd67b5f3ed4e" class="toggle"  />
    <label for="section-c1e479729a89ea5ddbe8dd67b5f3ed4e" class="flex justify-between">
      <a role="button" class="">1.2 应用层：HTTP和HTTPS</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.1-HTTP%E5%92%8CHTTPS%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.2.1 Http和 HTTP S的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.2-GET%E5%92%8CPOST%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.2.2 Get和 Post的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.3-Session%E4%B8%8ECookie%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.2.3 Session与 Cookie的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.4-%E4%BB%8E%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%E5%88%B0%E8%8E%B7%E5%BE%97%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%BF%87%E7%A8%8B%E8%B6%8A%E8%AF%A6%E7%BB%86%E8%B6%8A%E5%A5%BD/" class="">1.2.4 从输入网址到获得页面的过程（越详细越好）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.5-HTTP%E8%AF%B7%E6%B1%82%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E7%8A%B6%E6%80%81%E7%A0%81/" class="">1.2.5 Http请求有哪些常见的状态码</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.6-%E4%BB%80%E4%B9%88%E6%98%AFRIP%E7%AE%97%E6%B3%95%E6%98%AF%E4%BB%80%E4%B9%88/" class="">1.2.6 什么是 Rip，算法是什么</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.7-HTTP1.0HTTP1.1%E5%92%8CHTTP2.0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8C%BA%E5%88%AB/" class="">1.2.7 Http1.0、 Http1.1和 Http2.0的主要区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.8-DNS/" class="">1.2.8 DNS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.9-HTTPS%E5%8A%A0%E5%AF%86%E5%92%8C%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B/" class="">1.2.9 HTTP S加密和认证过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.10-%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB/" class="">1.2.10 常见网络攻击</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.11-REST/" class="">1.2.11 Rest</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.3-%E8%AE%A1%E7%AE%97%E5%85%B6%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" class="">1.3 计算其网络体系结构</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9a70073e95afd0aa2b7107f6cb77a3ce" class="toggle"  />
    <label for="section-9a70073e95afd0aa2b7107f6cb77a3ce" class="flex justify-between">
      <a role="button" class="">1.4 网络层协议</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.1-IP%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%86%E7%B1%BB/" class="">1.4.1 Ip地址的分类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.2-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91/" class="">1.4.2 划分子网</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.3-%E4%BB%80%E4%B9%88%E6%98%AFARP%E5%8D%8F%E8%AE%AE/" class="">1.4.3 什么是 Arp协议</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.4-NAT%E5%8D%8F%E8%AE%AE/" class="">1.4.4 Nat协议</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-09f7d8995bc26810475d1c56597a312e" class="toggle"  />
    <label for="section-09f7d8995bc26810475d1c56597a312e" class="flex justify-between">
      <a role="button" class="">2、操作系统</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2f767bf946d6dc8ddeda6b6435471e5b" class="toggle"  />
    <label for="section-2f767bf946d6dc8ddeda6b6435471e5b" class="flex justify-between">
      <a role="button" class="">2.1 进程和线程</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">2.1.1 进程和线程的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.2-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/" class="">2.1.2 进程间通信方式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.3-%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98/" class="">2.1.3 进程同步问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.4-%E8%BF%9B%E7%A8%8B%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E7%8A%B6%E6%80%81/" class="">2.1.4 进程有哪几种状态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.5-%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5/" class="">2.1.5 进程调度策略</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.6-%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/" class="">2.1.6 僵尸进程和孤儿进程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.7-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/" class="">2.1.7 线程同步</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.8-%E5%8D%8F%E7%A8%8B/" class="">2.1.8 协程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.9-%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/" class="">2.1.9 异常控制流</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.10-IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" class="">2.1.10 Io多路复用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.11-%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81/" class="">2.1.11 用户态和内核态</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.2-%E6%AD%BB%E9%94%81/" class="">2.2 死锁</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b2b1a78994c9898abed1b08fef134abd" class="toggle"  />
    <label for="section-b2b1a78994c9898abed1b08fef134abd" class="flex justify-between">
      <a role="button" class="">2.3 内存管理</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.1-%E5%88%86%E9%A1%B5%E5%92%8C%E5%88%86%E6%AE%B5/" class="">2.3.1 分页和分段</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/" class="">2.3.2 虚拟内存</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.3-%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95/" class="">2.3.3 页面置换算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.4-%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86/" class="">2.3.4 局部性原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.5-%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/" class="">2.3.5 缓冲区溢出</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.4-%E7%A3%81%E7%9B%98%E8%B0%83%E5%BA%A6/" class="">2.4 磁盘调度</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e28cc33fe5745d14abf4a0147d0624a5" class="toggle" checked />
    <label for="section-e28cc33fe5745d14abf4a0147d0624a5" class="flex justify-between">
      <a role="button" class="">第三章 数据库</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6fd3cab540793410b1ce567d790deadc" class="toggle" checked />
    <label for="section-6fd3cab540793410b1ce567d790deadc" class="flex justify-between">
      <a role="button" class="">1、数据库基础</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.1-%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E7%89%B9%E6%80%A7/" class="">1.1 事务的概念和特性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.2-%E9%94%81/" class=" active">1.2 锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.3-%E9%94%81%E5%8D%8F%E8%AE%AE/" class="">1.3 锁协议</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.4-%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97/" class="">1.4 事务日志</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.5-MVCC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">1.5 Mvcc实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-12290256fbd76ac6014c39648c5827fe" class="toggle"  />
    <label for="section-12290256fbd76ac6014c39648c5827fe" class="flex justify-between">
      <a role="button" class="">1.6 基础知识</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.1-%E4%B8%89%E8%8C%83%E5%BC%8F/" class="">1.6.1 三范式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.2-%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F/" class="">1.6.2 多表连接方式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.3-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/" class="">1.6.3 存储过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.4-DELETETRUNCATE%E5%92%8CDROP%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.6.4 Delete、 Truncate和 Drop的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.5-%E8%A7%A6%E5%8F%91%E5%99%A8/" class="">1.6.5 触发器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.6-%E8%A7%86%E5%9B%BE/" class="">1.6.6 视图</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d1b14978df09adfe15777e58b9b435ec" class="toggle"  />
    <label for="section-d1b14978df09adfe15777e58b9b435ec" class="flex justify-between">
      <a role="button" class="">2、 My SQL</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.1-%E7%B4%A2%E5%BC%95/" class="">2.1 索引</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.2-B-%E6%A0%91B&#43;%E6%A0%91%E7%B4%A2%E5%BC%95%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86/" class="">2.2 B 树、 B 树索引算法原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.3-%E7%B4%A2%E5%BC%95%E7%BB%84%E7%BB%87%E8%A1%A8/" class="">2.3 索引组织表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.4-InnoDB%E5%92%8CMyISAM%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">2.4 Inno Db和 My Isam的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.5-Checkpoint%E6%8A%80%E6%9C%AF/" class="">2.5 Checkpoint技术</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.6-%E5%AE%95%E6%9C%BA%E6%81%A2%E5%A4%8D%E5%8E%9F%E7%90%86/" class="">2.6 宕机恢复原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.7-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/" class="">2.7 数据库优化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.8-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" class="">2.8 分库分表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.9-%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/" class="">2.9 一致性哈希算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.10-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" class="">2.10 主从复制</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-53f351d3e26dfa58c34e937b76a0c4ce" class="toggle"  />
    <label for="section-53f351d3e26dfa58c34e937b76a0c4ce" class="flex justify-between">
      <a role="button" class="">3、 Redis</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-356f36d039b40fdb10be19d36f2f2793" class="toggle"  />
    <label for="section-356f36d039b40fdb10be19d36f2f2793" class="flex justify-between">
      <a role="button" class="">3.1 概述</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.1-Redis%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E4%B9%88%E5%BF%AB/" class="">3.1.1 Redis为什么这么快</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.2-Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="">3.1.2 Redis数据类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.3-%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6/" class="">3.1.3 持久化机制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.4-%E8%BF%87%E6%9C%9F%E6%9C%BA%E5%88%B6%E5%92%8C%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5/" class="">3.1.4 过期机制和内存淘汰策略</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.2-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/" class="">3.2 线程模型</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4731e97839509d5614da88af39acf326" class="toggle"  />
    <label for="section-4731e97839509d5614da88af39acf326" class="flex justify-between">
      <a role="button" class="">3.3 分布式问题</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.3-%E5%88%86%E5%B8%83%E5%BC%8F%E9%97%AE%E9%A2%98/3.3.1-Redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" class="">3.3.1 Redis实现分布式锁</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-555105a060edfd5dfac44ac6d49d31e5" class="toggle"  />
    <label for="section-555105a060edfd5dfac44ac6d49d31e5" class="flex justify-between">
      <a role="button" class="">3.4 缓存异常</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.4-%E7%BC%93%E5%AD%98%E5%BC%82%E5%B8%B8/3.4.1-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/" class="">3.4.1 缓存穿透、缓存击穿、缓存雪崩</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f0d841e400bf38796a65a65ef72b420e" class="toggle"  />
    <label for="section-f0d841e400bf38796a65a65ef72b420e" class="flex justify-between">
      <a role="button" class="">第四章 设计模式</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/1%E6%A6%82%E8%BF%B0/" class="">1、概述</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e796a2fc1bf6b4e9454f5a191dd15040" class="toggle"  />
    <label for="section-e796a2fc1bf6b4e9454f5a191dd15040" class="flex justify-between">
      <a role="button" class="">2、创建型模式</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/2%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/2.1-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="">2.1 单例模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/2%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/2.2-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" class="">2.2 工厂模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/2%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/2.3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" class="">2.3 代理模式</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-eca69da21de5b0cd25d8421dec09a327" class="toggle"  />
    <label for="section-eca69da21de5b0cd25d8421dec09a327" class="flex justify-between">
      <a role="button" class="">第五章 Java</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a64d861c08691e8f06f1178d4d28cf04" class="toggle"  />
    <label for="section-a64d861c08691e8f06f1178d4d28cf04" class="flex justify-between">
      <a role="button" class="">1、 Java基础</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.1-StringStringBuffer%E5%92%8CStringBuilder%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.1 String、 String Buffer和 String Builder的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.2-HashMap%E5%92%8CConcurrentHashMap%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">1.2 Hash Map和 Concurrent Hash Map实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.3-ArrayList%E5%92%8CLinkedList%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">1.3 Array List和 Linked List实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.4-%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D/" class="">1.4 深拷贝与浅拷贝</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-21d6c85d1bc3cd657a462ac4b09f9d02" class="toggle"  />
    <label for="section-21d6c85d1bc3cd657a462ac4b09f9d02" class="flex justify-between">
      <a role="button" class="">2、 Java多线程</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.1-Runnable%E5%92%8C-Thread%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">2.1 Runnable和 Thread的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.2-Thread%E7%B1%BB%E4%B8%AD%E7%9A%84start%E5%92%8Crun%E6%96%B9%E6%B3%95%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/" class="">2.2 Thread类中的start()和run()方法有什么区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.3-Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%AD%E8%B0%83%E7%94%A8wait%E5%92%8Csleep%E6%96%B9%E6%B3%95%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C/" class="">2.3 Java多线程中调用wait()和sleep()方法有什么不同</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.4-ReentrantLock%E5%92%8CSynchronized%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">2.4 Reentrant Lock和 Synchronized的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.5-volatile%E9%80%82%E7%94%A8%E4%BA%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E7%9A%84%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF/" class="">2.5 Volatile适用于高并发的什么场景</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.6-%E5%A4%9A%E7%BA%BF%E7%A8%8Bjoin%E6%96%B9%E6%B3%95%E7%94%A8%E4%BA%8E%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF/" class="">2.6 多线程join方法用于什么场景</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.7-%E5%A4%9A%E4%B8%AA%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%A6%82%E4%BD%95%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE/" class="">2.7 多个线程间如何共享数据</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.8-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E6%9C%89%E5%93%AA%E4%BA%9B%E5%90%84%E8%87%AA%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%98%AF%E4%BB%80%E4%B9%88/" class="">2.8 线程的状态有哪些，各自的使用场景是什么</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.9-Java%E8%87%AA%E5%B8%A6%E5%93%AA%E5%87%A0%E7%A7%8D%E7%BA%BF%E7%A8%8B%E6%B1%A0/" class="">2.9 Java自带哪几种线程池</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.10-Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" class="">2.10 Java内存模型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.11-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/" class="">2.11 并发编程的三大特性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.12-%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92/" class="">2.12 指令重排</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.13-Volatile%E5%8E%9F%E7%90%86/" class="">2.13 Volatile原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.14-CAS%E5%8E%9F%E7%90%86/" class="">2.14 Cas原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.15-Java%E7%9A%844%E7%A7%8D%E5%BC%95%E7%94%A8%E7%BA%A7%E5%88%AB/" class="">2.15 Java的4种引用级别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.16-Java%E4%B8%AD%E7%9A%84%E9%94%81/" class="">2.16 Java中的锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.17-Synchronized%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">2.17 Synchronized实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.18-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">2.18 线程池实现原理</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-65e183c484720f91ba3d1676e1ed5a16" class="toggle"  />
    <label for="section-65e183c484720f91ba3d1676e1ed5a16" class="flex justify-between">
      <a role="button" class="">3、JVM</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.1-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/" class="">3.1 运行时数据区域</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.2-%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E5%AD%98%E6%B4%BB%E7%9A%84%E6%96%B9%E6%B3%95/" class="">3.2 判断对象是否存活的方法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.3-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95/" class="">3.3 垃圾收集算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.4-%E7%B1%BB%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%92%8C%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/" class="">3.4 类的生命周期和加载过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.5-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%97%B6%E6%9C%BA/" class="">3.5 类加载时机</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.6-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E7%A7%8D%E7%B1%BB/" class="">3.6 类加载器的种类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.7-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E7%9A%84%E7%89%B9%E7%82%B9/" class="">3.7 类加载机制的特点</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.8-JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/" class="">3.8 Jvm内存结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.9-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B/" class="">3.9 常见的垃圾收集算法有哪些</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.10-%E6%8C%87%E9%92%88%E7%A2%B0%E6%92%9E%E5%92%8C%E7%A9%BA%E9%97%B2%E5%88%97%E8%A1%A8/" class="">3.10 指针碰撞和空闲列表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.11-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B/" class="">3.11 常见的垃圾收集器有哪些</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.12-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">3.12 内存溢出与内存泄漏的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.13-%E5%B8%B8%E7%94%A8%E7%9A%84JVM%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E6%9C%89%E5%93%AA%E4%BA%9B/" class="">3.13 常用的 Jvm启动参数有哪些</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.14-%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/" class="">3.14 反射机制</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0dcecbd4b31fcc19e26278b6dbaa0d33" class="toggle"  />
    <label for="section-0dcecbd4b31fcc19e26278b6dbaa0d33" class="flex justify-between">
      <a role="button" class="">第六章 Spring全家桶</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/spring-family/1Spring/1.1-%E6%A6%82%E8%BF%B0/" class="">1.1 概述</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/spring-family/1Spring/1.2-Spring-IOC/" class="">1.2 Spring Ioc</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/spring-family/1Spring/1.3-Spring-AOP/" class="">1.3 Spring Aop</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/school-recruitment/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>1.2 锁</strong>

  <label for="toc-control">
    
    <img src="/school-recruitment/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#锁">锁</a>
      <ul>
        <li><a href="#1-表锁和行锁">1 表锁和行锁</a>
          <ul>
            <li><a href="#11-表锁">1.1 表锁</a>
              <ul>
                <li><a href="#111-含义">1.1.1 含义</a></li>
                <li><a href="#112-如何加表锁">1.1.2 如何加表锁</a></li>
                <li><a href="#113-优缺点">1.1.3 优缺点</a>
                  <ul>
                    <li><a href="#1131-优点">1.1.3.1 优点</a></li>
                    <li><a href="#1132-缺点">1.1.3.2 缺点</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#12-行锁">1.2 行锁</a>
              <ul>
                <li><a href="#121-含义">1.2.1 含义</a></li>
                <li><a href="#122-加锁原理">1.2.2 加锁原理</a>
                  <ul>
                    <li><a href="#1221-单行数据的加锁原理">1.2.2.1 单行数据的加锁原理</a></li>
                  </ul>
                </li>
                <li><a href="#123-优缺点">1.2.3 优缺点</a>
                  <ul>
                    <li><a href="#1231-优点">1.2.3.1 优点</a></li>
                    <li><a href="#1232-缺点">1.2.3.2 缺点</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#2-共享锁和排他锁">2 共享锁和排他锁</a>
          <ul>
            <li><a href="#21-共享锁">2.1 共享锁</a>
              <ul>
                <li><a href="#211-含义">2.1.1 含义</a></li>
                <li><a href="#212-用法">2.1.2 用法</a></li>
              </ul>
            </li>
            <li><a href="#22-排他锁">2.2 排他锁</a>
              <ul>
                <li><a href="#221-含义">2.2.1 含义</a></li>
                <li><a href="#222-用法">2.2.2 用法</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#3-乐观锁和悲观锁">3 乐观锁和悲观锁</a>
          <ul>
            <li><a href="#31-悲观锁">3.1 悲观锁</a>
              <ul>
                <li><a href="#311-含义">3.1.1 含义</a></li>
                <li><a href="#312-实现方式">3.1.2 实现方式</a></li>
                <li><a href="#313-优缺点">3.1.3 优缺点</a>
                  <ul>
                    <li><a href="#3131-优点">3.1.3.1 优点</a></li>
                    <li><a href="#3132-缺点">3.1.3.2 缺点</a></li>
                  </ul>
                </li>
                <li><a href="#314-示例">3.1.4 示例</a></li>
              </ul>
            </li>
            <li><a href="#32-乐观锁">3.2 乐观锁</a>
              <ul>
                <li><a href="#321-含义">3.2.1 含义</a></li>
                <li><a href="#322-优缺点">3.2.2 优缺点</a>
                  <ul>
                    <li><a href="#3221-优点">3.2.2.1 优点</a></li>
                    <li><a href="#3222-缺点">3.2.2.2 缺点</a></li>
                  </ul>
                </li>
                <li><a href="#323-示例">3.2.3 示例</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#4-意向锁">4 意向锁</a>
          <ul>
            <li><a href="#41-为什么要引入意向锁">4.1 为什么要引入意向锁</a></li>
            <li><a href="#42-特点">4.2 特点</a></li>
            <li><a href="#43-意向锁的兼容互斥性">4.3 意向锁的兼容互斥性</a></li>
            <li><a href="#44-示例">4.4 示例</a></li>
          </ul>
        </li>
        <li><a href="#5-行级锁">5 行级锁</a>
          <ul>
            <li><a href="#51-记录锁">5.1 记录锁</a></li>
            <li><a href="#52-间隙锁">5.2 间隙锁</a>
              <ul>
                <li><a href="#521-含义">5.2.1 含义</a></li>
                <li><a href="#522-如何禁止间隙锁">5.2.2 如何禁止间隙锁</a></li>
                <li><a href="#523-间隙锁定的区域">5.2.3 间隙锁定的区域</a></li>
                <li><a href="#524-间隙锁的分类">5.2.4 间隙锁的分类</a>
                  <ul>
                    <li><a href="#5241-唯一索引的间隙锁">5.2.4.1 唯一索引的间隙锁</a>
                      <ul>
                        <li><a href="#52411-总结">5.2.4.1.1 总结</a></li>
                        <li><a href="#52412-示例">5.2.4.1.2 示例</a></li>
                      </ul>
                    </li>
                    <li><a href="#5242-普通索引的间隙锁">5.2.4.2 普通索引的间隙锁</a>
                      <ul>
                        <li><a href="#52421-总结">5.2.4.2.1 总结</a></li>
                        <li><a href="#52422-示例">5.2.4.2.2 示例</a></li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#53-临键锁">5.3 临键锁</a></li>
          </ul>
        </li>
        <li><a href="#参考文献">参考文献</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="锁">
  锁
  <a class="anchor" href="#%e9%94%81">#</a>
</h1>
<p>首先，对 MySQL 锁进行划分：</p>
<ol>
<li>按照锁的<strong>粒度</strong>划分：<strong>表锁</strong>（Table Level Lock）<strong>、行锁</strong>（Row Level Lock）。</li>
<li>按照锁的<strong>使用方式</strong>划分：<strong>共享锁</strong>（Share Lock）<strong>、排他锁</strong>（悲观锁的一种实现）（eXclusive Lock）。</li>
<li>按照锁的<strong>思想</strong>划分：<strong>悲观锁</strong>（Pessimistic Concurrency Control, PCC）<strong>、乐观锁</strong>（Optimistic Concurrency Control, PCC）。</li>
<li><strong>InnoDB</strong>的几种<strong>意向锁</strong>：<strong>意向共享锁</strong>（Intensive Shared Lock, IS）、<strong>意向排他锁</strong>（Intensive Exclusive Lock）。</li>
<li><strong>InnoDB</strong>的几种<strong>行级锁</strong>：<strong>记录锁</strong>（Recoord Lock）、<strong>间隙锁</strong>（Gap Lock）、<strong>临键锁</strong>（Next-key Lock）。</li>
</ol>
<h2 id="1-表锁和行锁">
  1 表锁和行锁
  <a class="anchor" href="#1-%e8%a1%a8%e9%94%81%e5%92%8c%e8%a1%8c%e9%94%81">#</a>
</h2>
<h3 id="11-表锁">
  1.1 表锁
  <a class="anchor" href="#11-%e8%a1%a8%e9%94%81">#</a>
</h3>
<h4 id="111-含义">
  1.1.1 含义
  <a class="anchor" href="#111-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>表级锁是 MySQL 中粒度最大的一种锁，表示当前的操作<strong>对整张表加锁</strong>。</li>
<li>表锁响应的是<strong>非索引字段</strong>，即<strong>全表扫描</strong>，全表扫描时<strong>锁定整张表</strong>。</li>
<li>表级锁有两种模式：<strong>表共享锁</strong>（Table Read Lock）<strong>、表独占写锁</strong>（Table Write Lock）<strong>：</strong>
<ol>
<li><strong>表共享锁：</strong> 不会阻塞其他用户对同一张表的读请求，但会<strong>阻塞对同一张表的写请求</strong>。</li>
<li><strong>表独占写锁：<strong>会</strong>阻塞</strong>其他用户<strong>对同一张表的读写请求</strong>，当一个线程获得对一个表的写锁之后，只有持有锁的线程可以对表进行更新操作，其他线程的读、写操作都会等待，直到锁被释放为止。</li>
</ol>
</li>
</ol>
<h4 id="112-如何加表锁">
  1.1.2 如何加表锁
  <a class="anchor" href="#112-%e5%a6%82%e4%bd%95%e5%8a%a0%e8%a1%a8%e9%94%81">#</a>
</h4>
<ol>
<li>
<p>给表显示加锁，一般是为了一定程度模拟事务操作，实现对<strong>某一时间点多个表的一致性读取</strong>。</p>
</li>
<li>
<p>例如，有一个订单表 <code>orders</code>，其中记录有订单的总金额 <code>total</code>，同时还有一个订单明细表 <code>order_detail</code>，其中记录有订单每一产品的金额小计 <code>subtotal</code>，假设我们需要检查这两个表的金额合计是否相等，可能就需要执行如下两条 SQL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">sum</span>(total) <span style="color:#66d9ef">from</span> orders;
<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">sum</span>(subtotal) <span style="color:#66d9ef">from</span> order_detail;
</code></pre></div></li>
<li>
<p>这时，如果不给这两个表加锁，就可能产生错误的结果，因为第一条语句在执行的过程中，<code>order_detail</code> 表可能已经发生了改变，因此，正确的方法应该是：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">lock</span> tables <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">read</span> <span style="color:#66d9ef">local</span>, order_detail <span style="color:#66d9ef">read</span> <span style="color:#66d9ef">local</span>;
<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">sum</span>(total) <span style="color:#66d9ef">from</span> orders;
<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">sum</span>(subtotal) <span style="color:#66d9ef">from</span> order_detail;
unlock tables;
</code></pre></div></li>
<li>
<p>针对上面的叙述，有以下需要说明的地方：</p>
<ol>
<li>上面的例子在<code>lock tables</code> 时加了<code>local</code> 选项，其作用就是在满足表并发插入的条件下，允许其他用户在表尾插入记录（InnoDB 中<code>read local</code> 和<code>read</code> 等价）。</li>
<li>在用<code>lock tables</code> 给表显式加表锁时，必须<strong>同时取得所有涉及表的锁</strong>，也就是说，再执行<code>lock tables</code> 后，<strong>只能访问显式加锁的这些表，不能访问未加锁的表</strong>，这也正是<strong>表锁不会出现死锁</strong>的原因。同时，如果加的是读锁，那么只能执行查询操作，而不能执行更新操作。</li>
</ol>
</li>
</ol>
<h4 id="113-优缺点">
  1.1.3 优缺点
  <a class="anchor" href="#113-%e4%bc%98%e7%bc%ba%e7%82%b9">#</a>
</h4>
<h5 id="1131-优点">
  1.1.3.1 优点
  <a class="anchor" href="#1131-%e4%bc%98%e7%82%b9">#</a>
</h5>
<ol>
<li><strong>开销小，加锁快</strong>。</li>
<li><strong>不会出现死锁</strong>。</li>
</ol>
<h5 id="1132-缺点">
  1.1.3.2 缺点
  <a class="anchor" href="#1132-%e7%bc%ba%e7%82%b9">#</a>
</h5>
<ol>
<li><strong>锁定力度大</strong>，发生<strong>冲突的概率最高</strong>，<strong>并发度最低</strong>。</li>
</ol>
<h3 id="12-行锁">
  1.2 行锁
  <a class="anchor" href="#12-%e8%a1%8c%e9%94%81">#</a>
</h3>
<h4 id="121-含义">
  1.2.1 含义
  <a class="anchor" href="#121-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>读取操作行级锁是 MySQL 中锁定粒度最细的一种锁，表示只<strong>对当前操作的行进行加锁</strong>。</li>
<li>MySQL 的<strong>行锁是基于索引加载的</strong>，所以<strong>行锁是要加在索引响应的行上</strong>，即<strong>命中索引</strong>。</li>
<li>行级锁按照使用方式分为<strong>共享锁</strong>（Share Lock）和<strong>排他锁</strong>（sXclusive Lock），具体可参照
  <a href="/school-recruitment/">共享锁和排他锁</a>。</li>
</ol>
<h4 id="122-加锁原理">
  1.2.2 加锁原理
  <a class="anchor" href="#122-%e5%8a%a0%e9%94%81%e5%8e%9f%e7%90%86">#</a>
</h4>
<h5 id="1221-单行数据的加锁原理">
  1.2.2.1 单行数据的加锁原理
  <a class="anchor" href="#1221-%e5%8d%95%e8%a1%8c%e6%95%b0%e6%8d%ae%e7%9a%84%e5%8a%a0%e9%94%81%e5%8e%9f%e7%90%86">#</a>
</h5>
<ol>
<li>
<p>假如有如下两条 SQL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">update</span> <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">set</span> age <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span> <span style="color:#66d9ef">where</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">49</span>;
<span style="color:#66d9ef">update</span> <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">set</span> age <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span> <span style="color:#66d9ef">where</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Tom&#39;</span>;
</code></pre></div></li>
<li>
<p>第一条 SQL<strong>使用主键索引来查询</strong>，则只<strong>需要在</strong> <code>id=49</code> 这个<strong>主键索引上加上写锁</strong>。</p>
</li>
<li>
<p>第二条 SQL 则<strong>使用辅助索引来查询</strong>，首先<strong>在 <code>name=Tom</code> 这个索引上加写锁</strong>，然后<strong>由于使用</strong>InnoDB 的<strong>辅助索引</strong>，还<strong>需要根据主键索引进行查询</strong>，所以还<strong>需要在 <code>id=49</code> 这个主键索引上加写锁</strong>。</p>
</li>
<li>
<p>也就是说<strong>主键索引需要加一把锁</strong>，使用<strong>辅助索引需要在辅助索引和主键索引上各加一把锁</strong>。</p>
</li>
</ol>
<h4 id="123-优缺点">
  1.2.3 优缺点
  <a class="anchor" href="#123-%e4%bc%98%e7%bc%ba%e7%82%b9">#</a>
</h4>
<h5 id="1231-优点">
  1.2.3.1 优点
  <a class="anchor" href="#1231-%e4%bc%98%e7%82%b9">#</a>
</h5>
<ol>
<li>能<strong>大大减少数据库操作的冲突</strong>。</li>
</ol>
<h5 id="1232-缺点">
  1.2.3.2 缺点
  <a class="anchor" href="#1232-%e7%bc%ba%e7%82%b9">#</a>
</h5>
<ol>
<li><strong>加锁粒度最小</strong>，但是<strong>加锁的开销也最大</strong>，<strong>有可能出现死锁的情况</strong>。</li>
</ol>
<h2 id="2-共享锁和排他锁">
  2 共享锁和排他锁
  <a class="anchor" href="#2-%e5%85%b1%e4%ba%ab%e9%94%81%e5%92%8c%e6%8e%92%e4%bb%96%e9%94%81">#</a>
</h2>
<h3 id="21-共享锁">
  2.1 共享锁
  <a class="anchor" href="#21-%e5%85%b1%e4%ba%ab%e9%94%81">#</a>
</h3>
<h4 id="211-含义">
  2.1.1 含义
  <a class="anchor" href="#211-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>共享锁又称<strong>读锁</strong>，是<strong>读取操作创建的锁</strong>。</li>
<li><strong>其他用户可以并发读取数据</strong>，<strong>但任何事务都不能对数据进行修改</strong>，<strong>直到已释放所有共享锁</strong>。</li>
<li>如果<strong>事务 T 对数据 A 加上共享锁后</strong>，则<strong>其他事务只能对 A 再加共享锁</strong>，<strong>不能加排他锁</strong>。</li>
<li><strong>获取共享锁的事务只能读数据</strong>，<strong>不能修改数据</strong>。</li>
</ol>
<h4 id="212-用法">
  2.1.2 用法
  <a class="anchor" href="#212-%e7%94%a8%e6%b3%95">#</a>
</h4>
<ol>
<li>可以通过<strong>在查询语句后面加上 <code>LOCK IN SHARE MODE</code> 来使用共享锁</strong>。</li>
<li>此时 MySQL 会<strong>对查询结果中的每行都加共享锁</strong>，<strong>当没有其他线程对查询结果集中的任何一行使用排他锁时</strong>，<strong>可以成功申请共享锁</strong>，<strong>否则会被阻塞</strong>。</li>
<li><strong>其他线程也可以读取使用了共享锁的表</strong>，而且<strong>这些线程读取的是同一个版本的数据</strong>。</li>
</ol>
<h3 id="22-排他锁">
  2.2 排他锁
  <a class="anchor" href="#22-%e6%8e%92%e4%bb%96%e9%94%81">#</a>
</h3>
<h4 id="221-含义">
  2.2.1 含义
  <a class="anchor" href="#221-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>排他锁又称<strong>写锁</strong>。</li>
<li>如果<strong>事务 T 对数据 A 加上排他锁后</strong>，则<strong>其他事务不能再对 A 加任何类型的锁</strong>。</li>
<li><strong>获取排他锁的事务既能读数据</strong>，<strong>又能修改数据</strong>。</li>
</ol>
<h4 id="222-用法">
  2.2.2 用法
  <a class="anchor" href="#222-%e7%94%a8%e6%b3%95">#</a>
</h4>
<ol>
<li>可以通过<strong>在查询语句后面添加 <code>FOR UPDATE</code> 来使用排他锁</strong>，此时 MySQL 会<strong>对查询结果中的每行都加排他锁</strong>，<strong>当没有其他线程对查询结果集中的任何一行使用排他锁时</strong>，<strong>可以成功申请排他锁</strong>，<strong>否则会被阻塞</strong>。</li>
</ol>
<h2 id="3-乐观锁和悲观锁">
  3 乐观锁和悲观锁
  <a class="anchor" href="#3-%e4%b9%90%e8%a7%82%e9%94%81%e5%92%8c%e6%82%b2%e8%a7%82%e9%94%81">#</a>
</h2>
<h3 id="31-悲观锁">
  3.1 悲观锁
  <a class="anchor" href="#31-%e6%82%b2%e8%a7%82%e9%94%81">#</a>
</h3>
<h4 id="311-含义">
  3.1.1 含义
  <a class="anchor" href="#311-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>悲观锁指的是<strong>对数据被外界</strong>（包括本系统当前的其它事务，以及来自外部系统的事务处理）<strong>修改持保守态度</strong>，<strong>认为数据随时可能会修改</strong>，因此，<strong>每次去取数据的时候都会给他上锁</strong>，<strong>防止其他事务读取或修改数据</strong>。</li>
<li><strong>悲观锁的实现，往往依靠数据库提供的锁机制</strong>（也<strong>只有数据库底层提供的锁机制才能真正保证数据访问的排他性</strong>，<strong>否则</strong>，<strong>即使在本系统中实现了加锁机制</strong>，<strong>也无法保证外部系统不会修改数据</strong>）。</li>
</ol>
<h4 id="312-实现方式">
  3.1.2 实现方式
  <a class="anchor" href="#312-%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f">#</a>
</h4>
<ol>
<li>在<strong>对任意记录修改前</strong>，先<strong>尝试为该记录加上排他锁</strong>。</li>
<li>如果<strong>加锁失败</strong>，说明<strong>该记录正在被修改</strong>，那么<strong>当前查询可能要等待或者抛出异常</strong>，具体的响应方式由开发者根据实际需要决定。</li>
<li>如果<strong>成功加锁</strong>，那么就可以<strong>对记录作修改</strong>，<strong>事务成功后就可以解锁了</strong>。</li>
<li>期间如果<strong>有其它对该记录做修改或加排他锁的操作</strong>，都<strong>会等待我们解锁或者抛出异常</strong>。</li>
</ol>
<h4 id="313-优缺点">
  3.1.3 优缺点
  <a class="anchor" href="#313-%e4%bc%98%e7%bc%ba%e7%82%b9">#</a>
</h4>
<h5 id="3131-优点">
  3.1.3.1 优点
  <a class="anchor" href="#3131-%e4%bc%98%e7%82%b9">#</a>
</h5>
<ol>
<li>悲观锁采取的是保守策略，<strong>先加锁，成功了才访问数据</strong>，这保证了<strong>数据获取和修改都是有序进行的</strong>，因此适合在<strong>写多读少</strong>的环境中使用，可以<strong>有效地保证数据的安全性</strong>。</li>
</ol>
<h5 id="3132-缺点">
  3.1.3.2 缺点
  <a class="anchor" href="#3132-%e7%bc%ba%e7%82%b9">#</a>
</h5>
<ol>
<li>由于需要加锁，可能会面临<strong>锁冲突</strong>甚至<strong>死锁</strong>的问题。</li>
<li>加锁和释放锁会<strong>增加系统的额外开销</strong>，<strong>降低系统的效率</strong>，同时也会<strong>降低系统的并行性</strong>。</li>
</ol>
<h4 id="314-示例">
  3.1.4 示例
  <a class="anchor" href="#314-%e7%a4%ba%e4%be%8b">#</a>
</h4>
<blockquote>
<ol>
<li>下面是以 MySQL 的 InnoDB 引擎为例。</li>
<li>要使用悲观锁，我们必须关闭 MySQL 数据库的自动提交属性，因为 MySQL 默认使用<code>autocommit</code> 模式，也就是说，当我们执行一个更新操作后，MySQL 会立即将结果进行提交，可以使用下面的命令设置 MySQL 为非<code>autocommit</code> 模式。
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">set</span> autocommit <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</code></pre></div></li>
</ol>
</blockquote>
<p>商品 <code>goods</code> 表中有一个字段 <code>status</code>，<code>status</code> 为 1 代表商品未被下单，<code>status</code> 为 2 代表商品已被下单，那么对某个商品下单时必须确保该商品 <code>status</code> 为 1，假设该商品的 <code>id</code> 为 1。</p>
<p>
  <img src="../../../media/202105/2021-05-26_163941.png" alt="" /></p>
<ol>
<li><strong>不使用锁时：</strong>
<ol>
<li>第一步操作中，查询出来的商品<code>status</code> 为 1，但是当我们执行第三步<code>update</code> 操作的时候，在高并发情况下有可能出现其他人先一步对商品下单，把<code>goods</code> 中<code>id</code> 为 1 的<code>status</code> 修改为 2 了，但是我们并不知道数据已经被修改了，这样就可能造成同一个商品被下单 2 次。</li>
</ol>
</li>
<li><strong>使用悲观锁时：</strong>
<ol>
<li>与普通查询不一样，这里使用了<code>select ... for update</code> 的方式，这样就<strong>通过数据库实现了悲观锁</strong>。</li>
<li>此时在<code>goods</code> 表中，<code>id</code><strong>为 1 的那条数据就被锁定了</strong>，直到我们<strong>修改完毕后再解锁</strong>，在这个过程中，因为<code>goods</code> 被锁定了，就<strong>不会出现有第三者来对其进行修改</strong>了。</li>
<li>此时如果有其他的事务针对这条数据进行<code>select ... for update</code>，那么这个事务就会处于阻塞状态，等待第一个事务的提交，只有当第一个事务提交数据之后，第二个事务才能正常执行。</li>
<li>但是在这个过程中，<strong>正常的 <code>select</code> 是不会受影响的</strong>。</li>
<li>执行<code>select ... for update</code> 时，锁有三种级别，分别是<strong>无锁、行级锁、表级锁</strong>：
<ol>
<li><strong>无锁： 明确指定主键/索引</strong>，但<strong>查无数据</strong>。</li>
<li><strong>行级锁： 明确指定主键/索引</strong>，并且<strong>有此数据</strong>。</li>
<li><strong>表级锁：</strong>
<ol>
<li><strong>未指定主键/索引</strong>。</li>
<li><strong>主键/索引不明确</strong>。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>
  <img src="../../../media/202105/3_1622021457.png" alt="" /></p>
<h3 id="32-乐观锁">
  3.2 乐观锁
  <a class="anchor" href="#32-%e4%b9%90%e8%a7%82%e9%94%81">#</a>
</h3>
<h4 id="321-含义">
  3.2.1 含义
  <a class="anchor" href="#321-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>相对悲观锁而言，乐观锁假设认为<strong>数据一般情况下不会造成冲突</strong>，所以在<strong>数据进行提交更新</strong>的时候，才会正式<strong>对数据的冲突与否进行检测</strong>，如果发现冲突了，则返回错误的信息，让用户决定如何去做。</li>
<li>相对于悲观锁，在对数据库进行处理的时候，乐观锁并不会使用数据库提供的锁机制，一般的实现方式是<strong>记录数据的版本</strong>。</li>
</ol>
<blockquote>
<p>数据版本是什么？</p>
<ol>
<li>数据版本就是为数据增加的一个<strong>版本标识</strong>。</li>
<li>当<strong>读取数据</strong>的时候，将<strong>版本标识的值一同读出</strong>，数据<strong>每更新一次</strong>，同时<strong>对版本标识进行更新</strong>。</li>
<li>当我们提交更新的时候，判断数据库表对应记录的<strong>当前版本信息</strong>与<strong>第一次取出来的版本标识进行比对</strong>，如果数据库表当前版本号与第一次取出来的<strong>版本标识值相等</strong>，则<strong>予以更新</strong>，<strong>否则认为是过期数据</strong>。</li>
</ol>
</blockquote>
<h4 id="322-优缺点">
  3.2.2 优缺点
  <a class="anchor" href="#322-%e4%bc%98%e7%bc%ba%e7%82%b9">#</a>
</h4>
<h5 id="3221-优点">
  3.2.2.1 优点
  <a class="anchor" href="#3221-%e4%bc%98%e7%82%b9">#</a>
</h5>
<ol>
<li>乐观并发控制相信事务之间的数据竞争的概率是比较小的，因此尽可能直接做下去，直到提交的时候才去锁定，所以<strong>不会产生任何锁和死锁</strong>。</li>
<li>乐观并发控制实际上<strong>没有加锁</strong>，所以<strong>没有额外开销</strong>，<strong>适合读多写少的场景</strong>，能<strong>极大提高数据库的性能</strong>。</li>
</ol>
<h5 id="3222-缺点">
  3.2.2.2 缺点
  <a class="anchor" href="#3222-%e7%bc%ba%e7%82%b9">#</a>
</h5>
<ol>
<li>如果<strong>两个事务都读取了数据库的某一行</strong>，经过<strong>同时修改以后写回数据库</strong>，这时就遇到了问题，因为两个事务都会修改数据库的数据，这时<strong>数据就会发生错乱</strong>。</li>
</ol>
<h4 id="323-示例">
  3.2.3 示例
  <a class="anchor" href="#323-%e7%a4%ba%e4%be%8b">#</a>
</h4>
<ol>
<li>
<p><code>t_goods</code> 表中的数据如下：</p>
<p>
  <img src="../../../media/202106/2021-06-10_112419.png" alt="" /></p>
</li>
<li>
<p>首先用户 A 和用户 B 同时将臭豆腐（<code>id=2</code>）的数据查出来，此时二者读到的臭豆腐对应的 <code>id</code> 为 2， <code>num</code> 为 1， <code>version</code> 为 0：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t_goods <span style="color:#66d9ef">where</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;臭豆腐&#39;</span>;
</code></pre></div></li>
<li>
<p>然后用户 A 先买，将 <code>id=1</code> 和 <code>version=0</code> 作为条件进行更新（将臭豆腐的数量减 1，并且将版本加 1）:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">update</span> t_goods <span style="color:#66d9ef">set</span> num <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{</span>num<span style="color:#960050;background-color:#1e0010">}</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#66d9ef">version</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">version</span><span style="color:#960050;background-color:#1e0010">}</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">where</span> id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{</span>id<span style="color:#960050;background-color:#1e0010">}</span> <span style="color:#66d9ef">and</span> <span style="color:#66d9ef">version</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">version</span><span style="color:#960050;background-color:#1e0010">}</span>;
</code></pre></div></li>
<li>
<p>接着用户 B 开始购买，按照相同的条件进行更新。</p>
</li>
<li>
<p>B 更新完成后，发现更新的数据行数为 0，说明已经有人改动过数据，此时就应该提示用户 B 重新查看最新数据来进行购买。</p>
</li>
</ol>
<h2 id="4-意向锁">
  4 意向锁
  <a class="anchor" href="#4-%e6%84%8f%e5%90%91%e9%94%81">#</a>
</h2>
<h3 id="41-为什么要引入意向锁">
  4.1 为什么要引入意向锁
  <a class="anchor" href="#41-%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e5%bc%95%e5%85%a5%e6%84%8f%e5%90%91%e9%94%81">#</a>
</h3>
<ol>
<li>由于<strong>表锁和行锁虽然锁定范围不同</strong>，<strong>但是会相互冲突</strong>，所以，<strong>当我们要加表锁时</strong>，势必<strong>要先遍历该表的所有记录</strong>，<strong>判断是否加有排他锁</strong>。</li>
<li>这种遍历检查的方式显然是一种<strong>低效的方式</strong>，因此 MySQL<strong>引入了意向锁</strong>，来<strong>检测表锁和行锁的冲突</strong>。</li>
</ol>
<h3 id="42-特点">
  4.2 特点
  <a class="anchor" href="#42-%e7%89%b9%e7%82%b9">#</a>
</h3>
<ol>
<li><strong>意向锁是表级锁</strong>，可以分为<strong>意向共享锁</strong>（IS 锁）和<strong>意向排他锁</strong>（IX 锁）。</li>
<li>当<strong>事务要在记录上加共享锁或者排他锁</strong>时，要<strong>首先在表上加上意向锁</strong>，这样判断表中是否有记录加锁就很简单了，只要看一下<strong>表上是否有意向锁</strong>就行了。</li>
<li><strong>意向锁之间是不会产生冲突</strong>的，他<strong>只会阻塞表级共享锁或表级排他锁</strong>。</li>
<li>同时，<strong>意向锁也不会和行锁冲突</strong>，<strong>行锁只会和行锁冲突</strong>。</li>
<li>意向锁是<strong>InnoDB 自动加的</strong>，<strong>不需要用户干预</strong>。</li>
</ol>
<h3 id="43-意向锁的兼容互斥性">
  4.3 意向锁的兼容互斥性
  <a class="anchor" href="#43-%e6%84%8f%e5%90%91%e9%94%81%e7%9a%84%e5%85%bc%e5%ae%b9%e4%ba%92%e6%96%a5%e6%80%a7">#</a>
</h3>
<ol>
<li>意向锁之间是互相兼容的。</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>意向共享锁（IS）</th>
<th>意向排他锁（IX)</th>
</tr>
</thead>
<tbody>
<tr>
<td>意向共享锁（IS）</td>
<td>兼容</td>
<td>兼容</td>
</tr>
<tr>
<td>意向排他锁（IX)</td>
<td>兼容</td>
<td>兼容</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>意向锁会和表级共享锁/排他锁互斥。</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>意向共享锁（IS）</th>
<th>意向排他锁（IX）</th>
</tr>
</thead>
<tbody>
<tr>
<td>表级共享锁</td>
<td>兼容</td>
<td>互斥</td>
</tr>
<tr>
<td>表级排他锁</td>
<td>互斥</td>
<td>互斥</td>
</tr>
</tbody>
</table>
<h3 id="44-示例">
  4.4 示例
  <a class="anchor" href="#44-%e7%a4%ba%e4%be%8b">#</a>
</h3>
<ol>
<li>
<p>假设有一张 <code>users</code> 表，事务 A 获取了其中<strong>某一行的排他锁</strong>，尚<strong>未提交</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
</code></pre></div></li>
<li>
<p>此时 <code>users</code> 表存在两把锁，分别是 <code>users</code> 表上的<strong>意向排他锁</strong>和 <code>id</code> 为 6 的数据行上的<strong>排他锁</strong>。</p>
</li>
<li>
<p>事务 B 想要获取 <code>users</code><strong>表的共享锁</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">LOCK</span> TABLES users <span style="color:#66d9ef">READ</span>;
</code></pre></div></li>
<li>
<p>此时事务 B 检测<strong>事务 A 持有 <code>users</code> 表的意向排他锁</strong>，就可以得知<strong>事务 A 必然持有该表中某些数据行的排他锁</strong>，那么<strong>事务 B 对 <code>users</code> 表的加锁请求就会被排斥</strong>（阻塞），而<strong>无需去检测表中的每一行数据是否存在排他锁</strong>。</p>
</li>
<li>
<p>最后事务 C 也想获取 <code>users</code> 表中<strong>某一行的排他锁</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
</code></pre></div></li>
<li>
<p>此时事务 C 会<strong>申请 <code>users</code> 表的意向排他锁</strong>，虽然事务 C<strong>检测到了事务 A 持有 <code>users</code> 表的意向排他锁</strong>，但是因为<strong>意向锁之间不互斥</strong>，所以事务 C<strong>获取到了 <code>users</code> 表的意向排他锁</strong>，因为 <strong><code>id</code> 为 5 的数据行上不存在任何排他锁</strong>，最终事务 C<strong>成功获取到了该数据行的排他锁</strong>。</p>
</li>
</ol>
<h2 id="5-行级锁">
  5 行级锁
  <a class="anchor" href="#5-%e8%a1%8c%e7%ba%a7%e9%94%81">#</a>
</h2>
<h3 id="51-记录锁">
  5.1 记录锁
  <a class="anchor" href="#51-%e8%ae%b0%e5%bd%95%e9%94%81">#</a>
</h3>
<ol>
<li><strong>记录锁是最简单的行锁</strong>。</li>
<li>当SQL语句<strong>无法使用索引时</strong>，会进行<strong>全表扫描</strong>，这个时候MySQL会<strong>给整张表的所有数据行加记录锁</strong>，再右MySQL Server层进行过滤，如果发现<strong>不满足 <code>WHERE</code>条件</strong>，会<strong>释放对应记录的锁</strong>，这样做，保证了<strong>最后只会持有满足条件记录上的锁</strong>，但是<strong>每条记录的加锁操作还是不能省略的</strong>。</li>
<li>所以，<strong>更新操作必须要根据索引进行操作</strong>，没有索引时，不仅会消耗大量的锁资源，增加数据库的开销，还会极大的降低了数据库的并发性能。</li>
</ol>
<h3 id="52-间隙锁">
  5.2 间隙锁
  <a class="anchor" href="#52-%e9%97%b4%e9%9a%99%e9%94%81">#</a>
</h3>
<h4 id="521-含义">
  5.2.1 含义
  <a class="anchor" href="#521-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>当我们使用<strong>范围条件</strong>而不是相等条件<strong>检索数据</strong>，<strong>并请求共享或排他锁时</strong>，InnoDB会<strong>给符合条件的已有数据记录的索引项加锁</strong>。</li>
<li>对于<strong>键值在条件范围内但并不存在的记录</strong>，InnoDB也<strong>会对这个间隙加锁</strong>，这种锁机制就是所谓的<strong>间隙锁</strong>。</li>
<li>间隙锁是<strong>索引记录中的间隔</strong>，或者第一条索引记录之前的范围，又或者最后一条索引记录之后的范围。</li>
<li>间隙锁在InnoDB的唯一作用就是<strong>防止其他事务的插入操作</strong>，以此来达到<strong>防止幻读</strong>的发生。</li>
</ol>
<h4 id="522-如何禁止间隙锁">
  5.2.2 如何禁止间隙锁
  <a class="anchor" href="#522-%e5%a6%82%e4%bd%95%e7%a6%81%e6%ad%a2%e9%97%b4%e9%9a%99%e9%94%81">#</a>
</h4>
<ol>
<li>要禁止间隙锁，主要有两种方法：
<ol>
<li>
<p>把隔离级别降为<strong>读已提交</strong>。</p>
</li>
<li>
<p>开启参数 <code>innodb_locks_unsafe_for_binlog</code>，这个值默认值为 <code>OFF</code>，即启用间隙锁，因为此参数是只读模式，如果想要禁用间隙锁，需要修改 <code>my.cnf</code>（Windows是 <code>my.ini</code>），然后重新启动才行。</p>
<p>
  <img src="../../../media/202106/1_1624519033.png" alt="" /></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#75715e"># 在 my.cnf 里面的[mysqld]添加</span>
[<span style="color:#ae81ff">mysqld]</span>
<span style="color:#ae81ff">innodb_locks_unsafe_for_binlog = 1</span>
</code></pre></div></li>
</ol>
</li>
</ol>
<h4 id="523-间隙锁定的区域">
  5.2.3 间隙锁定的区域
  <a class="anchor" href="#523-%e9%97%b4%e9%9a%99%e9%94%81%e5%ae%9a%e7%9a%84%e5%8c%ba%e5%9f%9f">#</a>
</h4>
<ol>
<li>根据检索条件<strong>向左寻找最靠近检索条件的记录值$A$</strong>，作为<strong>左区间</strong>，<strong>向右寻找最靠近检索条件的记录值$B$</strong>，作为<strong>右区间</strong>，即<strong>锁定的间隙为$(A,B)$</strong>。</li>
</ol>
<h4 id="524-间隙锁的分类">
  5.2.4 间隙锁的分类
  <a class="anchor" href="#524-%e9%97%b4%e9%9a%99%e9%94%81%e7%9a%84%e5%88%86%e7%b1%bb">#</a>
</h4>
<p>下面场景的测试环境为<strong>MySQL 5.7</strong>，存储引擎为<strong>InnoDB</strong>，默认的隔离级别为<strong>可重复读</strong>（Repeatable Read）。</p>
<h5 id="5241-唯一索引的间隙锁">
  5.2.4.1 唯一索引的间隙锁
  <a class="anchor" href="#5241-%e5%94%af%e4%b8%80%e7%b4%a2%e5%bc%95%e7%9a%84%e9%97%b4%e9%9a%99%e9%94%81">#</a>
</h5>
<h6 id="52411-总结">
  5.2.4.1.1 总结
  <a class="anchor" href="#52411-%e6%80%bb%e7%bb%93">#</a>
</h6>
<ol>
<li>对于指定查询<strong>某一条记录</strong>的加锁语句，如果<strong>记录存在</strong>，则会产生<strong>记录锁</strong>，如果该<strong>记录不存在</strong>，则会产生<strong>间隙锁</strong>。</li>
<li>对于查找<strong>某一范围</strong>内的查询语句，会产生<strong>间隙锁</strong>。</li>
</ol>
<h6 id="52412-示例">
  5.2.4.1.2 示例
  <a class="anchor" href="#52412-%e7%a4%ba%e4%be%8b">#</a>
</h6>
<ol>
<li>
<p>假如有如下示例表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (
  <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> int(<span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> AUTO_INCREMENT,
  <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span> varchar(<span style="color:#ae81ff">8</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
  <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>)
) ENGINE<span style="color:#f92672">=</span>InnoDB <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;张三&#39;</span>);
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;5&#39;</span>, <span style="color:#e6db74">&#39;李四&#39;</span>);
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;7&#39;</span>, <span style="color:#e6db74">&#39;王五&#39;</span>);
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;11&#39;</span>, <span style="color:#e6db74">&#39;赵六&#39;</span>);
</code></pre></div></li>
<li>
<p>该表会产生的间隙如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">1. (-infinity, 1]
2. (1, 5]
3. (5, 7]
4. (7, 11]
5. (11, +infinity]
</code></pre></div></li>
<li>
<p><strong>只是用记录锁</strong>，<strong>不会产生间隙锁</strong>：</p>
<ol>
<li>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">/* 开启事务1 */</span>
<span style="color:#66d9ef">BEGIN</span>;
<span style="color:#75715e">/* 查询 id = 5 的数据并加记录锁 */</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
<span style="color:#75715e">/* 延迟30秒执行，防止锁释放 */</span>
<span style="color:#66d9ef">SELECT</span> SLEEP(<span style="color:#ae81ff">30</span>);

<span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">注意：以下的语句不是放在一个事务中执行，而是分开多次执行，每次事务中只有一条添加语句</span>

<span style="color:#75715e">/* 事务2插入一条 name = &#39;杰伦&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;杰伦&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务3插入一条 name = &#39;学友&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">8</span>, <span style="color:#e6db74">&#39;学友&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 提交事务1，释放事务1的锁 */</span>
<span style="color:#66d9ef">COMMIT</span>;
</code></pre></div></li>
<li>上面的案例中，由于<strong>主键是唯一索引</strong>，而且<strong>只使用一个索引查询</strong>，并且<strong>只锁定了一条记录</strong>，所以<strong>只会对 <code>id=5</code>的数据加上记录锁</strong>，而<strong>不会产生间隙锁</strong>。</li>
</ol>
</li>
<li>
<p><strong>产生间隙锁</strong>：</p>
<ol>
<li>
<p>恢复初始化的4条记录，继续在 <code>id</code>唯一索引列上做如下测试：</p>
<p>
  <img src="../../../media/202106/2021-06-24_155324.png" alt="" /></p>
</li>
<li>
<p>然后执行以下SQL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">/* 开启事务1 */</span>
<span style="color:#66d9ef">BEGIN</span>;
<span style="color:#75715e">/* 查询 id 在 7 - 11 范围的数据并加记录锁 */</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> <span style="color:#66d9ef">BETWEEN</span> <span style="color:#ae81ff">5</span> <span style="color:#66d9ef">AND</span> <span style="color:#ae81ff">7</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
<span style="color:#75715e">/* 延迟30秒执行，防止锁释放 */</span>
<span style="color:#66d9ef">SELECT</span> SLEEP(<span style="color:#ae81ff">30</span>);

<span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">注意：以下的语句不是放在一个事务中执行，而是分开多次执行，每次事务中只有一条添加语句</span>


<span style="color:#75715e">/* 事务2插入一条 id = 3，name = &#39;思聪3&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;思聪3&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务3插入一条 id = 4，name = &#39;思聪4&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;思聪4&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务4插入一条 id = 6，name = &#39;思聪6&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">6</span>, <span style="color:#e6db74">&#39;思聪6&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务5插入一条 id = 8， name = &#39;思聪8&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">8</span>, <span style="color:#e6db74">&#39;思聪8&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务6插入一条 id = 9， name = &#39;思聪9&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">9</span>, <span style="color:#e6db74">&#39;思聪9&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务7插入一条 id = 11， name = &#39;思聪11&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">11</span>, <span style="color:#e6db74">&#39;思聪11&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务8插入一条 id = 12， name = &#39;思聪12&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">12</span>, <span style="color:#e6db74">&#39;思聪12&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 提交事务1，释放事务1的锁 */</span>
<span style="color:#66d9ef">COMMIT</span>;
</code></pre></div></li>
<li>
<p>从上面可以看到，$(5,7]$、$(7,11]$这两个区间都不可插入数据，其他区间都可以正常插入数据，所以可以得出结论：<strong>当我们给$(5,7]$这两个区间加锁的时候，会锁住$(5,7]$、$(7,11]$这两个区间</strong>。</p>
</li>
<li>
<p>如果上面的查询SQL改为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">5</span> <span style="color:#66d9ef">AND</span> id <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">7</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
</code></pre></div><p>此时，产生的间隙锁会锁住$(5,7)$这个区间。</p>
</li>
<li>
<p>恢复初始化的4条记录，我们再来测试如果锁住不存在的数据时，会如何。</p>
</li>
<li>
<p>然后执行以下SQL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">/* 开启事务1 */</span>
<span style="color:#66d9ef">BEGIN</span>;
<span style="color:#75715e">/* 查询 id = 3 这一条不存在的数据并加记录锁 */</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
<span style="color:#75715e">/* 延迟30秒执行，防止锁释放 */</span>
<span style="color:#66d9ef">SELECT</span> SLEEP(<span style="color:#ae81ff">30</span>);

<span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">注意：以下的语句不是放在一个事务中执行，而是分开多次执行，每次事务中只有一条添加语句</span>

<span style="color:#75715e">/* 事务2插入一条 id = 3，name = &#39;小张&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;小张&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务3插入一条 id = 4，name = &#39;小白&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;小白&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务4插入一条 id = 6，name = &#39;小东&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">6</span>, <span style="color:#e6db74">&#39;小东&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务5插入一条 id = 8， name = &#39;大罗&#39; 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">8</span>, <span style="color:#e6db74">&#39;大罗&#39;</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 提交事务1，释放事务1的锁 */</span>
<span style="color:#66d9ef">COMMIT</span>;
</code></pre></div></li>
<li>
<p>从上面可以看出，<strong>指定查询某一条记录</strong>时，<strong>如果这条记录不存在</strong>，<strong>会产生间隙锁</strong>。</p>
</li>
</ol>
</li>
</ol>
<h5 id="5242-普通索引的间隙锁">
  5.2.4.2 普通索引的间隙锁
  <a class="anchor" href="#5242-%e6%99%ae%e9%80%9a%e7%b4%a2%e5%bc%95%e7%9a%84%e9%97%b4%e9%9a%99%e9%94%81">#</a>
</h5>
<h6 id="52421-总结">
  5.2.4.2.1 总结
  <a class="anchor" href="#52421-%e6%80%bb%e7%bb%93">#</a>
</h6>
<ol>
<li>在<strong>普通索引列</strong>上，<strong>不管是何种查询</strong>，<strong>只要加锁</strong>，<strong>都会产生间隙锁</strong>，这跟唯一索引不一样。</li>
<li>在<strong>普通索引跟唯一索引中</strong>，<strong>数据间隙的分析</strong>，<strong>数据行是优先根据普通索引排序</strong>，然后<strong>再根据唯一索引排序</strong>。</li>
</ol>
<h6 id="52422-示例">
  5.2.4.2.2 示例
  <a class="anchor" href="#52422-%e7%a4%ba%e4%be%8b">#</a>
</h6>
<ol>
<li>
<p>假如有如下示例表，其中 <code>id</code>是主键，同时在 <code>number</code>上，建立了一个普通索引：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">注意：</span>number <span style="color:#960050;background-color:#1e0010">不是唯一值</span>

<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (
  <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> int(<span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> AUTO_INCREMENT,
  <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span> int(<span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;数字&#39;</span>,
  <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>),
  <span style="color:#66d9ef">KEY</span> <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">USING</span> BTREE
) ENGINE<span style="color:#f92672">=</span>InnoDB AUTO_INCREMENT<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">3</span>);
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>);
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">12</span>);
</code></pre></div></li>
<li>
<p><code>my_gap1</code>表中 <code>number</code>索引存在如下隐藏间隙：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">1. (-infinity, 1]
2. (1, 3]
3. (3, 8]
4. (8, 12]
5. (12, +infinity]
</code></pre></div></li>
<li>
<p><strong>测试1</strong>：</p>
<ol>
<li>
<p>执行以下SQL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">/* 开启事务1 */</span>
<span style="color:#66d9ef">BEGIN</span>;
<span style="color:#75715e">/* 查询 number = 3 的数据并加记录锁 */</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
<span style="color:#75715e">/* 延迟30秒执行，防止锁释放 */</span>
<span style="color:#66d9ef">SELECT</span> SLEEP(<span style="color:#ae81ff">30</span>);

<span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">注意：以下的语句不是放在一个事务中执行，而是分开多次执行，每次事务中只有一条添加语句</span>

<span style="color:#75715e">/* 事务2插入一条 number = 0 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">0</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务3插入一条 number = 1 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">被阻塞</span>

<span style="color:#75715e">/* 事务4插入一条 number = 2 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">2</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">被阻塞</span>

<span style="color:#75715e">/* 事务5插入一条 number = 4 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">4</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">被阻塞</span>

<span style="color:#75715e">/* 事务6插入一条 number = 8 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">8</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务7插入一条 number = 9 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">9</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务8插入一条 number = 10 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">10</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 提交事务1 */</span>
<span style="color:#66d9ef">COMMIT</span>;
</code></pre></div></li>
<li>
<p>因为<strong>查询的 <code>number</code>的值为3</strong>，而且 <strong><code>number</code>为普通索引</strong>，因此<strong>会产生间隙锁</strong>，间隙锁的<strong>区间为$(1,8)$</strong>，因此 <code>number</code><strong>在这个区间的插入SQL都会执行成功</strong>，<strong>不在这个区间的插入SQL都会执行失败</strong>。</p>
</li>
</ol>
</li>
<li>
<p><strong>测试2</strong>：</p>
<ol>
<li>
<p>首先将数据还原为初始化的形式，然后执行如下SQL：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">/* 开启事务1 */</span>
<span style="color:#66d9ef">BEGIN</span>;
<span style="color:#75715e">/* 查询 number = 3 的数据并加记录锁 */</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">UPDATE</span>;
<span style="color:#75715e">/* 延迟30秒执行，防止锁释放 */</span>
<span style="color:#66d9ef">SELECT</span> SLEEP(<span style="color:#ae81ff">30</span>);

<span style="color:#75715e">/* 事务1插入一条 id = 2， number = 1 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务2插入一条 id = 3， number = 2 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务3插入一条 id = 6， number = 8 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">8</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 事务4插入一条 id = 8， number = 8 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">8</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务5插入一条 id = 9， number = 9 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">9</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务6插入一条 id = 10， number = 12 的数据 */</span>
<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>, <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">12</span>); <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">正常执行</span>

<span style="color:#75715e">/* 事务7修改 id = 11， number = 12 的数据 */</span>
<span style="color:#66d9ef">UPDATE</span> <span style="color:#f92672">`</span>my_gap1<span style="color:#f92672">`</span> <span style="color:#66d9ef">SET</span> <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">11</span> <span style="color:#66d9ef">AND</span> <span style="color:#f92672">`</span>number<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>; <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">阻塞</span>

<span style="color:#75715e">/* 提交事务1 */</span>
<span style="color:#66d9ef">COMMIT</span>;
</code></pre></div></li>
<li>
<p>查看表中的数据：</p>
<p>
  <img src="../../../media/202106/2021-06-24_163621.png" alt="" /></p>
</li>
<li>
<p>这里有一个奇怪的现象：</p>
<ol>
<li>事务3 添加 id = 6，number = 8 的数据，阻塞了。</li>
<li>事务4 添加 id = 8，number = 8 的数据，正常执行了。</li>
<li>事务7 将 id = 11，number = 12 的数据修改为 id = 11， number = 5 的操作，给阻塞了。</li>
</ol>
<p>首先我们可以看一下下面这张图：</p>
<p>
  <img src="../../../media/202106/2021-06-24_163848.png" alt="image.png" /></p>
<p>从图中可以看出，当 <code>number</code>相同时，会根据主键 <code>id</code>来排序：</p>
<ol>
<li>事务 3 添加的 id = 6，number = 8，这条数据是在 (3,8) 的区间里边，所以会阻塞。</li>
<li>事务 4 添加的 id = 8，number = 8，这条数据实在 (8,12) 区间里边，所以不会阻塞。</li>
<li>事务 7 的修改语句相当于 在 (3,8) 的区间里边插入一条数据，所以也被阻塞了。</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="53-临键锁">
  5.3 临键锁
  <a class="anchor" href="#53-%e4%b8%b4%e9%94%ae%e9%94%81">#</a>
</h3>
<ol>
<li><strong>临键锁是记录锁和间隙锁的组合</strong>，他的<strong>锁范围既包含索引记录</strong>，<strong>又包含索引区间</strong>。</li>
<li>InnoDB默认使用<strong>可重复读</strong>（Repeatable Read）<strong>隔离级别</strong>，同时在<strong>索引查询时使用临键锁来避免幻读的产生</strong>。</li>
</ol>
<h2 id="参考文献">
  参考文献
  <a class="anchor" href="#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae">#</a>
</h2>
<ol>
<li>
  <a href="https://juejin.cn/post/6878884451162521613">深入理解 MySQL 锁类型和加锁原理</a>。</li>
<li>
  <a href="https://juejin.cn/post/6844903437579059214">mysql 悲观锁详解</a>。</li>
<li>
  <a href="https://learnku.com/articles/47517">一文读懂数据库中的乐观锁和悲观锁和 MVCC</a>。</li>
<li>
  <a href="https://zhuanlan.zhihu.com/p/139007138">合理的使用 MySQL 乐观锁与悲观锁</a>。</li>
<li>
  <a href="https://blog.csdn.net/weixin_39947314/article/details/113720708">mysql 悲观锁和乐观优缺点_乐观锁、悲观锁和 MVCC 各是什么？各自优缺点是什么？&hellip;</a></li>
<li>
  <a href="https://juejin.cn/post/6937494982945144863">悲观锁与乐观锁的实现(详情图解)</a>。</li>
<li>
  <a href="https://zhuanlan.zhihu.com/p/52678870">深入理解数据库行锁与表锁</a>。</li>
<li>
  <a href="https://learnku.com/articles/42715">MySQL 当中的各种锁（中级篇）</a>。</li>
<li>
  <a href="https://www.cnblogs.com/chenqionghe/p/4845693.html">MySQL 中的锁（表锁、行锁）</a>。</li>
<li>
  <a href="https://dev.mysql.com/doc/refman/8.0/en/lock-tables.html">13.3.6 LOCK TABLES and UNLOCK TABLES Statements</a>。</li>
<li>
  <a href="https://juejin.cn/post/6844903666332368909">详解 MySql InnoDB 中意向锁的作用</a>。</li>
<li>
  <a href="https://quguang.wang/post/mysql-next-key-lock">mysql-行锁 + 间隙锁（next-key lock）</a>。</li>
<li>
  <a href="https://quguang.wang/post/mysql-next-key-lock">mysql-行锁+间隙锁（next-key lock）</a>。</li>
<li>
  <a href="https://www.programmersought.com/article/99765878120">In-depth understanding of mysql&ndash;gap locks, Next-Key Locks</a>.</li>
<li>
  <a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-next-key-locking.html">14.7.4 Phantom Rows</a>.</li>
</ol>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





  <div>
    <a class="flex align-center" href="https://github.com/wpwbb510582246/ComputerCookbook-SchoolRecruitment/edit/main/exampleSite/content/docs/database/1%e3%80%81%e6%95%b0%e6%8d%ae%e5%ba%93%e5%9f%ba%e7%a1%80/1.2%20%e9%94%81.md" target="_blank" rel="noopener">
      <img src="/school-recruitment/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#锁">锁</a>
      <ul>
        <li><a href="#1-表锁和行锁">1 表锁和行锁</a>
          <ul>
            <li><a href="#11-表锁">1.1 表锁</a>
              <ul>
                <li><a href="#111-含义">1.1.1 含义</a></li>
                <li><a href="#112-如何加表锁">1.1.2 如何加表锁</a></li>
                <li><a href="#113-优缺点">1.1.3 优缺点</a>
                  <ul>
                    <li><a href="#1131-优点">1.1.3.1 优点</a></li>
                    <li><a href="#1132-缺点">1.1.3.2 缺点</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#12-行锁">1.2 行锁</a>
              <ul>
                <li><a href="#121-含义">1.2.1 含义</a></li>
                <li><a href="#122-加锁原理">1.2.2 加锁原理</a>
                  <ul>
                    <li><a href="#1221-单行数据的加锁原理">1.2.2.1 单行数据的加锁原理</a></li>
                  </ul>
                </li>
                <li><a href="#123-优缺点">1.2.3 优缺点</a>
                  <ul>
                    <li><a href="#1231-优点">1.2.3.1 优点</a></li>
                    <li><a href="#1232-缺点">1.2.3.2 缺点</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#2-共享锁和排他锁">2 共享锁和排他锁</a>
          <ul>
            <li><a href="#21-共享锁">2.1 共享锁</a>
              <ul>
                <li><a href="#211-含义">2.1.1 含义</a></li>
                <li><a href="#212-用法">2.1.2 用法</a></li>
              </ul>
            </li>
            <li><a href="#22-排他锁">2.2 排他锁</a>
              <ul>
                <li><a href="#221-含义">2.2.1 含义</a></li>
                <li><a href="#222-用法">2.2.2 用法</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#3-乐观锁和悲观锁">3 乐观锁和悲观锁</a>
          <ul>
            <li><a href="#31-悲观锁">3.1 悲观锁</a>
              <ul>
                <li><a href="#311-含义">3.1.1 含义</a></li>
                <li><a href="#312-实现方式">3.1.2 实现方式</a></li>
                <li><a href="#313-优缺点">3.1.3 优缺点</a>
                  <ul>
                    <li><a href="#3131-优点">3.1.3.1 优点</a></li>
                    <li><a href="#3132-缺点">3.1.3.2 缺点</a></li>
                  </ul>
                </li>
                <li><a href="#314-示例">3.1.4 示例</a></li>
              </ul>
            </li>
            <li><a href="#32-乐观锁">3.2 乐观锁</a>
              <ul>
                <li><a href="#321-含义">3.2.1 含义</a></li>
                <li><a href="#322-优缺点">3.2.2 优缺点</a>
                  <ul>
                    <li><a href="#3221-优点">3.2.2.1 优点</a></li>
                    <li><a href="#3222-缺点">3.2.2.2 缺点</a></li>
                  </ul>
                </li>
                <li><a href="#323-示例">3.2.3 示例</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#4-意向锁">4 意向锁</a>
          <ul>
            <li><a href="#41-为什么要引入意向锁">4.1 为什么要引入意向锁</a></li>
            <li><a href="#42-特点">4.2 特点</a></li>
            <li><a href="#43-意向锁的兼容互斥性">4.3 意向锁的兼容互斥性</a></li>
            <li><a href="#44-示例">4.4 示例</a></li>
          </ul>
        </li>
        <li><a href="#5-行级锁">5 行级锁</a>
          <ul>
            <li><a href="#51-记录锁">5.1 记录锁</a></li>
            <li><a href="#52-间隙锁">5.2 间隙锁</a>
              <ul>
                <li><a href="#521-含义">5.2.1 含义</a></li>
                <li><a href="#522-如何禁止间隙锁">5.2.2 如何禁止间隙锁</a></li>
                <li><a href="#523-间隙锁定的区域">5.2.3 间隙锁定的区域</a></li>
                <li><a href="#524-间隙锁的分类">5.2.4 间隙锁的分类</a>
                  <ul>
                    <li><a href="#5241-唯一索引的间隙锁">5.2.4.1 唯一索引的间隙锁</a>
                      <ul>
                        <li><a href="#52411-总结">5.2.4.1.1 总结</a></li>
                        <li><a href="#52412-示例">5.2.4.1.2 示例</a></li>
                      </ul>
                    </li>
                    <li><a href="#5242-普通索引的间隙锁">5.2.4.2 普通索引的间隙锁</a>
                      <ul>
                        <li><a href="#52421-总结">5.2.4.2.1 总结</a></li>
                        <li><a href="#52422-示例">5.2.4.2.2 示例</a></li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#53-临键锁">5.3 临键锁</a></li>
          </ul>
        </li>
        <li><a href="#参考文献">参考文献</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












