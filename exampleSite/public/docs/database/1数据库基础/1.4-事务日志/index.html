<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="事务日志 #  数据库的事务日志主要分三类，分别是Binlog、Redo Log、Undo Log。
1 Binlog #  1.1 含义 #   Binlog 记录了对 MySQL 数据库执行更改的所有操作，但是不包括 SELECT 和 SHOW 这类操作，但是若操作本身并没有导致数据库发生变化，那么该操作可能也会写入 Binlog，如update t set a = 1 where a = 2;，但是表t 中并不存在a = 2 的巨鹿，此时并不会对数据库进行更改，但是这个操作也会写入 Binlog。 Binlog 主要有以下几种作用：  恢复： 某些数据的恢复需要 Binlog，例如，在一个数据库全备文件恢复后，用户可以通过 Binlog 进行 point-in-time 的恢复（将数据恢复到一个给定的时间点，通常是在进行全量备份之后进行）。 复制： 其原理与恢复类似，通过复制和执行 Binlog 使一台远程的 MySQL 数据库（一般称为 slave 或 standby）与一台 MySQL 数据库（一般称为 master 或 primary）进行实时同步。 审计： 用户可以通过 Binlog 中的信息进行审计，判断是否有对数据库进行注入的攻击。    1.2 常用参数 #  1.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="事务日志 #  数据库的事务日志主要分三类，分别是Binlog、Redo Log、Undo Log。
1 Binlog #  1.1 含义 #   Binlog 记录了对 MySQL 数据库执行更改的所有操作，但是不包括 SELECT 和 SHOW 这类操作，但是若操作本身并没有导致数据库发生变化，那么该操作可能也会写入 Binlog，如update t set a = 1 where a = 2;，但是表t 中并不存在a = 2 的巨鹿，此时并不会对数据库进行更改，但是这个操作也会写入 Binlog。 Binlog 主要有以下几种作用：  恢复： 某些数据的恢复需要 Binlog，例如，在一个数据库全备文件恢复后，用户可以通过 Binlog 进行 point-in-time 的恢复（将数据恢复到一个给定的时间点，通常是在进行全量备份之后进行）。 复制： 其原理与恢复类似，通过复制和执行 Binlog 使一台远程的 MySQL 数据库（一般称为 slave 或 standby）与一台 MySQL 数据库（一般称为 master 或 primary）进行实时同步。 审计： 用户可以通过 Binlog 中的信息进行审计，判断是否有对数据库进行注入的攻击。    1.2 常用参数 #  1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.4-%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97/" /><meta property="article:section" content="docs" />



<title>1.4 事务日志 | Computer Cookbook School Recruitment</title>
<link rel="manifest" href="/school-recruitment/manifest.json">
<link rel="icon" href="/school-recruitment/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/school-recruitment/book.min.57f7f660871517a5bfcfb5e2de853d806f7e34d94ebd5f3f3bad62e9ddbae209.css" integrity="sha256-V/f2YIcVF6W/z7Xi3oU9gG9&#43;NNlOvV8/O61i6d264gk=" crossorigin="anonymous">
  <script defer src="/school-recruitment/flexsearch.min.js"></script>
  <script defer src="/school-recruitment/en.search.min.20654012d56cdefbd5952c7d6810dd19ef4ec937a2543bfccf78a9dd9ee61c6e.js" integrity="sha256-IGVAEtVs3vvVlSx9aBDdGe9OyTeiVDv8z3ip3Z7mHG4=" crossorigin="anonymous"></script>

  <script defer src="/school-recruitment/sw.min.07899fc95e217f83f76b676678ae96a3d8d0d0b042f9f17c3f23eec2551b7b12.js" integrity="sha256-B4mfyV4hf4P3a2dmeK6Wo9jQ0LBC&#43;fF8PyPuwlUbexI=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />

  <a href="https://github.com/wpwbb510582246/ComputerCookbook-SchoolRecruitment" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;z-index: 100;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/school-recruitment/"><span>Computer Cookbook School Recruitment</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="https://www.grayson.top" target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/graysonwp" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






<hr>


  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-353f7a5578fa41dbc42c73ea30fe2255" class="toggle"  />
    <label for="section-353f7a5578fa41dbc42c73ea30fe2255" class="flex justify-between">
      <a role="button" class="">第一章 算法</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e0c159ebe8e8b165cd558008fb5f5074" class="toggle"  />
    <label for="section-e0c159ebe8e8b165cd558008fb5f5074" class="flex justify-between">
      <a role="button" class="">1、算法框架</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a9fe725cb6a0f216530b1ac2b85e3b7a" class="toggle"  />
    <label for="section-a9fe725cb6a0f216530b1ac2b85e3b7a" class="flex justify-between">
      <a role="button" class="">1.1 动态规划</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.1-%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/" class="">1.1.1 斐波那契数列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.2-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" class="">1.1.2 背包问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.3-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" class="">1.1.3 贪心算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.4-%E5%BA%8F%E5%88%97%E5%92%8C%E6%95%B0%E7%BB%84%E7%B1%BB%E9%97%AE%E9%A2%98/" class="">1.1.4 序列和数组类问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.5-%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/" class="">1.1.5 编辑距离</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.6-%E9%AB%98%E6%A5%BC%E6%89%94%E9%B8%A1%E8%9B%8B/" class="">1.1.6 高楼扔鸡蛋</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.7-%E8%82%A1%E7%A5%A8%E9%97%AE%E9%A2%98%E7%B3%BB%E5%88%97%E9%80%9A%E8%A7%A3/" class="">1.1.7 股票问题系列通解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.8-%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/" class="">1.1.8 最长有效括号</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.9-%E8%82%A1%E7%A5%A8%E9%97%AE%E9%A2%98%E7%B3%BB%E5%88%97%E9%80%9A%E8%A7%A3/" class="">1.1.9 股票问题系列通解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.10-%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E6%95%B0%E7%BB%84/" class="">1.1.10 最长重复子数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/1.1.11-%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/" class="">1.1.11 最长有效括号</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e36081c41f3a4d8d8355cae83c46c9b8" class="toggle"  />
    <label for="section-e36081c41f3a4d8d8355cae83c46c9b8" class="flex justify-between">
      <a role="button" class="">1.2 二分查找</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/1.2.1-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%A1%86%E6%9E%B6/" class="">1.2.1 二分查找框架</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/1.2.2-%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84/" class="">1.2.2 搜索旋转排序数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/1.2.3-%E5%A6%82%E4%BD%95%E8%BF%90%E7%94%A8%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/" class="">1.2.3 如何运用二分查找算法</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2ac9691c4865fdec0880b3cb638bc594" class="toggle"  />
    <label for="section-2ac9691c4865fdec0880b3cb638bc594" class="flex justify-between">
      <a role="button" class="">1.3 数据结构</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.3.1-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/" class="">1.3.1 反转链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.3.2-%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/" class="">1.3.2 相交链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.3-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.3.3-%E9%93%BE%E8%A1%A8%E4%B8%AD%E5%80%92%E6%95%B0%E7%AC%ACk%E4%B8%AA%E8%8A%82%E7%82%B9/" class="">1.3.3 链表中倒数第k个节点</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2adde4460efeae2e3f7fc587adb365a8" class="toggle"  />
    <label for="section-2adde4460efeae2e3f7fc587adb365a8" class="flex justify-between">
      <a role="button" class="">1.4 排序算法</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.4-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/1.4.1-%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" class="">1.4.1 常见排序算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.4-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/1.4.2-%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E7%AC%ACk%E4%B8%AA%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/" class="">1.4.2 数组中的第k个最大元素</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9b9f975ded87a304ee48569c44f19492" class="toggle"  />
    <label for="section-9b9f975ded87a304ee48569c44f19492" class="flex justify-between">
      <a role="button" class="">1.5 二叉树</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.1-%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86/" class="">1.5.1 二叉树遍历</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.2-%E5%B2%9B%E5%B1%BF%E9%97%AE%E9%A2%98/" class="">1.5.2 岛屿问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.3-%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91/" class="">1.5.3 平衡二叉树</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.4-%E4%BA%8C%E5%8F%89%E6%A0%91%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98/" class="">1.5.4 二叉树路径问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.5-%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91/" class="">1.5.5 构造二叉树</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.5-%E4%BA%8C%E5%8F%89%E6%A0%91/1.5.6-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/" class="">1.5.6 二叉树的最近公共祖先</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4571e95d0021653ce2d27ee4b0838ca0" class="toggle"  />
    <label for="section-4571e95d0021653ce2d27ee4b0838ca0" class="flex justify-between">
      <a role="button" class="">1.6 回溯算法</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.6-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/1.6.1-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95%E8%A7%A3%E9%A2%98%E6%A1%86%E6%9E%B6/" class="">1.6.1 回溯算法解题框架</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.6-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/1.6.2-N%E7%9A%87%E5%90%8E/" class="">1.6.2 N皇后</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d6fac765b0c7fea77c79961a611f9f8f" class="toggle"  />
    <label for="section-d6fac765b0c7fea77c79961a611f9f8f" class="flex justify-between">
      <a role="button" class="">1.7 数组</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.7-%E6%95%B0%E7%BB%84/1.7.1-%E5%88%A0%E9%99%A4%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9/" class="">1.7.1 删除有序数组中的重复项</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.7-%E6%95%B0%E7%BB%84/1.7.2-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC/" class="">1.7.2 滑动窗口最大值</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-07c6c41b5fb22f09768b6f4e1da46596" class="toggle"  />
    <label for="section-07c6c41b5fb22f09768b6f4e1da46596" class="flex justify-between">
      <a role="button" class="">1.8 字符串</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.8-%E5%AD%97%E7%AC%A6%E4%B8%B2/1.8.1-%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2/" class="">1.8.1 最小覆盖子串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.8-%E5%AD%97%E7%AC%A6%E4%B8%B2/1.8.2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E4%B9%98/" class="">1.8.2 字符串相乘</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.8-%E5%AD%97%E7%AC%A6%E4%B8%B2/1.8.3-%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7/" class="">1.8.3 比较版本号</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.8-%E5%AD%97%E7%AC%A6%E4%B8%B2/1.8.4-%E9%AA%8C%E8%AF%81IP%E5%9C%B0%E5%9D%80/" class="">1.8.4 验证 Ip地址</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/1%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6/1.8-%E5%AD%97%E7%AC%A6%E4%B8%B2/1.8.5-%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97%E5%99%A8-II/" class="">1.8.5 基本计算器 Ii</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8b579ed4452b6a8d2017a24343689b5c" class="toggle"  />
    <label for="section-8b579ed4452b6a8d2017a24343689b5c" class="flex justify-between">
      <a role="button" class="">2、高频面试题</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5a653711e83b11abc9ab6143b1a9fd64" class="toggle"  />
    <label for="section-5a653711e83b11abc9ab6143b1a9fd64" class="flex justify-between">
      <a role="button" class="">2.1 数学</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.1-%E5%BF%AB%E9%80%9F%E6%A8%A1%E5%B9%82%E7%AE%97%E6%B3%95/" class="">2.1.1 快速模幂算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.2-%E6%90%9C%E7%B4%A2%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5/" class="">2.1.2 搜索二维矩阵</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.3-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/" class="">2.1.3 螺旋矩阵</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.1-%E6%95%B0%E5%AD%A6/2.1.4-x-%E7%9A%84%E5%B9%B3%E6%96%B9%E6%A0%B9/" class="">2.1.4 X 的平方根</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5c279474332677699cd0b53888bd51ba" class="toggle"  />
    <label for="section-5c279474332677699cd0b53888bd51ba" class="flex justify-between">
      <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.2-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" class="">2.2 二分查找</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e057e8659d2f838952397ed15d20f46c" class="toggle"  />
    <label for="section-e057e8659d2f838952397ed15d20f46c" class="flex justify-between">
      <a role="button" class="">2.3 数组</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.1-%E5%A6%82%E4%BD%95%E5%AF%BB%E6%89%BE%E6%B6%88%E5%A4%B1%E7%9A%84%E5%85%83%E7%B4%A0/" class="">2.3.1 如何寻找消失的元素</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.2-%E5%A6%82%E4%BD%95%E5%AF%BB%E6%89%BE%E7%BC%BA%E5%A4%B1%E5%92%8C%E9%87%8D%E5%A4%8D%E7%9A%84%E5%85%83%E7%B4%A0/" class="">2.3.2 如何寻找缺失和重复的元素</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.3-%E6%89%BE%E5%87%BA%E6%95%B0%E7%BB%84%E6%B8%B8%E6%88%8F%E7%9A%84%E8%B5%A2%E5%AE%B6/" class="">2.3.3 找出数组游戏的赢家</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.4-%E6%9C%80%E5%A4%A7%E6%95%B0/" class="">2.3.4 最大数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.5-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE/" class="">2.3.5 二维数组中的查找</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.6-%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/" class="">2.3.6 两数之和</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.7-%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/" class="">2.3.7 三数之和</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.8-%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84/" class="">2.3.8 合并两个有序数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.9-%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%8E%92%E5%88%97/" class="">2.3.9 下一个排列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.10-%E7%BC%BA%E5%A4%B1%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%95%B0/" class="">2.3.10 缺失的第一个正数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.11-%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/" class="">2.3.11 寻找两个正序数组的中位数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.12-%E5%A4%9A%E6%95%B0%E5%85%83%E7%B4%A0/" class="">2.3.12 多数元素</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.13-%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97/" class="">2.3.13 最长连续序列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.3-%E6%95%B0%E7%BB%84/2.3.14-%E7%BB%99%E5%AE%9A%E6%95%B0%E5%AD%97%E8%83%BD%E7%BB%84%E6%88%90%E7%9A%84%E6%9C%80%E5%A4%A7%E6%97%B6%E9%97%B4/" class="">2.3.14 给定数字能组成的最大时间</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b0bb9f9be9775f7e7856b63f7c5be80e" class="toggle"  />
    <label for="section-b0bb9f9be9775f7e7856b63f7c5be80e" class="flex justify-between">
      <a role="button" class="">2.4 字符串</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.1-%E6%9E%84%E9%80%A0-K-%E4%B8%AA%E5%9B%9E%E6%96%87%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="">2.4.1 构造 K 个回文字符串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.2-%E5%A6%82%E4%BD%95%E5%AF%BB%E6%89%BE%E6%9C%80%E5%9B%9E%E4%B8%B2/" class="">2.4.2 如何寻找最 回 串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.3-%E5%A6%82%E4%BD%95%E5%88%A4%E5%AE%9A%E6%8B%AC%E5%8F%B7%E7%9A%84%E5%90%88%E6%B3%95%E6%80%A7/" class="">2.4.3 如何判定括号的合法性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E6%95%B4%E6%95%B0-atoi/" class="">2.4.4 字符串转换整数 (Atoi)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.5-%E9%95%BF%E5%BA%A6%E4%B8%BA3%E7%9A%84%E4%B8%8D%E5%90%8C%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97/" class="">2.4.5 长度为3的不同回文子序列</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.6-%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/" class="">2.4.6 无重复字符的最长子串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.7-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%8A%A0/" class="">2.4.7 字符串相加</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.4-%E5%AD%97%E7%AC%A6%E4%B8%B2/2.4.8-%E7%BF%BB%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%87%8C%E7%9A%84%E5%8D%95%E8%AF%8D/" class="">2.4.8 翻转字符串里的单词</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c2cc4653d849ecb4e8d0df9162693740" class="toggle"  />
    <label for="section-c2cc4653d849ecb4e8d0df9162693740" class="flex justify-between">
      <a role="button" class="">2.5 链表</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.1-%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8-II/" class="">2.5.1 环形链表 Ii</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.2-%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%88%A4%E6%96%AD%E5%9B%9E%E6%96%87%E9%93%BE%E8%A1%A8/" class="">2.5.2 如何高效判断回文链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.3-%E5%90%88%E5%B9%B6K%E4%B8%AA%E5%8D%87%E5%BA%8F%E9%93%BE%E8%A1%A8/" class="">2.5.3 合并 K个升序链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.4-%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/" class="">2.5.4 相交链表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.5-%E9%93%BE%E8%A1%A8%E4%B8%AD%E5%80%92%E6%95%B0%E7%AC%ACk%E4%B8%AA%E8%8A%82%E7%82%B9/" class="">2.5.5 链表中倒数第k个节点</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.5-%E9%93%BE%E8%A1%A8/2.5.6-%E5%90%88%E5%B9%B6K%E4%B8%AA%E5%8D%87%E5%BA%8F%E9%93%BE%E8%A1%A8/" class="">2.5.6 合并 K个升序链表</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-95a636b3d00f4ce42d96beeef34d9742" class="toggle"  />
    <label for="section-95a636b3d00f4ce42d96beeef34d9742" class="flex justify-between">
      <a role="button" class="">2.6 二叉树</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.6-%E4%BA%8C%E5%8F%89%E6%A0%91/2.6.1-%E5%9C%A8%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E5%88%86%E9%85%8D%E7%A1%AC%E5%B8%81/" class="">2.6.1 在二叉树中分配硬币</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.6-%E4%BA%8C%E5%8F%89%E6%A0%91/2.6.2-%E5%B0%86%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/" class="">2.6.2 将有序数组转换为二叉搜索树</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.6-%E4%BA%8C%E5%8F%89%E6%A0%91/2.6.3-%E9%87%8D%E5%BB%BA%E4%BA%8C%E5%8F%89%E6%A0%91/" class="">2.6.3 重建二叉树</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2dca4a28932da6fd2ab80d6adf86f380" class="toggle"  />
    <label for="section-2dca4a28932da6fd2ab80d6adf86f380" class="flex justify-between">
      <a role="button" class="">2.7 队列</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.7-%E9%98%9F%E5%88%97/2.7.1-%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/" class="">2.7.1 用栈实现队列</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9868fca37e026543bb4220219b385440" class="toggle"  />
    <label for="section-9868fca37e026543bb4220219b385440" class="flex justify-between">
      <a role="button" class="">2.8 动态规划</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.8-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/2.8.1-%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E8%A7%A3%E5%86%B3%E6%8E%A5%E9%9B%A8%E6%B0%B4%E9%97%AE%E9%A2%98/" class="">2.8.1 如何高效解决接雨水问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.8-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/2.8.2-%E6%9C%80%E5%B0%91%E4%BE%A7%E8%B7%B3%E6%AC%A1%E6%95%B0/" class="">2.8.2 最少侧跳次数</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2b868ec58580c16b57b76d0e583b5ec9" class="toggle"  />
    <label for="section-2b868ec58580c16b57b76d0e583b5ec9" class="flex justify-between">
      <a role="button" class="">2.9 设计</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.9-%E8%AE%BE%E8%AE%A1/2.9.1-%E5%AE%9E%E7%8E%B0-Trie-%E5%89%8D%E7%BC%80%E6%A0%91/" class="">2.9.1 实现 Trie (前缀树)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/algorithm/2%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/2.9-%E8%AE%BE%E8%AE%A1/2.9.2-LRU-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" class="">2.9.2 Lru 缓存机制</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0922907dd56f7a4a192db7338c0e7143" class="toggle"  />
    <label for="section-0922907dd56f7a4a192db7338c0e7143" class="flex justify-between">
      <a role="button" class="">第二章 计算机基础</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e090ea075956ea0a88f3be27eb8b8174" class="toggle"  />
    <label for="section-e090ea075956ea0a88f3be27eb8b8174" class="flex justify-between">
      <a role="button" class="">1、计算机网络</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-043e7911fd2d67fbc52b823c1516a0d8" class="toggle"  />
    <label for="section-043e7911fd2d67fbc52b823c1516a0d8" class="flex justify-between">
      <a role="button" class="">1.1 传输层： Tcp和 UDP</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.1-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/" class="">1.1.1 三次握手</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.2-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/" class="">1.1.2 四次挥手</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.3-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/" class="">1.1.3 流量控制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.5-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/" class="">1.1.5 拥塞控制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.6-TCP%E5%92%8CUDP%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.1.6 Tcp和 Udp的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.7-TCP%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E4%BC%A0%E8%BE%93%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7/" class="">1.1.7 Tcp如何保证传输的可靠性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.1-%E4%BC%A0%E8%BE%93%E5%B1%82TCP%E5%92%8CUDP/1.1.8-TCP%E9%95%BF%E8%BF%9E%E6%8E%A5%E5%92%8C%E7%9F%AD%E8%BF%9E%E6%8E%A5/" class="">1.1.8 Tcp长连接和短连接</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c1e479729a89ea5ddbe8dd67b5f3ed4e" class="toggle"  />
    <label for="section-c1e479729a89ea5ddbe8dd67b5f3ed4e" class="flex justify-between">
      <a role="button" class="">1.2 应用层：HTTP和HTTPS</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.1-HTTP%E5%92%8CHTTPS%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.2.1 Http和 HTTP S的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.2-GET%E5%92%8CPOST%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.2.2 Get和 Post的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.3-Session%E4%B8%8ECookie%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.2.3 Session与 Cookie的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.4-%E4%BB%8E%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%E5%88%B0%E8%8E%B7%E5%BE%97%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%BF%87%E7%A8%8B%E8%B6%8A%E8%AF%A6%E7%BB%86%E8%B6%8A%E5%A5%BD/" class="">1.2.4 从输入网址到获得页面的过程（越详细越好）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.5-HTTP%E8%AF%B7%E6%B1%82%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E7%8A%B6%E6%80%81%E7%A0%81/" class="">1.2.5 Http请求有哪些常见的状态码</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.6-%E4%BB%80%E4%B9%88%E6%98%AFRIP%E7%AE%97%E6%B3%95%E6%98%AF%E4%BB%80%E4%B9%88/" class="">1.2.6 什么是 Rip，算法是什么</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.7-HTTP1.0HTTP1.1%E5%92%8CHTTP2.0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8C%BA%E5%88%AB/" class="">1.2.7 Http1.0、 Http1.1和 Http2.0的主要区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.8-DNS/" class="">1.2.8 DNS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.9-HTTPS%E5%8A%A0%E5%AF%86%E5%92%8C%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B/" class="">1.2.9 HTTP S加密和认证过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.10-%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB/" class="">1.2.10 常见网络攻击</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2-%E5%BA%94%E7%94%A8%E5%B1%82HTTP%E5%92%8CHTTPS/1.2.11-REST/" class="">1.2.11 Rest</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.3-%E8%AE%A1%E7%AE%97%E5%85%B6%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" class="">1.3 计算其网络体系结构</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9a70073e95afd0aa2b7107f6cb77a3ce" class="toggle"  />
    <label for="section-9a70073e95afd0aa2b7107f6cb77a3ce" class="flex justify-between">
      <a role="button" class="">1.4 网络层协议</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.1-IP%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%86%E7%B1%BB/" class="">1.4.1 Ip地址的分类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.2-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91/" class="">1.4.2 划分子网</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.3-%E4%BB%80%E4%B9%88%E6%98%AFARP%E5%8D%8F%E8%AE%AE/" class="">1.4.3 什么是 Arp协议</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.4-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/1.4.4-NAT%E5%8D%8F%E8%AE%AE/" class="">1.4.4 Nat协议</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-09f7d8995bc26810475d1c56597a312e" class="toggle"  />
    <label for="section-09f7d8995bc26810475d1c56597a312e" class="flex justify-between">
      <a role="button" class="">2、操作系统</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2f767bf946d6dc8ddeda6b6435471e5b" class="toggle"  />
    <label for="section-2f767bf946d6dc8ddeda6b6435471e5b" class="flex justify-between">
      <a role="button" class="">2.1 进程和线程</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">2.1.1 进程和线程的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.2-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/" class="">2.1.2 进程间通信方式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.3-%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98/" class="">2.1.3 进程同步问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.4-%E8%BF%9B%E7%A8%8B%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E7%8A%B6%E6%80%81/" class="">2.1.4 进程有哪几种状态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.5-%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5/" class="">2.1.5 进程调度策略</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.6-%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/" class="">2.1.6 僵尸进程和孤儿进程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.7-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/" class="">2.1.7 线程同步</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.8-%E5%8D%8F%E7%A8%8B/" class="">2.1.8 协程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.9-%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/" class="">2.1.9 异常控制流</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.10-IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" class="">2.1.10 Io多路复用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/2.1.11-%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81/" class="">2.1.11 用户态和内核态</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.2-%E6%AD%BB%E9%94%81/" class="">2.2 死锁</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b2b1a78994c9898abed1b08fef134abd" class="toggle"  />
    <label for="section-b2b1a78994c9898abed1b08fef134abd" class="flex justify-between">
      <a role="button" class="">2.3 内存管理</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.1-%E5%88%86%E9%A1%B5%E5%92%8C%E5%88%86%E6%AE%B5/" class="">2.3.1 分页和分段</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/" class="">2.3.2 虚拟内存</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.3-%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95/" class="">2.3.3 页面置换算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.4-%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86/" class="">2.3.4 局部性原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/2.3.5-%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/" class="">2.3.5 缓冲区溢出</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/computer-basics/2%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.4-%E7%A3%81%E7%9B%98%E8%B0%83%E5%BA%A6/" class="">2.4 磁盘调度</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e28cc33fe5745d14abf4a0147d0624a5" class="toggle" checked />
    <label for="section-e28cc33fe5745d14abf4a0147d0624a5" class="flex justify-between">
      <a role="button" class="">第三章 数据库</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6fd3cab540793410b1ce567d790deadc" class="toggle" checked />
    <label for="section-6fd3cab540793410b1ce567d790deadc" class="flex justify-between">
      <a role="button" class="">1、数据库基础</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.1-%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E7%89%B9%E6%80%A7/" class="">1.1 事务的概念和特性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.2-%E9%94%81/" class="">1.2 锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.3-%E9%94%81%E5%8D%8F%E8%AE%AE/" class="">1.3 锁协议</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.4-%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97/" class=" active">1.4 事务日志</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.5-MVCC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">1.5 Mvcc实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-12290256fbd76ac6014c39648c5827fe" class="toggle"  />
    <label for="section-12290256fbd76ac6014c39648c5827fe" class="flex justify-between">
      <a role="button" class="">1.6 基础知识</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.1-%E4%B8%89%E8%8C%83%E5%BC%8F/" class="">1.6.1 三范式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.2-%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F/" class="">1.6.2 多表连接方式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.3-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/" class="">1.6.3 存储过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.4-DELETETRUNCATE%E5%92%8CDROP%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.6.4 Delete、 Truncate和 Drop的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.5-%E8%A7%A6%E5%8F%91%E5%99%A8/" class="">1.6.5 触发器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/1%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/1.6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.6.6-%E8%A7%86%E5%9B%BE/" class="">1.6.6 视图</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d1b14978df09adfe15777e58b9b435ec" class="toggle"  />
    <label for="section-d1b14978df09adfe15777e58b9b435ec" class="flex justify-between">
      <a role="button" class="">2、 My SQL</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.1-%E7%B4%A2%E5%BC%95/" class="">2.1 索引</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.2-B-%E6%A0%91B&#43;%E6%A0%91%E7%B4%A2%E5%BC%95%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86/" class="">2.2 B 树、 B 树索引算法原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.3-%E7%B4%A2%E5%BC%95%E7%BB%84%E7%BB%87%E8%A1%A8/" class="">2.3 索引组织表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.4-InnoDB%E5%92%8CMyISAM%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">2.4 Inno Db和 My Isam的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.5-Checkpoint%E6%8A%80%E6%9C%AF/" class="">2.5 Checkpoint技术</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.6-%E5%AE%95%E6%9C%BA%E6%81%A2%E5%A4%8D%E5%8E%9F%E7%90%86/" class="">2.6 宕机恢复原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.7-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/" class="">2.7 数据库优化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.8-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" class="">2.8 分库分表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.9-%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/" class="">2.9 一致性哈希算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/2MySQL/2.10-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" class="">2.10 主从复制</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-53f351d3e26dfa58c34e937b76a0c4ce" class="toggle"  />
    <label for="section-53f351d3e26dfa58c34e937b76a0c4ce" class="flex justify-between">
      <a role="button" class="">3、 Redis</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-356f36d039b40fdb10be19d36f2f2793" class="toggle"  />
    <label for="section-356f36d039b40fdb10be19d36f2f2793" class="flex justify-between">
      <a role="button" class="">3.1 概述</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.1-%E4%B8%BA%E4%BB%80%E4%B9%88Redis%E5%8D%95%E7%BA%BF%E7%A8%8B%E8%BF%98%E8%BF%99%E4%B9%88%E5%BF%AB/" class="">3.1.1 为什么 Redis单线程还这么快</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.2-Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="">3.1.2 Redis数据类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.3-%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6/" class="">3.1.3 持久化机制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.1-%E6%A6%82%E8%BF%B0/3.1.4-%E8%BF%87%E6%9C%9F%E6%9C%BA%E5%88%B6%E5%92%8C%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5/" class="">3.1.4 过期机制和内存淘汰策略</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.2-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/" class="">3.2 线程模型</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4731e97839509d5614da88af39acf326" class="toggle"  />
    <label for="section-4731e97839509d5614da88af39acf326" class="flex justify-between">
      <a role="button" class="">3.3 分布式问题</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.3-%E5%88%86%E5%B8%83%E5%BC%8F%E9%97%AE%E9%A2%98/3.3.1-Redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" class="">3.3.1 Redis实现分布式锁</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-555105a060edfd5dfac44ac6d49d31e5" class="toggle"  />
    <label for="section-555105a060edfd5dfac44ac6d49d31e5" class="flex justify-between">
      <a role="button" class="">3.4 缓存异常</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.4-%E7%BC%93%E5%AD%98%E5%BC%82%E5%B8%B8/3.4.1-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/" class="">3.4.1 缓存穿透、缓存击穿、缓存雪崩</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c0c910bcaee9694f45ce547519533401" class="toggle"  />
    <label for="section-c0c910bcaee9694f45ce547519533401" class="flex justify-between">
      <a role="button" class="">3.5 高可用</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.5-%E9%AB%98%E5%8F%AF%E7%94%A8/3.5.1-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" class="">3.5.1 主从复制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.5-%E9%AB%98%E5%8F%AF%E7%94%A8/3.5.2-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/" class="">3.5.2 哨兵模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/database/3Redis/3.5-%E9%AB%98%E5%8F%AF%E7%94%A8/3.5.3-%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8F/" class="">3.5.3 集群模式</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f0d841e400bf38796a65a65ef72b420e" class="toggle"  />
    <label for="section-f0d841e400bf38796a65a65ef72b420e" class="flex justify-between">
      <a role="button" class="">第四章 设计模式</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/1%E6%A6%82%E8%BF%B0/" class="">1、概述</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e796a2fc1bf6b4e9454f5a191dd15040" class="toggle"  />
    <label for="section-e796a2fc1bf6b4e9454f5a191dd15040" class="flex justify-between">
      <a role="button" class="">2、创建型模式</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/2%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/2.1-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="">2.1 单例模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/2%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/2.2-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" class="">2.2 工厂模式</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3b4fedfe13cb3a0b79e49b4087294cb6" class="toggle"  />
    <label for="section-3b4fedfe13cb3a0b79e49b4087294cb6" class="flex justify-between">
      <a role="button" class="">3、结构型模式</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/3%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/3.1-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" class="">3.1 代理模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/3%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/3.2-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="">3.2 装饰器模式</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0f94fb8c7e53c880650621fdcc596283" class="toggle"  />
    <label for="section-0f94fb8c7e53c880650621fdcc596283" class="flex justify-between">
      <a role="button" class="">4、行为型模式</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/design-pattern/4%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/4.1-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/" class="">4.1 策略模式</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-eca69da21de5b0cd25d8421dec09a327" class="toggle"  />
    <label for="section-eca69da21de5b0cd25d8421dec09a327" class="flex justify-between">
      <a role="button" class="">第五章 Java</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a64d861c08691e8f06f1178d4d28cf04" class="toggle"  />
    <label for="section-a64d861c08691e8f06f1178d4d28cf04" class="flex justify-between">
      <a role="button" class="">1、 Java基础</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.1-StringStringBuffer%E5%92%8CStringBuilder%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">1.1 String、 String Buffer和 String Builder的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.2-HashMap%E5%92%8CConcurrentHashMap%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">1.2 Hash Map和 Concurrent Hash Map实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.3-ArrayList%E5%92%8CLinkedList%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">1.3 Array List和 Linked List实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.4-%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D/" class="">1.4 深拷贝与浅拷贝</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/1Java%E5%9F%BA%E7%A1%80/1.5-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3/" class="">1.5 抽象类与接口</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-21d6c85d1bc3cd657a462ac4b09f9d02" class="toggle"  />
    <label for="section-21d6c85d1bc3cd657a462ac4b09f9d02" class="flex justify-between">
      <a role="button" class="">2、 Java多线程</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.1-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/" class="">2.1 并发编程的三大特性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.2-%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92/" class="">2.2 指令重排</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.3-Volatile%E5%8E%9F%E7%90%86/" class="">2.3 Volatile原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.4-CAS%E5%8E%9F%E7%90%86/" class="">2.4 Cas原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.5-Java%E7%9A%844%E7%A7%8D%E5%BC%95%E7%94%A8%E7%BA%A7%E5%88%AB/" class="">2.5 Java的4种引用级别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.6-Java%E4%B8%AD%E7%9A%84%E9%94%81/" class="">2.6 Java中的锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.7-Synchronized%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">2.7 Synchronized实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.8-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="">2.8 线程池实现原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/2Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/2.9-AQS/" class="">2.9 Aqs</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-65e183c484720f91ba3d1676e1ed5a16" class="toggle"  />
    <label for="section-65e183c484720f91ba3d1676e1ed5a16" class="flex justify-between">
      <a role="button" class="">3、 Jvm</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.1-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/" class="">3.1 运行时数据区域</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.2-%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E5%AD%98%E6%B4%BB%E7%9A%84%E6%96%B9%E6%B3%95/" class="">3.2 判断对象是否存活的方法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.3-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95/" class="">3.3 垃圾收集算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.4-%E7%B1%BB%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%92%8C%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/" class="">3.4 类的生命周期和加载过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.5-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%97%B6%E6%9C%BA/" class="">3.5 类加载时机</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.6-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E7%A7%8D%E7%B1%BB/" class="">3.6 类加载器的种类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.7-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E7%9A%84%E7%89%B9%E7%82%B9/" class="">3.7 类加载机制的特点</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.8-JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/" class="">3.8 Jvm内存结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.9-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B/" class="">3.9 常见的垃圾收集算法有哪些</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.10-%E6%8C%87%E9%92%88%E7%A2%B0%E6%92%9E%E5%92%8C%E7%A9%BA%E9%97%B2%E5%88%97%E8%A1%A8/" class="">3.10 指针碰撞和空闲列表</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.11-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B/" class="">3.11 常见的垃圾收集器有哪些</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.12-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB/" class="">3.12 内存溢出与内存泄漏的区别</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.13-%E5%B8%B8%E7%94%A8%E7%9A%84JVM%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E6%9C%89%E5%93%AA%E4%BA%9B/" class="">3.13 常用的 Jvm启动参数有哪些</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/3JVM/3.14-%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/" class="">3.14 反射机制</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-78e3fdb9e302e0ddb1abf0723557c671" class="toggle"  />
    <label for="section-78e3fdb9e302e0ddb1abf0723557c671" class="flex justify-between">
      <a role="button" class="">4、 Nio</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/java/4NIO/4.1-%E6%A6%82%E8%BF%B0/" class="">4.1 概述</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0dcecbd4b31fcc19e26278b6dbaa0d33" class="toggle"  />
    <label for="section-0dcecbd4b31fcc19e26278b6dbaa0d33" class="flex justify-between">
      <a role="button" class="">第六章 Spring全家桶</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-afe35ec73fb23fd24d05388dd4f6d178" class="toggle"  />
    <label for="section-afe35ec73fb23fd24d05388dd4f6d178" class="flex justify-between">
      <a role="button" class="">1、 Spring</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/spring-family/1Spring/1.1-%E6%A6%82%E8%BF%B0/" class="">1.1 概述</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/spring-family/1Spring/1.2-Spring-IOC/" class="">1.2 Spring Ioc</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/spring-family/1Spring/1.3-Spring-AOP/" class="">1.3 Spring Aop</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b63cda05fe80f821d31813480ebd8acb" class="toggle"  />
    <label for="section-b63cda05fe80f821d31813480ebd8acb" class="flex justify-between">
      <a role="button" class="">2、 Spring Boot</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://books.grayson.top/school-recruitment/docs/spring-family/2SpringBoot/2.1-SpringSpringBootSpringCloud%E7%9A%84%E8%81%94%E7%B3%BB%E4%B8%8E%E5%8C%BA%E5%88%AB/" class="">2.1 Spring、 Spring Boot、 Spring Cloud的联系与区别</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/school-recruitment/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>1.4 事务日志</strong>

  <label for="toc-control">
    
    <img src="/school-recruitment/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"> </script>
  <script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} })</script>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#事务日志">事务日志</a>
      <ul>
        <li><a href="#1-binlog">1 Binlog</a>
          <ul>
            <li><a href="#11-含义">1.1 含义</a></li>
            <li><a href="#12-常用参数">1.2 常用参数</a>
              <ul>
                <li><a href="#121-max_binlog_size">1.2.1 max_binlog_size</a></li>
                <li><a href="#122-binlog_cache_size">1.2.2 binlog_cache_size</a></li>
                <li><a href="#123-sync_binlog">1.2.3 sync_binlog</a></li>
                <li><a href="#124-binlog-do-db-和-binlog-ignore-db">1.2.4 binlog-do-db 和 binlog-ignore-db</a></li>
                <li><a href="#125-log-slave-update">1.2.5 log-slave-update</a></li>
                <li><a href="#126-binlog_format">1.2.6 binlog_format</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#2-redo-log">2 Redo Log</a>
          <ul>
            <li><a href="#21-redo-log-与-binlog-的区别">2.1 Redo Log 与 Binlog 的区别</a></li>
            <li><a href="#22-含义">2.2 含义</a></li>
            <li><a href="#23-测试刷日志的时间对数据修改性能的影响">2.3 测试刷日志的时间对数据修改性能的影响</a></li>
            <li><a href="#24-log-block">2.4 Log Block</a></li>
            <li><a href="#25-log-group-和-redo-log-file">2.5 Log Group 和 Redo Log File</a></li>
            <li><a href="#26-日志刷盘规则">2.6 日志刷盘规则</a></li>
            <li><a href="#27-lsn">2.7 LSN</a>
              <ul>
                <li><a href="#271-含义">2.7.1 含义</a></li>
                <li><a href="#272-修改机制">2.7.2 修改机制</a>
                  <ul>
                    <li><a href="#2721-简单说明">2.7.2.1 简单说明</a></li>
                    <li><a href="#2722-详细说明">2.7.2.2 详细说明</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#3-undo-log">3 Undo Log</a>
          <ul>
            <li><a href="#31-含义">3.1 含义</a></li>
            <li><a href="#32-存储管理">3.2 存储管理</a></li>
            <li><a href="#33-格式">3.3 格式</a>
              <ul>
                <li><a href="#331-insert-undo-log">3.3.1 Insert Undo Log</a></li>
                <li><a href="#332-update-undo-log">3.3.2 Update Undo Log</a></li>
              </ul>
            </li>
            <li><a href="#34-deleteupdate-操作的内部机制">3.4 delete/update 操作的内部机制</a>
              <ul>
                <li><a href="#341-delete">3.4.1 delete</a></li>
                <li><a href="#342-update">3.4.2 update</a></li>
              </ul>
            </li>
            <li><a href="#35-purge">3.5 purge</a>
              <ul>
                <li><a href="#351-含义">3.5.1 含义</a></li>
                <li><a href="#352-参数">3.5.2 参数</a>
                  <ul>
                    <li><a href="#3521-innodb_purge_batch_size">3.5.2.1 innodb_purge_batch_size</a></li>
                    <li><a href="#3522-innodb_max_purge_lag">3.5.2.2 innodb_max_purge_lag</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#参考文献">参考文献</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="事务日志">
  事务日志
  <a class="anchor" href="#%e4%ba%8b%e5%8a%a1%e6%97%a5%e5%bf%97">#</a>
</h1>
<p>数据库的事务日志主要分三类，分别是<strong>Binlog</strong>、<strong>Redo Log</strong>、<strong>Undo Log</strong>。</p>
<h2 id="1-binlog">
  1 Binlog
  <a class="anchor" href="#1-binlog">#</a>
</h2>
<h3 id="11-含义">
  1.1 含义
  <a class="anchor" href="#11-%e5%90%ab%e4%b9%89">#</a>
</h3>
<ol>
<li>Binlog 记录了对 MySQL 数据库<strong>执行更改</strong>的所有操作，但是<strong>不包括 <code>SELECT</code> 和 <code>SHOW</code> 这类操作</strong>，但是<strong>若操作本身并没有导致数据库发生变化</strong>，那么<strong>该操作可能也会写入 Binlog</strong>，如<code>update t set a = 1 where a = 2;</code>，但是表<code>t</code> 中并不存在<code>a = 2</code> 的巨鹿，此时并不会对数据库进行更改，但是这个操作也会写入 Binlog。</li>
<li>Binlog 主要有以下几种作用：
<ol>
<li><strong>恢复：</strong> 某些数据的恢复需要 Binlog，例如，在一个数据库<strong>全备文件恢复后</strong>，用户可以<strong>通过 Binlog 进行 point-in-time 的恢复</strong>（将数据恢复到一个给定的时间点，通常是在进行全量备份之后进行）。</li>
<li><strong>复制：</strong> 其原理与恢复类似，<strong>通过复制和执行 Binlog 使一台远程的 MySQL 数据库</strong>（一般称为 slave 或 standby）<strong>与一台 MySQL 数据库</strong>（一般称为 master 或 primary）<strong>进行实时同步</strong>。</li>
<li><strong>审计：</strong> 用户可以<strong>通过 Binlog 中的信息进行审计</strong>，<strong>判断是否有对数据库进行注入的攻击</strong>。</li>
</ol>
</li>
</ol>
<h3 id="12-常用参数">
  1.2 常用参数
  <a class="anchor" href="#12-%e5%b8%b8%e7%94%a8%e5%8f%82%e6%95%b0">#</a>
</h3>
<h4 id="121-max_binlog_size">
  1.2.1 max_binlog_size
  <a class="anchor" href="#121-max_binlog_size">#</a>
</h4>
<ol>
<li><code>max_binlog_size</code> 指定了<strong>单个 binlog 文件的最大值</strong>，如果<strong>超过该值</strong>，<strong>将产生一个新的 binlog</strong>，<strong>后缀名加 1</strong>，<strong>并记录到 <code>.index</code> 文件</strong>。</li>
<li>从 MySQL 5.0 开始的<strong>默认值为</strong>1073741824，代表<strong>1G</strong>，在之前版本中<code>max_binlog_size</code> 默认大小为 1.1G。</li>
</ol>
<h4 id="122-binlog_cache_size">
  1.2.2 binlog_cache_size
  <a class="anchor" href="#122-binlog_cache_size">#</a>
</h4>
<ol>
<li>当<strong>使用事务的表存储引擎</strong>（如 InnoDB 存储引擎）时，所有<strong>未提交的 binlog 会被记录到一个缓存中</strong>，等到改该<strong>事务提交时直接将缓冲中的 binlog 写入 binlog 文件</strong>，而该<strong>缓冲的大小由 <code>binlog_cache_size</code> 决定</strong>，<strong>默认大小为 32K</strong>。</li>
<li><code>binlog_cache_size</code><strong>是基于会话的</strong>，也就是说，<strong>当一个线程开始一个事务时</strong>，MySQL<strong>会自动分配一个大小为 <code>binlog_cache_size</code> 的缓存</strong>，因此，该值的设置需要相当小心，<strong>不能设置过大</strong>，<strong>当一个事务的记录大于设定的 <code>binlog_cache_size</code> 时</strong>，MySQL<strong>会把缓冲中的日志写入一个临时文件</strong>中，因此该值<strong>又不能设得太小</strong>。</li>
</ol>
<h4 id="123-sync_binlog">
  1.2.3 sync_binlog
  <a class="anchor" href="#123-sync_binlog">#</a>
</h4>
<ol>
<li>在默认情况下，binlog 并不是在每次写的时候同步到磁盘，因此，当数据库所在操作系统发生宕机时，可能会有最后一部分数据没有写入 binlog 文件中，这会给恢复和复制带来问题。</li>
<li><strong>参数 <code>sync_binlog = [N]</code> 表示每写缓冲多少次就同步到磁盘</strong>，<strong>默认值为 0</strong>，<strong>如果 N 设为 1</strong>，<strong>表示采用同步写磁盘的方式来写 binlog</strong>，<strong>这时写操作不使用缓冲来写 binlog</strong>。</li>
<li>但是，<strong>即使将 <code>sync_binlog</code> 设为 1</strong>，还是会有一种情况导致问题的发生，当使用 InnoDB 存储引擎时，<strong>在一个事务发出 <code>COMMIT</code> 动作之前</strong>，由于<code>sync_binlog</code> 为 1，因此<strong>会将 binlog 立即写入磁盘</strong>，<strong>如果这时已经写入了 binlog</strong>，<strong>但是提交还没有发生</strong>，<strong>并且此时发生了宕机</strong>，那么在 MySQL 数据库<strong>下次启动时</strong>，由于**<code>COMMIT</code> 操作并没有发生**，这个**事务会被回滚**掉，但是**二进制日志已经记录了该事务信息**，**不能被回滚**，**这个问题可以通过将参数 <code>innodb_support_xa</code> 设为 1 来解决**，虽然<code>innodb_support_xa</code> 与<code>XA</code> 事务有关，但他同时也**确保了 <code>binlog</code> 和 InnoDB 存储引擎数据文件的同步**。</li>
</ol>
<h4 id="124-binlog-do-db-和-binlog-ignore-db">
  1.2.4 binlog-do-db 和 binlog-ignore-db
  <a class="anchor" href="#124-binlog-do-db-%e5%92%8c-binlog-ignore-db">#</a>
</h4>
<ol>
<li><code>binlog-do-db</code> 和<code>binlog-ignore-db</code> 表示<strong>需要写入或忽略写入哪些库的日志</strong>，<strong>默认为空</strong>，<strong>表示需要同步所有库的日志到 <code>binlog</code></strong>。</li>
</ol>
<h4 id="125-log-slave-update">
  1.2.5 log-slave-update
  <a class="anchor" href="#125-log-slave-update">#</a>
</h4>
<ol>
<li><strong>如果当前数据库是复制中的 <code>slave</code> 角色</strong>，<strong>则他不会将从 <code>master</code> 取得并执行的 binlog 写入到自己的 binlog 文件中去</strong>，<strong>如果需要写入</strong>，<strong>要设置 <code>log-slave-update</code></strong>。</li>
<li><strong>如果需要搭建 <code>master =&gt; slave =&gt; slave</code> 架构的复制</strong>，则<strong>必须设置该参数</strong>。</li>
</ol>
<h4 id="126-binlog_format">
  1.2.6 binlog_format
  <a class="anchor" href="#126-binlog_format">#</a>
</h4>
<ol>
<li>
<p><code>binlog_format</code> 参数十分重要，他<strong>影响了记录 binlog 的格式</strong>。</p>
</li>
<li>
<p>在<strong>MySQL 5.1 版本之前</strong>，没有这个参数，<strong>所有 binlog 的格式都是基于 SQL 语句级别的</strong>，但是<strong>如果在主服务器运行 <code>rand</code>、<code>uuid</code> 等函数</strong>，又<strong>或者使用触发器等操作</strong>，这些都可能<strong>会导致主从服务器上表中数据的不一致</strong>。</p>
</li>
<li>
<p>MySQL 5.1 开始引入了 <code>binlog_format</code> 参数，该参数可设的值有 <code>STATEMENT</code>、<code>ROW</code>、<code>MIXED</code>，每个参数的具体含义如下：</p>
<ol>
<li><code>STATEMENT</code> 格式和之前的 MySQL 版本一样，<strong>binlog 记录的是日志的逻辑 SQL 语句</strong>。</li>
<li>在<code>ROW</code> 格式下，binlog 记录的不再是简单的 SQL 语句了，而是<strong>记录表的行更改情况</strong>。</li>
<li>在<code>MIXED</code> 格式下，MySQL<strong>默认采用 <code>STATEMENT</code> 格式进行二进制日志文件的记录</strong>，但是<strong>在一些情况下会使用 <code>ROW</code> 格式</strong>，例如：
<ol>
<li><strong>表的存储引擎为 <code>NDB</code></strong>，<strong>这时对表的 <code>DML</code> 操作都会以 <code>ROW</code> 格式记录</strong>。</li>
<li><strong>使用了 <code>UUID()</code>、<code>USER()</code>、<code>CURRENT_USER()</code>、<code>FOUND_ROWS()</code>、<code>ROW_COUNT()</code> 等不确定函数</strong>。</li>
<li><strong>使用了 <code>INSERT DELAY</code> 语句</strong>。</li>
<li><strong>使用了用户定义函</strong>数。</li>
<li><strong>使用了临时表</strong>。</li>
</ol>
</li>
</ol>
</li>
<li>
<p><code>binlog_format</code> 是<strong>动态参数</strong>，因此<strong>可以在数据库运行环境下更改</strong>，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SET</span> <span style="color:#f92672">@</span><span style="color:#66d9ef">session</span>.binlog.format <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;ROW&#39;</span>;
</code></pre></div></li>
<li>
<p>在<strong>通常情况下</strong>，我们<strong>将参数 <code>binlog_format</code> 设置为 <code>ROW</code></strong>，这样<strong>可以为数据库的恢复和复制带来更好的可靠性</strong>，但是<strong>会带来 binlog 文件大小的增加</strong>，而且由于<strong>复制是采用传输 binlog 的方式实现的</strong>，因此<strong>复制的网络开销也会有所增加</strong>。</p>
</li>
</ol>
<h2 id="2-redo-log">
  2 Redo Log
  <a class="anchor" href="#2-redo-log">#</a>
</h2>
<h3 id="21-redo-log-与-binlog-的区别">
  2.1 Redo Log 与 Binlog 的区别
  <a class="anchor" href="#21-redo-log-%e4%b8%8e-binlog-%e7%9a%84%e5%8c%ba%e5%88%ab">#</a>
</h3>
<ol>
<li><strong>Binlog 是在存储引擎的上层产生的</strong>，<strong>不管是什么存储引擎</strong>，<strong>对数据库的修改都会产生 Binlog</strong>，而<strong>Redo Log 是 InnoDB 层产生的</strong>，<strong>只记录该存储引擎中表的修改</strong>，并且<strong>Binlog 先于 Redo Log 被记录</strong>。</li>
<li><strong>Binlog 记录操作的方法是逻辑性的语句</strong>，即便他是基于 ROW 格式的记录方式，其<strong>本质</strong>也还<strong>是逻辑的 SQL 设置</strong>，而<strong>Redo Log 是物理格式的日志</strong>，它<strong>记录的是数据库中每个页的修改</strong>。</li>
<li><strong>Binlog 只在每次事务提交的时候一次性写入缓存中的日志文件</strong>，而<strong>Redo Log 在数据准备修改前要先写入缓存中的 Redo Log 中</strong>，<strong>然后才对缓存中的数据执行修改操作</strong>，而且保证<strong>在发出事务提交指令时</strong>，<strong>先向缓存中的 Redo Log 写入日志</strong>，<strong>写入完成后才执行提交动作</strong>。</li>
<li>因为 Binlog 只在提交的时候一次性写入，所以<strong>Binlog 中的记录方式和提交顺序有关</strong>，且<strong>一次提交对应一次记录</strong>，而<strong>Redo Log 中记录的是物理页的修改</strong>，Redo Log 文件中<strong>同一事务可能多次记录</strong>，<strong>最后一个提交的事务记录会覆盖所有未提交的事务记录</strong>，例如事务 $T_1$，可能在 Redo Log 中记录了 $T_{11}$、$T_{12}$、$T_{13}$、$T_{1*}$ 共 4 个操作，其中 $T_{1*}$ 表示最后提交时的日志记录，所以对应的数据页最终状态是 $T_{1*}$ 对应的操作结果，而且**Redo Log 是并发写入的**，**不同事务之间的不同版本的记录会穿插写入到 Redo Log 文件中**，例如可能 Redo Log 的记录方式为 $T_{11}$、$T_{12}$、$T_{21}$、$T_{22}$、$T_{2*}$、$T_{13}$、$T_{1*}$。</li>
<li><strong>Redo Log 记录的是物理页的情况</strong>，它<strong>具有幂等性</strong>，因此<strong>记录日志的方式极其简练</strong>，幂等性的意思是多次操作前后状态是一样的，例如新插入一行又删除该行，前后状态没有变化，而<strong>Binlog 记录的是所有影响数据的操作</strong>，<strong>记录的内容较多</strong>，例如插入一行记录一次，删除该行又记录一次。</li>
</ol>
<h3 id="22-含义">
  2.2 含义
  <a class="anchor" href="#22-%e5%90%ab%e4%b9%89">#</a>
</h3>
<ol>
<li>
<p><strong>Redo Log 包括两部分</strong>，一部分是<strong>内存中的日志缓冲</strong>（Redo Log Buffer），这部分日志是<strong>易失</strong>的，另一部分是磁盘上的<strong>重做日志文件</strong>（Redo Log File），这部分日志是<strong>持久</strong>的。</p>
</li>
<li>
<p><strong>InnoDB 通过 Force Log at Commit 机制实现事务的持久性</strong>，即<strong>在事务提交的时候</strong>，<strong>必须先将该事务的所有事务日志写入到磁盘上的 Redo Log File 和 Undo Log File 中进行持久化</strong>。</p>
</li>
<li>
<p><strong>为了确保每次日志都能写入到日志文件中</strong>，在<strong>每次将 Log Buffer 中的日志写入到日志文件的过程中都会调用一次操作系统的 <code>fsync</code> 操作</strong>，即 <strong><code>fsync()</code> 系统调用</strong>，因为<strong>MySQL</strong>是<strong>工作在用户空间</strong>的，<strong>其 Log Buffer 处于用户空间的内存中</strong>，<strong>要写入到磁盘上的 Log File 中</strong>，<strong>中间还要经过操作系统内核空间的 OS Buffer</strong>，<strong>调用 <code>fsync()</code> 就是将 OS Buffer 中的日志刷到磁盘上的 Log File 中</strong>。</p>
<p>
  <img src="../../../media/202106/2021-06-27_163015.png" alt="" /></p>
<blockquote>
<ol>
<li>在此处需要注意的一点是，<strong>一般所说的 Log File 并不是磁盘上的物理日志文件</strong>，<strong>而是操作系统缓存中的 Log File</strong>，但这本身不太容易理解，既然都称为 file 了，应该已经属于物理文件了，所以<strong>在本文后续内容中都以 OS Buffer 或 File System Buffer 来表示官方所说的 file</strong>，然后<strong>Log File 则表示磁盘上的物理日志文件</strong>，<strong>即 Log File on Disk</strong>。</li>
<li><strong>之所以要经过一层 OS Buffer</strong>，<strong>是因为打开日志文件的时候</strong>，<strong>没有使用 <code>O_DIRECT</code> 标志位</strong>，<strong>该标志位意味着绕过操作系统层的 OS Buffer</strong>，<strong>IO 直写到底层存储设备</strong>，<strong>不使用该标志位意味着将日志进行缓冲</strong>，<strong>缓冲到了一定容量</strong>，<strong>或者显式 <code>fsync()</code> 才会将缓冲中的刷到存储设备</strong>，<strong>使用该标志位意味着每次都要发起系统调用</strong>，比如写<code>abcde</code>，<strong>不使用 <code>O_DIRECT</code> 将只发起一次系统调用</strong>，使用<code>O_DIRECT</code> 将发起 5 次系统调用。</li>
</ol>
</blockquote>
</li>
<li>
<p>MySQL 支持用户自定义在 Commit 时如何将 Buffer 中的日志刷到 Log File 中，这种控制通过变量 <code>innodb_flush_log_at_trx_commit</code> 的值来决定，该变量有三种值，分别是 0、1、2，默认是 1，具体如下：</p>
<ol>
<li>
<p>当设置为<strong>0</strong>的时候，<strong>事务提交时不会将 Log Buffer 中的日志写入到 OS Buffer</strong>，<strong>而是每秒写入 OS Buffer 并调用 <code>fsync()</code> 写入到 Log File on Disk 中</strong>，也就是说设置为 0 时是<strong>每秒刷新写入到磁盘中</strong>的，当<strong>系统崩溃</strong>，<strong>会丢失 1 秒钟的数据</strong>。</p>
</li>
<li>
<p>当设置为<strong>1</strong>的时候，<strong>事务每次提交都会将 Log Buffer 中的日志写入 OS Buffer</strong>，<strong>并调用 <code>fsync()</code> 刷到 Log File on Disk 中</strong>，这种方式及时<strong>系统崩溃</strong>也<strong>不会丢失任何数据</strong>，但是因为<strong>每次都写入磁盘</strong>，<strong>IO 性能较差</strong>。</p>
</li>
<li>
<p>当设置为<strong>2</strong>的时候，<strong>每次提交都仅写入到 OS Buffer</strong>，<strong>然后是每秒调用 <code>fsync()</code> 将 OS Buffer 中的日志写入到 Log File on Disk</strong>。</p>
<p>
  <img src="../../../media/202106/2021-06-27_165359.png" alt="" /></p>
</li>
</ol>
</li>
<li>
<p>在<strong>主从复制结构</strong>中，要<strong>保证事务的持久性和一致性</strong>，需要对日志相关变量设置如下：</p>
<ol>
<li>如果<strong>启用了 Binlog</strong>，则<strong>设置 <code>sync_binlog = 1</code></strong>，即<strong>每提交一次事务</strong>，<strong>同步写到磁盘中</strong>。</li>
<li>总是<strong>设置 <code>innodb_flush_log_at_trx_commit = 1</code></strong>，即<strong>每提交一次事务都写到磁盘中</strong>。
上面两项变量的设置保证了<strong>每次提交事务都写入二进制日志和事务日志</strong>，<strong>并在提交的时候将他们刷新到磁盘中</strong>。</li>
</ol>
</li>
</ol>
<h3 id="23-测试刷日志的时间对数据修改性能的影响">
  2.3 测试刷日志的时间对数据修改性能的影响
  <a class="anchor" href="#23-%e6%b5%8b%e8%af%95%e5%88%b7%e6%97%a5%e5%bf%97%e7%9a%84%e6%97%b6%e9%97%b4%e5%af%b9%e6%95%b0%e6%8d%ae%e4%bf%ae%e6%94%b9%e6%80%a7%e8%83%bd%e7%9a%84%e5%bd%b1%e5%93%8d">#</a>
</h3>
<p>选择刷日志的时间会严重影响数据修改时的性能，特别是刷到磁盘的过程，下面测试 <code>innodb_flush_log_at_trx_commit</code> 分别设置为 0、1、2 时的差距：</p>
<ol>
<li>
<p>首先创建表和相应的存储过程：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">创建测试表</span>
<span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">table</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">exists</span> test_flush_log;
<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> test_flush_log(id int,name char(<span style="color:#ae81ff">50</span>))engine<span style="color:#f92672">=</span>innodb;

<span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">创建插入指定行数的记录到测试表中的存储过程</span>
<span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">procedure</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">exists</span> proc;
<span style="color:#66d9ef">delimiter</span> <span style="color:#960050;background-color:#1e0010">$$</span>
<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">procedure</span> proc(i int)
<span style="color:#66d9ef">begin</span>
    <span style="color:#66d9ef">declare</span> s int <span style="color:#66d9ef">default</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">declare</span> <span style="color:#66d9ef">c</span> char(<span style="color:#ae81ff">50</span>) <span style="color:#66d9ef">default</span> repeat(<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#ae81ff">50</span>);
    while s<span style="color:#f92672">&lt;=</span>i <span style="color:#66d9ef">do</span>
        <span style="color:#66d9ef">start</span> <span style="color:#66d9ef">transaction</span>;
        <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> test_flush_log <span style="color:#66d9ef">values</span>(<span style="color:#66d9ef">null</span>,<span style="color:#66d9ef">c</span>);
        <span style="color:#66d9ef">commit</span>;
        <span style="color:#66d9ef">set</span> s<span style="color:#f92672">=</span>s<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">end</span> while;
<span style="color:#66d9ef">end</span><span style="color:#960050;background-color:#1e0010">$$</span>
<span style="color:#66d9ef">delimiter</span> ;
</code></pre></div></li>
<li>
<p>当前环境下，<code>innodb_flush_log_at_trx_commit</code> 的值为 1，即每次提交都刷日志到磁盘，测试此时插入 10W 条记录的时间：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mysql&gt; call proc<span style="color:#f92672">(</span>10000<span style="color:#f92672">)</span>;
Query OK, <span style="color:#ae81ff">0</span> rows affected <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> min 4.79 sec<span style="color:#f92672">)</span>
</code></pre></div><p>用时 1 分 1.79 秒。</p>
</li>
<li>
<p>再测试值为 2 的时候，即每次提交都刷新到 OS Buffer，但每秒才刷入到磁盘中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mysql&gt; set @@global.innodb_flush_log_at_trx_commit<span style="color:#f92672">=</span>2;
mysql&gt; truncate test_flush_log;

mysql&gt; call proc<span style="color:#f92672">(</span>10000<span style="color:#f92672">)</span>;
Query OK, <span style="color:#ae81ff">0</span> rows affected <span style="color:#f92672">(</span>29.84 sec<span style="color:#f92672">)</span>
</code></pre></div><p>结果插入时间大减，只需 20.84 秒。</p>
</li>
<li>
<p>最后测试值为 0 的时候，即每秒才刷到 OS Buffer 和磁盘：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mysql&gt; set @@global.innodb_flush_log_at_trx_commit<span style="color:#f92672">=</span>0;
mysql&gt; truncate test_flush_log;

mysql&gt; call proc<span style="color:#f92672">(</span>10000<span style="color:#f92672">)</span>;
Query OK, <span style="color:#ae81ff">0</span> rows affected <span style="color:#f92672">(</span>31.81 sec<span style="color:#f92672">)</span>
</code></pre></div><p>结果用时 31.81 秒。</p>
</li>
<li>
<p>最后可以发现，其实<strong>值为 2 和 0 的时候</strong>，他们的<strong>差距并不大</strong>，<strong>但 2 却比 0 要安全的多</strong>，<strong>他们都是每秒从 OS Buffer 刷到磁盘</strong>，他们之间的<strong>差距体现在 Log Buffer 刷到 OS Buffer 上</strong>，<strong>因为将 Log Buffer 中的日志刷新到 OS Buffer 只是内存数据的转移</strong>，<strong>并没有太大的开销</strong>，<strong>所以每次提交和每秒刷入差距并不大</strong>，<strong>但值为 1 的性能却差很多</strong>，<strong>尽管设置为 0 和 2 可以大幅度提升插入性能</strong>，<strong>但是在故障的时候可能会丢失 1 秒钟的数据</strong>，<strong>这 1 秒钟很可能有大量的数据</strong>，从上面的测试结果看，1W 条记录只消耗了 30 多秒，1 秒钟大约有 300-400 条数据，尽管上述插入数据的简单，但却说明了丢失数据的大量性，<strong>更好的插入数据的做法是将值设置为 1</strong>，<strong>然后修改存储过程</strong>，<strong>将每次循环都提交修改为只提交一次</strong>，<strong>这样既能保证数据的一致性</strong>，<strong>也能提升性能</strong>，修改如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">procedure</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">exists</span> proc;
<span style="color:#66d9ef">delimiter</span> <span style="color:#960050;background-color:#1e0010">$$</span>
<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">procedure</span> proc(i int)
<span style="color:#66d9ef">begin</span>
    <span style="color:#66d9ef">declare</span> s int <span style="color:#66d9ef">default</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">declare</span> <span style="color:#66d9ef">c</span> char(<span style="color:#ae81ff">50</span>) <span style="color:#66d9ef">default</span> repeat(<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#ae81ff">50</span>);
    <span style="color:#66d9ef">start</span> <span style="color:#66d9ef">transaction</span>;
    while s<span style="color:#f92672">&lt;=</span>i <span style="color:#66d9ef">DO</span>
        <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> test_flush_log <span style="color:#66d9ef">values</span>(<span style="color:#66d9ef">null</span>,<span style="color:#66d9ef">c</span>);
        <span style="color:#66d9ef">set</span> s<span style="color:#f92672">=</span>s<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">end</span> while;
    <span style="color:#66d9ef">commit</span>;
<span style="color:#66d9ef">end</span><span style="color:#960050;background-color:#1e0010">$$</span>
<span style="color:#66d9ef">delimiter</span> ;
</code></pre></div></li>
<li>
<p>测试值为 1 的情况：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mysql&gt; set @@global.innodb_flush_log_at_trx_commit<span style="color:#f92672">=</span>1;
mysql&gt; truncate test_flush_log;

mysql&gt; call proc<span style="color:#f92672">(</span>10000<span style="color:#f92672">)</span>;
Query OK, <span style="color:#ae81ff">0</span> rows affected <span style="color:#f92672">(</span>1.06 sec<span style="color:#f92672">)</span>
</code></pre></div></li>
</ol>
<h3 id="24-log-block">
  2.4 Log Block
  <a class="anchor" href="#24-log-block">#</a>
</h3>
<ol>
<li>
<p>InnoDB 存储引擎中，Redo Log 是<strong>以块为单位进行存储</strong>的，<strong>每个块占 512 字节</strong>，这称为<strong>Redo Log Block</strong>，所以不管是 Log Buffer、OS Buffer，还是 Redo Log File on Disk 中，都是这样以 512 字节的块存储的。</p>
</li>
<li>
<p><strong>每个 Redo Log Block 由 3 部分组成</strong>，分别是<strong>日志块头</strong>、<strong>日志主体</strong>和<strong>日志块尾</strong>，其中<strong>日志块头占用 12 字节</strong>，<strong>日志主体占用 492 字节</strong>，<strong>日志块尾占用 8 字节</strong>。

  <img src="../../../media/202106/2021-06-28_094123.png" alt="" /></p>
</li>
<li>
<p>因为 Redo Log 记录的是数据页的变化，当<strong>一个数据页产生的变化需要使用超过 492 字节的 Redo Log 记录</strong>，那么就<strong>会使用多个 Redo Log Block 来记录该数据页的变化</strong>。</p>
</li>
<li>
<p>日志块头包含 4 部分，具体如下：</p>
<ol>
<li>
<p><code>log_block_hdr_no</code>：<strong>占用 4 字节</strong>，表示<strong>该日志块在 Redo Log Buffer 中的位置 ID</strong>。</p>
</li>
<li>
<p><code>log_block_hdr_data_len</code>：<strong>占用 2 字节</strong>，表示<strong>该日志块中已记录的日志大小</strong>，<strong>写满该日志块时为 <code>0x200</code></strong>，<strong>表示 512 字节</strong>。</p>
</li>
<li>
<p><code>log_block_first_rec_group</code>：<strong>占用 2 字节</strong>，表示<strong>该日志块中第一个日志的开始偏移位置</strong>。</p>
</li>
<li>
<p><code>log_block_checkpoint_no</code>：<strong>占用 4 字节</strong>，表示<strong>写入检查点信息的位置</strong>。</p>
<blockquote>
<p>关于日志块头的第三部分 <code>log_block_first_rec_group</code>：</p>
<ol>
<li>因为有时候一个数据页产生的日志量超出了一个日志块，这时需要用多个日志块来记录该页的相关日志。</li>
<li>例如某一数据页产生了 552 字节的日志量，那么需要占用两个日志块，第一个日志块占用 492 字节，第二个日志块需要占用 60 个字节，那么对于第二个日志块来说，他的第一个日志的开始位置就是 73 字节（60+12），如果该部分的值和<code>log_block_hdr_data_len</code> 相等，则说明该日志块中没有新开始的日志块，即表示该日志块用来延续前一个日志块。</li>
</ol>
</blockquote>
</li>
</ol>
</li>
<li>
<p>日志主体主要由 4 部分组成：</p>
<ol>
<li><code>redo_log_type</code>：占用 1 字节，表示 Redo Log 的日志类型。</li>
<li><code>space</code>：采用压缩的方式后，占用空间可能小于 4 字节，表示表空间的 ID。</li>
<li><code>page_no</code>：同样是压缩过的，表示页的偏移量。</li>
<li><code>redo_log_body</code>：表示每个 Redo Log 的数据部分，恢复时会调用相应的函数进行解析，不同类型的 SQL 语句写入 Redo Log 的内容是不一样的，例如下面的<code>insert</code> 和<code>delete</code> 的记录方式：
  <img src="../../../media/202106/2021-06-28_113659.png" alt="" />
<blockquote>
<ol>
<li>因为 InnoDB 存储引擎数据的单元是页，所以 Redo Log 也是基于页的格式来记录的。</li>
<li>默认情况下，InnoDB 的页大小是 16KB（由<code>innodb_page_size</code> 变量控制），一个页内可以存放非常多的 Log Block（每个 512 字节），而 Log Block 中记录的又是数据页的变化。</li>
</ol>
</blockquote>
</li>
</ol>
</li>
<li>
<p><strong>日志尾只有一个部分 <code>log_block_trl_no</code></strong>，该值<strong>和日志块头的 <code>log_block_hdr_no</code> 相等</strong>。</p>
</li>
<li>
<p>上面所说的是一个日志块的内容，<strong>在 Redo Log Buffer 或者 Redo File on Disk 中</strong>，<strong>由很多日志块组成</strong>，如下图所示：</p>
<p>
  <img src="../../../media/202106/2021-06-28_100022.png" alt="" /></p>
</li>
</ol>
<h3 id="25-log-group-和-redo-log-file">
  2.5 Log Group 和 Redo Log File
  <a class="anchor" href="#25-log-group-%e5%92%8c-redo-log-file">#</a>
</h3>
<ol>
<li>
<p>Log Group 表示的是 Redo Log Group，<strong>一个组内由多个大小完全相同的 Redo Log File 组成</strong>，<strong>组内 Redo Log File 的数量由变量 <code>innodb_log_files_group</code> 决定</strong>，<strong>默认值为 2</strong>，<strong>即两个 Redo Log File</strong>。</p>
</li>
<li>
<p>这个组是一个<strong>逻辑的概念</strong>，并<strong>没有真正的文件来表示这是一个组</strong>，但是<strong>可以通过变量 <code>innodb_log_group_home_dir</code> 来定义组的目录</strong>，<strong>Redo Log File 都放在这个目录下</strong>，<strong>默认是在 <code>datadir</code> 下</strong>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mysql&gt; show global variables like <span style="color:#e6db74">&#39;innodb_log%&#39;</span>;
+-----------------------------+------------------+
| Variable_name               | Value            |
+-----------------------------+------------------+
| innodb_log_buffer_size      | <span style="color:#ae81ff">8388608</span>          |
| innodb_log_checksums        | ON               |
| innodb_log_compressed_pages | ON               |
| innodb_log_file_size        | <span style="color:#ae81ff">5242880</span>          |
| innodb_log_files_in_group   | <span style="color:#ae81ff">2</span>                |
| innodb_log_group_home_dir   | /www/server/data |
| innodb_log_write_ahead_size | <span style="color:#ae81ff">8192</span>             |
+-----------------------------+------------------+

mysql&gt; system ls -l /www/server/data/ib*
-rw-r----- <span style="color:#ae81ff">1</span> mysql mysql      <span style="color:#ae81ff">381</span> <span style="color:#ae81ff">6</span> 月  <span style="color:#ae81ff">28</span> 10:38 /www/server/data/ib_buffer_pool
-rw-r----- <span style="color:#ae81ff">1</span> mysql mysql <span style="color:#ae81ff">77594624</span> <span style="color:#ae81ff">6</span> 月  <span style="color:#ae81ff">28</span> 10:38 /www/server/data/ibdata1
-rw-r----- <span style="color:#ae81ff">1</span> mysql mysql  <span style="color:#ae81ff">5242880</span> <span style="color:#ae81ff">6</span> 月  <span style="color:#ae81ff">28</span> 10:38 /www/server/data/ib_logfile0
-rw-r----- <span style="color:#ae81ff">1</span> mysql mysql  <span style="color:#ae81ff">5242880</span> <span style="color:#ae81ff">6</span> 月  <span style="color:#ae81ff">27</span> 17:28 /www/server/data/ib_logfile1
-rw-r----- <span style="color:#ae81ff">1</span> mysql mysql <span style="color:#ae81ff">12582912</span> <span style="color:#ae81ff">6</span> 月  <span style="color:#ae81ff">28</span> 10:38 /www/server/data/ibtmp1
</code></pre></div><p>可以看到在默认的数据目录下，有两个 <code>ib_logfile</code> 开头的文件，他们就是 Log Group 中的 Redo Log File，而且他们的大小完全一致，且等于变量 <code>innodb_log_file_size</code> 定义的值，第一个文件 <strong><code>ibdata1</code> 是在没有开启 <code>innodb_file_per_table</code> 时的共享表空间文件</strong>，<strong>对应于开启 <code>innodb_file_per_table</code> 时的 <code>.ibd</code> 文件</strong>。</p>
</li>
<li>
<p>在 InnoDB 将<strong>Log Buffer 中的 Redo Log Block 刷到这些 Log File 中时</strong>，会<strong>以追加写入的方式循环轮询写入</strong>，即<strong>先在第一个 Log File</strong>（即 <code>ib_logfile0</code>）<strong>的尾部追加写入</strong>，直到<strong>满了之后再向第二个 Log File</strong>（即 <code>ib_logfile1</code>）<strong>写</strong>，当<strong>第二个 Log File 满了之后会清空一部分第一个 Log File</strong>，<strong>然后继续写入</strong>，由于是将 Log Buffer 中的日志刷到 Log File，所以<strong>在 Log File 中记录日志也是 Log Block 的方式</strong>。</p>
</li>
<li>
<p>在<strong>每组的第一个 Redo Log File 中</strong>，<strong>前 2KB 记录 4 个特定的部分</strong>，<strong>从 2KB 之后才开始记录 Log Block</strong>，<strong>除了第一个 Redo Log File 中会记录</strong>，<strong>Log Group 中的其它 Log File 不会记录这 2KB</strong>，<strong>但是却会腾出这 2KB 的空间</strong>，如下图所示：</p>
<p>
  <img src="../../../media/202106/2021-06-28_111705.png" alt="" /></p>
</li>
<li>
<p><strong>Redo Log File 的大小对 InnoDB 的性能影响非常大</strong>，<strong>设置的太大</strong>，<strong>恢复的时候就会时间越长</strong>，<strong>设置的太小</strong>，<strong>就会导致在写 Redo Log 的时候循环切换 Redo Log File</strong>。</p>
</li>
</ol>
<h3 id="26-日志刷盘规则">
  2.6 日志刷盘规则
  <a class="anchor" href="#26-%e6%97%a5%e5%bf%97%e5%88%b7%e7%9b%98%e8%a7%84%e5%88%99">#</a>
</h3>
<p>Log Buffer 中未刷到磁盘的日志称为脏日志，刷日志到磁盘主要有以下几种规则：</p>
<ol>
<li><strong>发出 Commit 动作</strong>，Commit 发出后是否刷日志由变量<code>innodb_flush_log_at_trx_commit</code> 控制，具体可参考
  <a href="/school-recruitment/#2-2-%e5%90%ab%e4%b9%89">2.2 含义</a>。</li>
<li><strong>每秒刷一次</strong>，这个刷日志的频率由变量<code>innodb_flush_log_at_timeout</code> 值决定，默认是 1 秒，需要注意的是，这个<strong>刷日志的频率和 Commit 动作无关</strong>。</li>
<li><strong>Log Buffer 已经使用的内存超过一半</strong>。</li>
<li><strong>发生 
  <a href="https://notebook.grayson.top/project-37/doc-743">Checkpoint</a></strong>。</li>
</ol>
<h3 id="27-lsn">
  2.7 LSN
  <a class="anchor" href="#27-lsn">#</a>
</h3>
<h4 id="271-含义">
  2.7.1 含义
  <a class="anchor" href="#271-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>
<p>LSN 称为<strong>日志的逻辑序列号</strong>（Log Sequence Number），在 InnoDB 存储引擎中，LSN <strong>占用 8 个字节</strong>，LSN 的值会<strong>随着日志的写入而逐渐增大</strong>。</p>
</li>
<li>
<p>根据 LSN，我们可以获取到几个有用的信息：</p>
<ol>
<li><strong>数据页的版本信息</strong>。</li>
<li><strong>写入的日志总量</strong>（通过 LSN 开始号码和结束号码可以计算出写入的日志总量）。</li>
<li><strong>检查点的位置</strong>。</li>
</ol>
</li>
<li>
<p>LSN 不仅存在于重做日志中，还存在于每个页中：</p>
<ol>
<li>在每个页的头部，有一个值<code>FIL_PAGE_LSN</code>，记录了该页的 LSN。</li>
<li>在页中，LSN 表示该页最后刷新时 LSN 的大小。</li>
<li>因为重做日志记录的是每个页的日志，因此页中的 LSN 用来判断页是否需要进行恢复操作：
<ol>
<li>例如，页 P1 的 LSN 为 10000，而数据库启动时，InnoDB 检测到写入重做日志中的 LSN 为 13000，并且该事务已经提交，那么数据库需要进行恢复操作，将重做日志应用到 P1 页中。</li>
<li>同样的，对于重做日志中 LSN 小于 P1 页的 LSN，那么不需要进行重做，因为 P1 页中的 LSN 表示页已经被刷新到该位置。</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Redo Log 的 LSN 信息可以通过 <code>show engine innodb status \G;</code> 来查看，具体如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mysql&gt; show engine innodb status <span style="color:#ae81ff">\G</span>;

---
LOG
---
Log sequence number <span style="color:#ae81ff">200876324</span>
Log flushed up to   <span style="color:#ae81ff">200876324</span>
Pages flushed up to <span style="color:#ae81ff">200876324</span>
Last checkpoint at  <span style="color:#ae81ff">200876315</span>
<span style="color:#ae81ff">0</span> pending log flushes, <span style="color:#ae81ff">0</span> pending chkp writes
<span style="color:#ae81ff">10</span> log i/o<span style="color:#e6db74">&#39;s done, 0.00 log i/o&#39;</span>s/second
</code></pre></div><p>其中：</p>
<ol>
<li><code>Log sequence number</code>：表示<strong>当前的 Redo Log In Buffer 中的 LSN</strong>。</li>
<li><code>Log flushed up to</code>：表示<strong>刷到 Redo Log File On Disk 中的 LSN</strong>。</li>
<li><code>Pages flushed up to</code>：表示<strong>已经刷到磁盘数据页上的 LSN</strong>。</li>
<li><code>Last checkpoint at</code>：表示<strong>上一次检查点所在位置的 LSN</strong>。</li>
</ol>
</li>
</ol>
<h4 id="272-修改机制">
  2.7.2 修改机制
  <a class="anchor" href="#272-%e4%bf%ae%e6%94%b9%e6%9c%ba%e5%88%b6">#</a>
</h4>
<h5 id="2721-简单说明">
  2.7.2.1 简单说明
  <a class="anchor" href="#2721-%e7%ae%80%e5%8d%95%e8%af%b4%e6%98%8e">#</a>
</h5>
<p>InnoDB 从执行修改语句开始：</p>
<ol>
<li>首先<strong>修改内存中的数据页</strong>，并<strong>在数据页中记录 LSN</strong>，暂且称之为<code>data_in_buffer_lsn</code>。</li>
<li>在<strong>修改数据页的同时向 Redo Log In Buffer 中写入 Redo Log</strong>，并<strong>记录下对应的 LSN</strong>，暂且称之为<code>redo_log_in_buffer_lsn</code>。</li>
<li>写完 Buffer 中的日志后，当<strong>触发了日志刷盘的几种规则</strong>时，会<strong>向 Redo Log File On Disk 刷入重做日志</strong>，并<strong>在该文件中记下对应的 LSN</strong>，暂且称之为<code>redo_log_on_disk_lsn</code>。</li>
<li>数据页不可能永远只停留在内存中，在某些情况下，会<strong>触发 Checkpoint 来将内存中的脏页</strong>（数据脏页和日志脏页）<strong>刷到磁盘</strong>，所以会<strong>在本次 Checkpoint 脏页刷盘结束时</strong>，<strong>在 Redo Log 中记录 Checkpoint 的 LSN 位置</strong>，暂且称之为<code>checkpoint_lsn</code>。</li>
<li>要<strong>记录 Checkpoint 所在位置很快</strong>，只需<strong>简单的设置一个标志即可</strong>，但是<strong>刷数据页并不一定很快</strong>，例如这一词 Checkpoint 要刷入的数据页非常多，也就是说要刷入所有的数据页需要一定的时间来完成，中途刷入的每个数据页都会记下当前页所在的 LSN，暂且称之为<code>data_page_on_disk_lsn</code>。</li>
</ol>
<h5 id="2722-详细说明">
  2.7.2.2 详细说明
  <a class="anchor" href="#2722-%e8%af%a6%e7%bb%86%e8%af%b4%e6%98%8e">#</a>
</h5>
<p>详细说明如下图：</p>
<p>
  <img src="../../../media/202106/2021-06-29_105504.png" alt="" /></p>
<ol>
<li>
<p>假设最初时（12:00:00）<strong>所有的日志和数据页都完成了刷盘</strong>，也<strong>记录好了检查点的 LSN</strong>，这时<strong>他们的 LSN 是完全一致的</strong>。</p>
</li>
<li>
<p>假设此时<strong>开启了一个事务</strong>，并立即<strong>执行了一个 <code>update</code> 操作</strong>，<strong>执行完成后</strong>，<strong>Buffer 中的数据页和 Redo Log 都记录好了更新后的 LSN 值</strong>，假设为 110，这时候如果执行 <code>show engine innodb status</code> 查看各 LSN 的值，即图中 ① 处的位置状态，结果会是：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">log sequence number(110) &gt; log flushed up to(100) = page flushed up to = last checkpoint at
</code></pre></div></li>
<li>
<p>之后又<strong>执行了一个 <code>delete</code> 操作</strong>，LSN 增长到 150，等到 12:00:01 时，<strong>触发 Redo Log 刷盘的规则</strong>（其中有一个规则是 <code>innodb_flush_log_at_timeout</code> 控制的默认日志刷盘频率为 1 秒），这时<strong>Redo Log On Disk 中的 LSN 会更新到和 Redo Log Buffer 的 LSN 一样</strong>，都等于 150，这是 <code>show engine innodb status</code>，即图 ② 中的位置，结果会是：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">log sequence number(150) = log flushed up to(150) &gt; page flushed up to(100) = last checkpoint at
</code></pre></div></li>
<li>
<p>之后又<strong>执行了一个 <code>update</code> 操作</strong>，缓存中的 LSN 将增长到 300，即图 ③ 的位置。</p>
</li>
<li>
<p>假设随后<strong>检查点出现</strong>，即图 ④ 的位置，此时会<strong>触发数据页和日志页刷盘</strong>，但<strong>需要一定的时间来完成</strong>，所以<strong>在数据页刷盘还未完成时</strong>，<strong>检查点的 LSN 还是上一次检查点的 LSN</strong>，但此时<strong>磁盘上数据页和日志页的 LSN 已经增长了</strong>，结果如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">log sequence number &gt; log flushed up to 和 pages flushed up to &gt; last checkpoint at
</code></pre></div><p>但是 <strong><code>log flushed up to</code> 和 <code>pages flushed up to</code> 的大小无法确定</strong>，因为<strong>日志刷盘可能快于、慢于或等于数据刷盘</strong>，但是<strong>Checkpoint 机制有保护数据刷盘速度是慢于日志刷盘的</strong>，<strong>当数据刷盘速度超过日志刷盘时</strong>，<strong>将会暂时停止数据刷盘</strong>，<strong>等待日志刷盘进度超过数据刷盘</strong>。</p>
</li>
<li>
<p>等到<strong>数据页和日志页刷盘完毕</strong>，即到了位置 ⑤ 的时候，<strong>所有的 LSN 都等于 300</strong>。</p>
</li>
<li>
<p>随着时间的推移到了 12:00:02，即图中位置 ⑥，此时又<strong>触发了日志刷盘规则</strong>，但此时<strong>Buffer 中的日志 LSN 和磁盘中的日志 LSN 是一致的</strong>，所以<strong>不执行日志刷盘</strong>，几次是所有的 LSN 都是相等的。</p>
</li>
<li>
<p>随后<strong>执行了一个 <code>insert</code> 操</strong>作，假设 Buffer 中的 LSN 增长到了 800，即图中位置 ⑦，此时各种 LSN 的大小和位置 ① 时一样。</p>
</li>
<li>
<p>随后执行了<strong>提交</strong>动作，即位置 ⑧，默认情况下，提交动作会<strong>触发日志刷盘</strong>，但<strong>不会触发数据刷盘</strong>，所以 <code>show engine innodb status</code> 的结果是：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">log sequence number = log flushed up to &gt; pages flushed up to = last checkpoint at
</code></pre></div></li>
<li>
<p>最后随着时间的推移，<strong>检查点再次出现</strong>，即图中位置 ⑨，但是这次检查点<strong>不会触发日志刷盘</strong>，因为<strong>日志的 LSn 在检查点出现之前已经同步了</strong>，<strong>假设这次数据刷盘速度极快</strong>，<strong>快到一瞬间内完成而无法捕捉状态的变化</strong>，这时 <code>show engine innodb status</code> 的结果是<strong>所有的 LSN 都是相等的</strong>。</p>
</li>
</ol>
<h2 id="3-undo-log">
  3 Undo Log
  <a class="anchor" href="#3-undo-log">#</a>
</h2>
<h3 id="31-含义">
  3.1 含义
  <a class="anchor" href="#31-%e5%90%ab%e4%b9%89">#</a>
</h3>
<ol>
<li>重做日志记录了事务的行为，可以很好地通过其对页进行“重做操作”，但是事务有时还需要进行回滚操作，这时就需要 Undo，因此在<strong>对数据库进行修改时</strong>，InnoDB 存储引擎<strong>不但会产生 Redo Log</strong>，<strong>还会产生一定量的 Undo Log</strong>，这样<strong>如果用户执行的事务或语句由于某种原因失败了</strong>，<strong>或者用户用一条 <code>ROLLBACK</code> 请求回滚</strong>，就<strong>可以利用这些 Undo 信息将数据回滚到修改之前的样子</strong>。</li>
<li><strong>Redo Log 存放在重做日志文件中</strong>，<strong>Undo Log 存放在</strong>数据库内部一个特殊段（Segment）中，这个段称为<strong>Undo 段</strong>（Undo Segment），<strong>位于共享表空间内</strong>。</li>
<li><strong>Undo Log 是逻辑日志</strong>，<strong>只是将数据库逻辑地恢复到原来的样子</strong>，<strong>所有修改都被逻辑地取消了</strong>，<strong>但是数据结构和页本身在回滚之后可能大不相同</strong>：
<ol>
<li>这是因为在多用户并发系统中，可能会有数十、数百、甚至数千个并发事务，<strong>数据库的主要任务就是协调对数据记录的并发访问</strong>，比如，一个事务在修改当前一个页中某几条记录，同时还有别的事务在对同一个页中另几条记录进行修改，因此<strong>不能将一个页回滚到事务开始的样子</strong>，因为这样<strong>会影响到其他事务正在进行的工作</strong>。</li>
<li>假如用户执行了一个<code>INSERT 10W</code> 条记录的事务，这个事务会导致分配一个新的段，即表空间会增大，在<strong>用户执行 <code>ROLLBACK</code> 时</strong>，<strong>会将插入的事务进行回滚</strong>，<strong>但是表空间的大小并不会因此而收缩</strong>，因此，当<strong>InnoDB 存储引擎回滚</strong>时，它实际上<strong>做的是与之前相反的工作</strong>：
<ol>
<li>对于<strong>每个 <code>INSERT</code></strong>，InnoDB 存储引擎会<strong>完成一个 <code>DELETE</code></strong>。</li>
<li>对于<strong>每个 <code>DELETE</code></strong>，InnoDB 存储引擎会<strong>执行一个 <code>INSERT</code></strong>。</li>
<li>对于<strong>每个 <code>UPDATE</code></strong>，InnoDB 存储引擎会<strong>执行一个相反的 <code>UPDATE</code></strong>，<strong>将修改前的行放回去</strong>。</li>
</ol>
</li>
</ol>
</li>
<li>除了回滚操作，Undo Log 的另一个作用是<strong>MVCC</strong>，即在<strong>InnoDB 存储引擎中 MVCC 的实现是通过 Undo Log 来完成</strong>，<strong>当用户读取一行记录时</strong>，<strong>若该记录已经被其他事务占用</strong>，<strong>当前事务可以通过 Undo Log 读取之前的行版本信息</strong>，<strong>以此实现非锁定读取</strong>。</li>
<li><strong>Undo Log 也会产生 Redo Log</strong>，也就是 Undo Log 的产生会伴随着 Redo Log 的产生，这是<strong>因为 Undo Log 也需要持久性的保护</strong>。</li>
</ol>
<h3 id="32-存储管理">
  3.2 存储管理
  <a class="anchor" href="#32-%e5%ad%98%e5%82%a8%e7%ae%a1%e7%90%86">#</a>
</h3>
<ol>
<li>InnoDB 存储引擎对 Undo Log 的管理同样采用段的方式，InnoDB 存储引擎有<strong>回滚段</strong>（Rollback Segment），<strong>每个回滚段中记录了 1024 个 Undo Log Segment</strong>，然后<strong>在每个 Undo Log Segment 中进行 Undo 页的申请</strong>。</li>
<li>在<strong>InnoDB 1.1 版本之前</strong>，<strong>只有一个 Rollback Segment</strong>，因此<strong>支持同时在线的事务限制为 1024</strong>，<strong>从 InnoDB 1.1 版本开始</strong>，InnoDB<strong>支持最大 128 个 Rollback Segment</strong>，因此<strong>支持同时在线的事务限制提高到了 128*1024</strong>。</li>
<li>可以通过如下参数对 Rollback Segment 做进一步的设置：
<ol>
<li><code>innodb_undo_directory</code>：用于<strong>设置 Rollback Segment 文件所在的路径</strong>，<strong>默认值为“.”</strong>，<strong>表示当前 InnoDB 存储引擎的目录</strong>。</li>
<li><code>innodb_undo_logs</code>：用来<strong>设置 Rollback Segment 的个数</strong>，<strong>默认值为 128</strong>，在 InnoDB 1.2 版本中，该参数用来替换之前版本的参数<code>innodb_rollback_segments</code>。</li>
<li><code>innodb_undo_tablespaces</code>：用来<strong>设置构成 Rollback Segment 文件的数量</strong>，这样<strong>Rollback Segment 可以较为平均地分布在多个文件中</strong>，设置该参数后，会在路径<code>innodb_undo_directory</code> 看到<code>undo</code> 为前缀的文件，该文件就代表 Rollback Segment 文件。</li>
</ol>
</li>
<li>事务<strong>在 Undo Log Segment 分配页写入 Undo Log 的这个过程同样需要写入重做日志</strong>，当<strong>事务提交时</strong>，Innodb 存储引擎<strong>会做以下两件事情</strong>：
<ol>
<li><strong>将 Undo Log 放入链表中</strong>，<strong>以供之后的 <code>purge</code> 操作</strong>：
<ol>
<li><strong>事务提交之后并不能马上删除 Undo Log 以及 Undo Log 所在的页</strong>，这是因为<strong>可能还有其他事务需要通过 Undo Log 来得到行记录之前的版本</strong>，因此<strong>事务提交时将 Undo Log 放入一个链表中</strong>，<strong>是否可以最终删除 Undo Log 和 Undo Log 所在的页由 <code>purge</code> 线程来判断</strong>。</li>
</ol>
</li>
<li><strong>判断 Undo Log 所在的页是否可以重用</strong>，<strong>若可以</strong>，则<strong>分配给下个事务使用</strong>：
<ol>
<li>若<strong>为每一个事务分配一个单独的 Undo 页会非常浪费存储空间</strong>，<strong>特别是对于 OLTP 的应用类型</strong>，因为<strong>在事务提交时</strong>，可能并<strong>不能马上释放页</strong>，因此，在 InnoDB 存储引擎的设计中对 Undo 页可以进行重用：
<ol>
<li>当<strong>事务提交时</strong>，首先<strong>将 Undo Log 放入链表中</strong>，然后<strong>判断 Undo 页的使用空间是否小于</strong>$\frac34$，<strong>若是</strong>，则<strong>表示该 Undo 页可以被重用</strong>，之后<strong>新的 Undo Log 记录在当前 Undo Log 的后面</strong>。</li>
<li>由于<strong>存放 Undo Log 的列表是以记录进行组织的</strong>，而<strong>Undo 页可能存放着不同事务的 Undo Log</strong>，因此<code>purge</code><strong>操作需要涉及磁盘的离散读取操作</strong>，是一个<strong>比较缓慢</strong>的过程。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="33-格式">
  3.3 格式
  <a class="anchor" href="#33-%e6%a0%bc%e5%bc%8f">#</a>
</h3>
<p>在 InnoDB 存储引擎中，Undo Log 分为两种，分别是<strong>Insert Undo Log</strong>、<strong>Update Undo Log</strong>。</p>
<h4 id="331-insert-undo-log">
  3.3.1 Insert Undo Log
  <a class="anchor" href="#331-insert-undo-log">#</a>
</h4>
<ol>
<li>Insert Undo Log 是指在<strong>Insert 操作中产生的 Undo Log</strong>，因为<strong>Insert 操作的记录</strong>，<strong>只对事务本身可见</strong>，<strong>对其他事务不可见</strong>（这是事务隔离性的要求），因此<strong>Insert Undo Log 可以在事务提交后直接删除</strong>。</li>
<li>Insert Undo Log 的格式如下图所示，详细信息如下：
<ol>
<li>
<p><code>next</code>：2 个字节，<strong>表示下一个 Undo Log 的位置</strong>。</p>
</li>
<li>
<p><code>type_cmpl</code>：1 字节，<strong>表示 Undo 的类型</strong>，<strong>对于 Insert Undo Log</strong>，<strong>该值总是 11</strong>。</p>
</li>
<li>
<p><code>undo_no</code>：<strong>表示事务的 ID</strong>，采用压缩存储。</p>
</li>
<li>
<p><code>table_id</code>：<strong>表示 Undo Log 所对应的表对象</strong>，采用压缩存储。</p>
</li>
<li>
<p><code>lenN</code>、<code>colN</code>：<strong>表示主键的列和值</strong>，在<strong>进行 <code>ROLLBACK</code> 操作时</strong>，根据这些值<strong>可以定位到具体的记录</strong>，<strong>然后进行删除即可</strong>。</p>
</li>
<li>
<p><code>start</code>：2 字节，<strong>表示 Undo Log 的开始位置</strong>。</p>
<p>
  <img src="../../../media/202106/2021-06-29_164810.png" alt="" /></p>
</li>
</ol>
</li>
</ol>
<h4 id="332-update-undo-log">
  3.3.2 Update Undo Log
  <a class="anchor" href="#332-update-undo-log">#</a>
</h4>
<ol>
<li>Update Undo Log 记录的是<strong>对 <code>delete</code> 和 <code>update</code> 操作所产生的 Undo Log</strong>，该 Undo Log<strong>可能需要提供 MVCC 机制</strong>，因此<strong>不能在事务提交时就删除</strong>，<strong>提交时放入 Undo Log 链表</strong>，<strong>等待 <code>purge</code> 线程进行最后的删除</strong>。</li>
<li>Update Undo Log 的结构如下图所示，详细信息如下（Update Undo Log 相对于 Insert Undo Log，记录的内容更多，所需占用的空间也更大，其中<code>next</code>、<code>start</code>、<code>undo_no</code>、<code>table_id</code> 与 Insert Undo Log 相同，这里不再叙述。）：
<ol>
<li>
<p><code>type_cmpl</code>：<strong>表示 Undo 的类型</strong>，由于 Update Undo Log 本身还有其他类型，因此其可能的值如下：</p>
<ol>
<li><strong>12</strong>：<code>TRX_UNDO_UPD_EXIST_REC</code>，<strong>表示更新 <code>non-delete-mark</code> 的记录</strong>。</li>
<li><strong>13</strong>：<code>TRX_UNDO_UPD_DEL_REC</code>，<strong>表示将 <code>delete</code> 的记录标记为 <code>not delete</code></strong>。</li>
<li><strong>14</strong>：<code>TRX_UNDO_DEL_MARK_REC</code>，<strong>表示将记录标记为 <code>delete</code></strong>。</li>
</ol>
</li>
<li>
<p><code>update_vector</code>：<strong>表示 <code>update</code> 操作导致发生改变的列</strong>，<strong>每个修改的列信息都要记录在 Undo Log 中</strong>，<strong>对于不同的 Undo Log 类型</strong>，<strong>可能还需要记录对索引列所做的修改</strong>。</p>
<p>
  <img src="../../../media/202106/2021-06-29_170402.png" alt="" /></p>
</li>
</ol>
</li>
</ol>
<h3 id="34-deleteupdate-操作的内部机制">
  3.4 delete/update 操作的内部机制
  <a class="anchor" href="#34-deleteupdate-%e6%93%8d%e4%bd%9c%e7%9a%84%e5%86%85%e9%83%a8%e6%9c%ba%e5%88%b6">#</a>
</h3>
<h4 id="341-delete">
  3.4.1 delete
  <a class="anchor" href="#341-delete">#</a>
</h4>
<ol>
<li><code>delete</code><strong>操作并不直接删除记录</strong>，<strong>而是将记录标记为已删除</strong>，也就是<strong>将记录的 <code>delete flag</code> 设置为 1</strong>，而<strong>记录最终的删除是在 <code>purge</code> 操作中完成的</strong>。</li>
</ol>
<h4 id="342-update">
  3.4.2 update
  <a class="anchor" href="#342-update">#</a>
</h4>
<p><code>update</code> 分为两种情况：</p>
<ol>
<li>如果<code>update</code><strong>的是非主键</strong>，在 Update Undo Log 中<strong>直接反向记录是如何 <code>update</code> 的</strong>即可。</li>
<li>如果<code>update</code><strong>的是主键</strong>，则主要分两个步骤进行，首先<strong>将原主键记录标记为已删除</strong>，然后<strong>插入一条新的纪录</strong>。</li>
</ol>
<h3 id="35-purge">
  3.5 purge
  <a class="anchor" href="#35-purge">#</a>
</h3>
<h4 id="351-含义">
  3.5.1 含义
  <a class="anchor" href="#351-%e5%90%ab%e4%b9%89">#</a>
</h4>
<ol>
<li>
<p>假如存在如下的表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> t(
  a INT,
  b VARCHAR(<span style="color:#ae81ff">32</span>),
  <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>(a),
  <span style="color:#66d9ef">KEY</span>(b)
)ENGINE<span style="color:#f92672">=</span>InnoDB;
</code></pre></div></li>
<li>
<p><code>delete</code> 和 <code>update</code> 操作可能并不直接删除原有的数据：</p>
<ol>
<li>
<p>例如，对表 <code>t</code> 执行如下的 SQL 语句：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> t <span style="color:#66d9ef">WHERE</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</code></pre></div><p>表 <code>t</code> 上列 <code>a</code> 有聚集索引，列 <code>b</code> 上有辅助索引。</p>
</li>
<li>
<p>对于上述的 <code>delete</code> 操作，仅是将主键列等于 1 的记录 <code>delete flag</code> 设置为 1，记录并没有被删除，即记录还是存在于 B+ 树中。</p>
</li>
<li>
<p>其次，对辅助索引上 <code>a</code> 等于 1，<code>b</code> 等于 1 的记录同样没有做任何处理，甚至没有产生 Undo Log，而真正删除这行记录的操作其实被延时了，最终在 <code>purge</code> 操作中完成。</p>
</li>
</ol>
</li>
<li>
<p><code>purge</code><strong>用于最终完成 <code>delete</code> 和 <code>update</code> 操作</strong>：</p>
<ol>
<li>这样设计是因为<strong>InnoDB 存储引擎支持 MVCC</strong>，所以<strong>记录不能在事务提交时立即进行处理</strong>，这时<strong>其他事务可能正在引用这行</strong>，故 InnoDB 存储引擎<strong>需要保存记录之前的版本</strong>，而<strong>是否可以删除该条记录通过 <code>purge</code> 来进行判断</strong>，<strong>若该行记录已不被任何其他事务引用</strong>，那么<strong>就可以进行真正的 <code>delete</code> 操作</strong>。</li>
<li>可见，<code>purge</code> 操作是清理之前的<code>delete</code> 和<code>update</code> 操作，将上述操作最终完成，而实际执行的操作为<code>delete</code> 操作，清理之前行记录的版本。</li>
</ol>
</li>
<li>
<p>为了节省存储空间，InnoDB 存储引擎的 Undo Log 设计是这样的：</p>
<ol>
<li><strong>一个页上允许多个事务的 Undo Log 存在</strong>，虽然这<strong>不代表事务在全局过程中提交的顺序</strong>，但是<strong>后面的事务产生的 Undo Log 总在最后</strong>。</li>
<li>此外，InnoDB 存储引擎还有一个**<code>history</code> 列表**，他**根据事务提交的顺序**，**将 Undo Log 进行链接**，如下面的一种情况：
<ol>
<li>
<p>如下图所示，<strong>History List 表示按照事务提交的顺序将 Undo Log 进行组织</strong>，在 InnoDB 存储引擎的设计中，<strong>先提交的事务总在尾端</strong>，</p>
</li>
<li>
<p>Undo Page 存放了 Undo Log，由于可以重用，因此<strong>一个 Undo Page 中可能存放了多个不同事务的 Undo Log</strong>，<code>trx5</code> 的灰色阴影表示该 Undo Log 还被其他事务引用。</p>
</li>
<li>
<p>在执行 <code>purge</code> 的过程中，InnoDB 存储引擎首先从 History List 中<strong>找到第一个需要被清理的记录</strong>，这里为 <code>trx1</code>，<strong>清理之后</strong>InnoDB 存储引擎会<strong>在 <code>trx1</code> 的 Undo Log 所在的页中继续寻找是否存在可以被清理的记录</strong>，这里会找到事务 <code>trx3</code>，接着找到 <code>trx5</code>，但是<strong>发现 <code>trx5</code> 被其他事务所引用而不能清理</strong>，故会<strong>再次去 History List 中查找</strong>，发现这时最尾端的记录为 <code>trx2</code>，接着找到 <code>trx2</code> 所在的页，然后依次再把事务 <code>trx6</code>、<code>trx4</code> 的记录进行清理，由于 Undo Page2 中所有的页都被清理了，因此该 Undo Page 可以被重用。</p>
</li>
<li>
<p>InnoDB 存储引擎这种先从 History List 中找 Undo Log，然后再从 Undo Page 中找 Undo Log 的设计模式是为了<strong>避免大量的随机读取操作</strong>，从而<strong>提高 <code>purge</code> 的效率</strong>。</p>
<p>
  <img src="../../../media/202106/2021-06-30_100828.png" alt="" /></p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h4 id="352-参数">
  3.5.2 参数
  <a class="anchor" href="#352-%e5%8f%82%e6%95%b0">#</a>
</h4>
<h5 id="3521-innodb_purge_batch_size">
  3.5.2.1 innodb_purge_batch_size
  <a class="anchor" href="#3521-innodb_purge_batch_size">#</a>
</h5>
<ol>
<li>全局动态参数<code>innodb_purge_batch_size</code> 用来<strong>设置每次 <code>purge</code> 操作需要清理的 Undo Page 数量</strong>：</li>
<li>在<strong>InnoDB 1.2 之前</strong>，该参数的<strong>默认值为 20</strong>，从<strong>1.2 版本开始</strong>，该参数的<strong>默认值为 300</strong>。</li>
<li>通常来说，该参数<strong>设置的越大</strong>，<strong>每次回收的 Undo Page 也就越多</strong>，这样<strong>可供重用的 Undo Page 就越多</strong>，<strong>减少了磁盘存储空间与分配的开销</strong>。</li>
<li>不过，该参数<strong>设置的越大</strong>，则<strong>每次需要处理更多的 Undo Page</strong>，从而<strong>导致 CPU 和磁盘 IO 过于集中于对 Undo Log 的处理</strong>，使<strong>性能下降</strong>。</li>
<li>因此，该参数的调整<strong>需要长期观察数据库的运行状态</strong>，<strong>一般情况下不需要调整该参数</strong>。</li>
</ol>
<h5 id="3522-innodb_max_purge_lag">
  3.5.2.2 innodb_max_purge_lag
  <a class="anchor" href="#3522-innodb_max_purge_lag">#</a>
</h5>
<ol>
<li>
<p>当<strong>InnoDB 存储引擎的压力非常大时</strong>，并<strong>不能高效地进行 <code>purge</code> 操作</strong>，那么<strong>History List 的长度会变得越来越长</strong>。</p>
</li>
<li>
<p>全局动态参数 <code>innodb_max_purge_lag</code> 用来<strong>控制 History List 的长度</strong>，若<strong>长度大于该参数</strong>时，其<strong>会延缓 DML 的操作</strong>，该参数的<strong>默认值为 0</strong>，表示<strong>不对 History List 做任何限制</strong>，当<strong>大于 0 时</strong>，就<strong>会延缓 DML 的操作</strong>，其延缓的算法为：</p>
<p>$$
delay = ((length(history_list) - innodb_max_purge_lag)*10-5
$$</p>
<p><strong>$delay$ 的单位是毫秒</strong>，此外，需要特别注意的是，$delay$ 的<strong>对象是行</strong>，而不是一个 DML 操作，例如当一个 <code>update</code> 操作需要更新 5 行数据时，每行数据的操作都会被 $delay$，故总的延时时间为 $5*delay$，而 $delay$ 的统计会在每一次 <code>purge</code> 操作完成后重新计算。</p>
</li>
<li>
<p>InnoDB 1.2 版本引入了新的全局动态参数 <code>innodb_max_purge_lag_delay</code>，其用来<strong>控制 $delay$ 的最大毫秒数</strong>，也就是当上述<strong>计算得到的 $delay$ 值大于该参数时</strong>，<strong>将 $delay$ 设置为 <code>innodb_max_purge_lag_delay</code></strong>，<strong>避免由于 <code>purge</code> 操作缓慢导致其他 SQL 线程出现无限制的等待</strong>。</p>
</li>
</ol>
<h2 id="参考文献">
  参考文献
  <a class="anchor" href="#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae">#</a>
</h2>
<ol>
<li>《MySQL 技术内幕（InnoDB 存储引擎）第 2 版》</li>
<li>
  <a href="https://www.cnblogs.com/f-ck-need-u/archive/2018/05/08/9010872.html">详细分析 MySQL 事务日志(redo log 和 undo log)</a>。</li>
</ol>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





  <div>
    <a class="flex align-center" href="https://github.com/graysonwp/ComputerCookbook-SchoolRecruitment/edit/main/exampleSite/content/docs/database/1%e3%80%81%e6%95%b0%e6%8d%ae%e5%ba%93%e5%9f%ba%e7%a1%80/1.4%20%e4%ba%8b%e5%8a%a1%e6%97%a5%e5%bf%97.md" target="_blank" rel="noopener">
      <img src="/school-recruitment/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


<div id="gitalk-container" style="width : 100%;"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://rawgit.com/qhh0205/78e9e0b1f3114db6737f3ed8cdd51d3a/raw/3894c5be5aa2378336b1f5ee0f296fa0b22d06e9/md5.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: '94880e59f97ce511eb59',
    clientSecret: '025de6989c2398fdb4bfc398994541421fe6d32b',
    repo: 'ComputerCookbook-SchoolRecruitment',
    owner: 'graysonwp',
    admin: ['graysonwp'],
    id: md5(location.pathname), 
    distractionFreeMode: false, 
    body: location.href, 
    proxy: 'https:\/\/shielded-brushlands-08810.herokuapp.com\/https:\/\/github.com\/login\/oauth\/access_token' 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>


</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#事务日志">事务日志</a>
      <ul>
        <li><a href="#1-binlog">1 Binlog</a>
          <ul>
            <li><a href="#11-含义">1.1 含义</a></li>
            <li><a href="#12-常用参数">1.2 常用参数</a>
              <ul>
                <li><a href="#121-max_binlog_size">1.2.1 max_binlog_size</a></li>
                <li><a href="#122-binlog_cache_size">1.2.2 binlog_cache_size</a></li>
                <li><a href="#123-sync_binlog">1.2.3 sync_binlog</a></li>
                <li><a href="#124-binlog-do-db-和-binlog-ignore-db">1.2.4 binlog-do-db 和 binlog-ignore-db</a></li>
                <li><a href="#125-log-slave-update">1.2.5 log-slave-update</a></li>
                <li><a href="#126-binlog_format">1.2.6 binlog_format</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#2-redo-log">2 Redo Log</a>
          <ul>
            <li><a href="#21-redo-log-与-binlog-的区别">2.1 Redo Log 与 Binlog 的区别</a></li>
            <li><a href="#22-含义">2.2 含义</a></li>
            <li><a href="#23-测试刷日志的时间对数据修改性能的影响">2.3 测试刷日志的时间对数据修改性能的影响</a></li>
            <li><a href="#24-log-block">2.4 Log Block</a></li>
            <li><a href="#25-log-group-和-redo-log-file">2.5 Log Group 和 Redo Log File</a></li>
            <li><a href="#26-日志刷盘规则">2.6 日志刷盘规则</a></li>
            <li><a href="#27-lsn">2.7 LSN</a>
              <ul>
                <li><a href="#271-含义">2.7.1 含义</a></li>
                <li><a href="#272-修改机制">2.7.2 修改机制</a>
                  <ul>
                    <li><a href="#2721-简单说明">2.7.2.1 简单说明</a></li>
                    <li><a href="#2722-详细说明">2.7.2.2 详细说明</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#3-undo-log">3 Undo Log</a>
          <ul>
            <li><a href="#31-含义">3.1 含义</a></li>
            <li><a href="#32-存储管理">3.2 存储管理</a></li>
            <li><a href="#33-格式">3.3 格式</a>
              <ul>
                <li><a href="#331-insert-undo-log">3.3.1 Insert Undo Log</a></li>
                <li><a href="#332-update-undo-log">3.3.2 Update Undo Log</a></li>
              </ul>
            </li>
            <li><a href="#34-deleteupdate-操作的内部机制">3.4 delete/update 操作的内部机制</a>
              <ul>
                <li><a href="#341-delete">3.4.1 delete</a></li>
                <li><a href="#342-update">3.4.2 update</a></li>
              </ul>
            </li>
            <li><a href="#35-purge">3.5 purge</a>
              <ul>
                <li><a href="#351-含义">3.5.1 含义</a></li>
                <li><a href="#352-参数">3.5.2 参数</a>
                  <ul>
                    <li><a href="#3521-innodb_purge_batch_size">3.5.2.1 innodb_purge_batch_size</a></li>
                    <li><a href="#3522-innodb_max_purge_lag">3.5.2.2 innodb_max_purge_lag</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#参考文献">参考文献</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












