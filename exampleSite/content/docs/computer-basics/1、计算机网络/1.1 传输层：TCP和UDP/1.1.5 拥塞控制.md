---
weight: 5
---

# 拥塞控制

## 1 TCP 的拥塞控制是怎么实现的

![拥塞控制](../../../media/202105/2021-05-05_110546.png)

拥塞控制主要由四个算法组成：**慢启动（`Slow Start`）、拥塞避免（`Congestion Voidance`）、快重传（`Fast Retransmit`）、快恢复（`Fast Recovery`）**：

1. **慢启动：** 刚开始发送数据时，先把**拥塞窗口**（`Congestion Window`）设置为 1 个最大的报文段`MSS` 的数值，每收到 1 个新的确认报文之后，就把拥塞窗口加 1 个`MSS`，这样**每经过一个传输轮次**（或者说每经过一个往返时间`RTT`），**拥塞窗口的大小就会加倍**。
2. **拥塞避免：** 当拥塞窗口的大小达到**慢开始门限**（`Slow Start Threshold`）时，开始**执行拥塞避免算法**，**拥塞窗口大小不再指数增加，而是线性增加**，即每经过一个传输轮次，只增加 1 个`MSS`。
   > 无论在**慢开始**阶段还是**拥塞避免**阶段，只要**发送方**判断**网络出现拥塞**（其根据就是没有收到确认），就要**把慢开始门限设置为出现拥塞时的发送方窗口的一半**（但不能小于 2），然后**把拥塞窗口重新设置为 1**，**执行慢开始算法**。
   >
3. **快重传：** 快重传要求**接收方在收到一个失序的报文段后就立即发出重复确认**，为的是使发送方尽早知道有报文段没有到达对方，而不要等到自己发送数据时捎带确认，快重传算法规定，**发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段，而不必继续等待设置的重传计时器时间到期**。
4. **快恢复：** 当**发送方连续收到三个重复确认**时，就把**慢开始门限减半**，然后**执行拥塞避免算法**，不执行慢开始的原因是**如果网络出现拥塞的话就不会收到好几个重复的确认**，所以发送方认为现在网络可能没有出现拥塞。

## 2 参考文献

1. [TCP 的拥塞控制是怎么实现的？](https://github.com/wolverinn/Waking-Up/blob/master/Computer%20Network.md#TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84)
