---
weight: 1
---

# 进程和线程的区别

## 1 进程和线程有哪些区别

1. **进程**（Process）是**系统进行资源分配和调度的基本单位**，**线程**是**CPU 调度和分配的基本单位**。
2. 线程依赖于进程而存在，**一个进程至少有一个线程**。
3. **进程有自己的独立地址空间**，**线程共享所属进程的地址空间**。
4. 进程是拥有系统资源的一个独立单位，而**线程**基本上**不拥有系统资源**，**只拥有一点在运行中必不可少的资源**（如程序计数器、一组寄存器和栈），**和其他线程共享本进程的相关资源**如内存、I/O、CPU 等。
5. 在**进程切换**时，涉及到**整个当前进程 CPU 环境的设置**以及**新被调度运行的 CPU 环境的设置**，而**线程切换**只需**保存和设置少量的寄存器的内容**，并不涉及存储器管理方面的操作，可见，**进程切换时的开销远大于线程切换的开销**。
6. **线程间的通信更方便**，同一进程下的线程共享全局变量等数据，而**进程间的通信需要以进程间通信（IPC）的方式进行**。
7. 多线程程序只要有一个线程崩溃，整个程序就崩溃了，但多进程程序中一个进程崩溃并不会对其他进程造成影响，因为进程有自己独立的地址空间，因此，**多进程更加健壮**。

## 2 同一进程中的线程可以共享哪些变量

1. **进程代码块**。
2. 进程的**公有数据**（全局变量、静态变量...）。
3. 进程**打开的文件描述符**。
4. 进程的**当前目录**。
5. **信号处理器**/**信号处理函数**：对收到的信号的处理方式。
6. **进程 ID**与**进程组 ID**。

## 3 线程独占哪些资源

1. **线程 ID**。
2. 一组**寄存器的值**。
3. **线程自身的栈**（堆是共享的）。
4. **错误返回码**：线程可能会产生不同的错误返回码，一个线程的错误返回码不应该被其他线程修改。
5. **信号掩码**/**信号屏蔽字**：表示是否屏蔽/阻塞相应的信号（SIGKILL 和 SIGSTOP 除外）。

## 参考文献

1. [进程和线程有什么区别？](https://github.com/wolverinn/Waking-Up/blob/master/Operating%20Systems.md#%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB)
